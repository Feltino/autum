!function(e,n,t,o,i){"function"==typeof define&&define.amd?define(function(){return e.fullpage=o(n,t),e.fullpage}):"object"==typeof exports?module.exports=o(n,t):n.fullpage=o(n,t)}(this,window,document,function(e,n,t){"use strict";var o,i,a,r,l,c,s,f,u,v="fullpage-wrapper",d="."+v,h="fp-notransition",p="fp-destroyed",g="fp-viewing",m="active",S="."+m,y="fp-section",b="."+y,T=b+S,L="fp-nav",w="fp-slide",x="."+w,E=x+S,M="fp-slides",k="."+M,N="fp-slidesContainer",A="."+N,B="fp-slidesNav",C="."+B,P=C+" a",H="fp-controlArrow",z="."+H,R="fp-prev",I=H+" "+R,D=z+"."+R,O=H+" fp-next",Y=z+".fp-next",X=!1,j=navigator.userAgent.match(/(iPhone|iPod|iPad|Android|playbook|silk|BlackBerry|BB10|Windows Phone|Tizen|Bada|webOS|IEMobile|Opera Mini)/),W="ontouchstart"in e||navigator.msMaxTouchPoints>0||navigator.maxTouchPoints,F=ae(),U=!1,$=!0,q=[];function K(){for(var t=Z(z),i=0;i<t.length;i++)ce(t[i],"click onclick touchstart",Fe);he(o.autoScrolling,"internal");var a,l=Q(T),c=Q(E,l),f=_(Q(T));c&&(0!==f||0===f&&0!==_(c))&&fn(c),o.navigation&&(J(r,"margin-top","-"+r.offsetHeight/2+"px"),oe(Q("a",Z("li",r)[_(Q(T))]),m)),a=Q(T),le(o.afterLoad)&&o.afterLoad.call(a,a.getAttribute("data-anchor"),_(a)+1),le(o.afterRender)&&o.afterRender.call(s);var u=e.location.hash.replace("#","").split("/")[0];if(u.length){var v=Q('[data-anchor="'+u+'"]');if(!o.animateAnchor&&v.length){if(o.autoScrolling)un(v.offsetTop);else{un(0),ln(u);var d=Xe(v.offsetTop);se(d.element,d.options,0)}Je(u,null),le(o.afterLoad)&&o.afterLoad.call(v,u,_(v)+1),te(l,m),oe(v,m)}}ln(),cn(n,We,"DOMContentLoaded","DOMContentLoaded","DOMContentLoaded")}function V(e){return n.getElementsByTagName(e)[0]}function G(e,n){var t;for(t in n)n.hasOwnProperty(t)&&null!==t&&(e.style[t]=n[t]);return e}function J(e,n,t){e.style[n]=t}function Q(e,t){return(t=t||n).querySelector(e)}function Z(e,t){return(t=t||n).querySelectorAll(e)}function _(e){for(var n=0;e=e.previousSibling;)3==e.nodeType&&/^\s*$/.test(e.data)||n++;return n}function ee(e,n){return void 0!==n?e.style.display=n?"block":"none":"block"==e.style.display?e.style.display="none":e.style.display="block",e}function ne(e,n){return!!e.className.match(new RegExp("(\\s|^)"+n+"(\\s|$)"))}function te(e,n){if(e&&ne(e,n)){var t=new RegExp("(\\s|^)"+n+"(\\s|$)");e.className=e.className.replace(t,"")}}function oe(e,n){e&&!ne(e,n)&&(e.className+=" "+n)}function ie(e,n){return e&&(n(e)?e:ie(e.parentNode,n))}function ae(){return"innerHeight"in e?e.innerHeight:n.documentElement.offsetHeight}function re(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function le(e){return e&&"[object Function]"==={}.toString.call(e)}function ce(e,t,o){for(var i=t.split(" "),a=0,r=i.length;a<r;a++)n.addEventListener?e.addEventListener(i[a],o,!1):e.attachEvent(i[a],o,!1)}function se(n,t,i,a){var r,c=(r=n).self!=e&&ne(r,M)?r.scrollLeft:!o.autoScrolling||o.scrollBar?fe():r.offsetTop,s=t-c,f=0;l=!0;var u=function(){var e;l?(f+=20,e=Math.easeInOutCubic(f,c,s,i),de(n,e),f<i?setTimeout(u,20):void 0!==a&&a()):f<i&&a()};u()}function fe(){var t=n.documentElement;return(e.pageYOffset||t.scrollTop)-(t.clientTop||0)}function ue(e){for(var n=e.nextSibling;n&&1!=n.nodeType;)n=n.nextSibling;return n}function ve(e){for(var n=e.previousSibling;n&&1!=n.nodeType;)n=n.previousSibling;return n}function de(n,t){!o.autoScrolling||o.scrollBar||n.self!=e&&ne(n,M)?n.self!=e&&ne(n,M)?n.scrollLeft=t:n.scrollTo(0,t):n.style.top=t+"px"}function he(e,t){dn("autoScrolling",e,t);var i=Q(T);if(o.autoScrolling&&!o.scrollBar)G(n.body,{overflow:"hidden",height:"100%"}),G(V("html"),{overflow:"hidden",height:"100%"}),pe(o.recordHistory,"internal"),G(s,{"-ms-touch-action":"none","touch-action":"none"}),i&&un(i.offsetTop);else{G(n.body,{overflow:"visible",height:"100%"}),G(V("html"),{overflow:"visible",height:"100%"}),pe(!1,"internal"),G(s,{"-ms-touch-action":"","touch-action":""}),un(0);var a=Xe(i.offsetTop);a.element.scrollTo(0,a.options)}}function pe(e,n){dn("recordHistory",e,n)}function ge(e,n){dn("scrollingSpeed",e,n)}function me(){var e=ve(Q(T));e&&Ye(e,null,!0)}function Se(){var e=ue(Q(T));e&&Ye(e,null,!1)}function ye(e,n){var t=_e(e);void 0!==n?en(e,n):t&&Ye(t)}function be(){Oe("next")}function Te(){Oe("prev")}function Le(e){if(!ne(s,p)){U=!0,F=ae();for(var n=Z(b),t=0;t<n.length;++t){var i=n[t],a=Q(k,i),r=Z(x,i);a&&r.length>1&&$e(a,Q(E,a))}var l=Q(T);_(l)&&un(l.offsetTop),U=!1,le(o.afterResize)&&e&&o.afterResize.call(s),le(o.afterReBuild)&&!e&&o.afterReBuild.call(s)}}function we(e){var t=n.createElement("div");t.className=I;var i=n.createElement("div");i.className=O;var a=Q(k,e);o.controlArrowColor,a.parentNode.appendChild(t),a.parentNode.appendChild(i),o.loopHorizontal||(Q(D,e).style.display="none")}Math.easeInOutCubic=function(e,n,t,o){return(e/=o/2)<1?t/2*e*e*e+n:t/2*((e-=2)*e*e+2)+n};var xe=!1;function Ee(){var e;if(!o.autoScrolling||o.scrollBar){for(var n=fe(),t=0,a=Math.abs(n-Z(b)[0].offsetTop),r=Z(b),l=0;l<r.length;++l){var c=r[l],s=Math.abs(n-c.offsetTop);s<a&&(t=l,a=s)}e=Z(b)[t]}if(!o.autoScrolling||o.scrollBar){if(!ne(e,m)){xe=!0;var v=Q(T),d=_(v)+1,h=Qe(e),p=e.getAttribute("data-anchor"),g=_(e)+1,S=Q(E,e);if(S)var y=S.getAttribute("data-anchor"),L=_(S);$&&(te(v,m),oe(e,m),le(o.onLeave)&&o.onLeave.call(v,d,g,h),le(o.afterLoad)&&o.afterLoad.call(e,p,g),Je(p,0),o.anchors.length&&(i=p,on(L,y,p,g))),clearTimeout(f),f=setTimeout(function(){xe=!1},100)}o.fitToSection&&(clearTimeout(u),u=setTimeout(function(){($&&!o.autoScrolling||o.scrollBar)&&(_(Q(T))==_(e)&&(U=!0),Ye(e),U=!1)},o.fitToSectionDelay))}}function Me(e){"down"==e?Se():me()}var ke=0,Ne=0,Ae=0,Be=0;function Ce(t){var i=e.event||t||t.originalEvent;if(Pe(i)){o.autoScrolling&&re(t);var a=Q(T),r=Z(k,a);if($&&!X){var l=sn(i);Ae=l.y,Be=l.x,r&&Math.abs(Ne-Be)>Math.abs(ke-Ae)?Math.abs(Ne-Be)>("innerWidth"in e?e.innerWidth:n.documentElement.offsetWidth)/100*o.touchSensitivity&&(Ne>Be?be():Te()):o.autoScrolling&&Math.abs(ke-Ae)>ae()/100*o.touchSensitivity&&(ke>Ae?Me("down"):Ae>ke&&Me("up"))}}}function Pe(e){return void 0===e.pointerType||"mouse"!=e.pointerType}function He(n){var t=e.event||n||n.originalEvent;if(o.fitToSection&&(l=!1),Pe(t)){var i=sn(t);ke=i.y,Ne=i.x}}function ze(e,n){for(var t=0,o=e.slice(Math.max(e.length-n,1)),i=0;i<o.length;i++)t+=o[i];return Math.ceil(t/n)}var Re,Ie=(new Date).getTime();function De(n){var t=(new Date).getTime();if(o.autoScrolling){var i=(n=e.event||n||n.originalEvent).wheelDelta||-n.deltaY||-n.detail,a=Math.max(-1,Math.min(1,i));q.length>149&&q.shift(),q.push(Math.abs(i)),o.scrollBar&&re(n);var r=t-Ie;return Ie=t,r>200&&(q=[]),$&&ze(q,10)>=ze(q,70)&&Me(a<0?"down":"up"),!1}o.fitToSection&&(l=!1)}function Oe(e){var n=Q(T),t=Q(k,n);if(t&&!X){var i,a=Q(E,t),r=null;if(!(r="prev"===e?ve(a):ue(a))){if(!o.loopHorizontal)return;var l=function(e,n){for(var t=[];e;e=e.nextSibling)1==e.nodeType&&e!=n&&t.push(e);return t}((i=a).parentNode.firstChild,i);r="prev"===e?l[l.length-1]:l[0]}X=!0,$e(t,r)}}function Ye(e,n,t){if(null!==e){var a={element:e,callback:n,isMovementUp:t,dtop:e.offsetTop,yMovement:Qe(e),anchorLink:e.getAttribute("data-anchor"),sectionIndex:_(e),activeSlide:Q(E,e),activeSection:Q(T),leavingSection:_(Q(T))+1,localIsResizing:U};if(!(_(a.activeSection)==a.sectionIndex&&!U||o.scrollBar&&fe()===a.dtop)){if(a.activeSlide)var r=a.activeSlide.getAttribute("data-anchor"),l=_(a.activeSlide);for(var c=Z(b),s=0;s<c.length;s++)te(c[s],m);oe(e,m),$=!1,on(l,r,a.anchorLink,a.sectionIndex),le(o.onLeave)&&!a.localIsResizing&&o.onLeave.call(a.activeSection,a.leavingSection,a.sectionIndex+1,a.yMovement),function(e){if(o.css3&&o.autoScrolling&&!o.scrollBar){Ze("translate3d(0px, -"+e.dtop+"px, 0px)",!0),o.scrollingSpeed?setTimeout(function(){je(e)},o.scrollingSpeed):je(e)}else{var n=Xe(e.dtop);se(n.element,n.options,o.scrollingSpeed,function(){je(e)})}}(a),i=a.anchorLink,Je(a.anchorLink,a.sectionIndex)}}}function Xe(n){var t={};return o.autoScrolling&&!o.scrollBar?(t.options=-n,t.element=Q("."+v)):(t.options=n,t.element=e),t}function je(e){le(o.afterLoad)&&!e.localIsResizing&&o.afterLoad.call(e.element,e.anchorLink,e.sectionIndex+1),$=!0,le(e.callback)&&e.callback.call(this)}function We(){var n=e.location.hash.replace("#","").split("/"),t=n[0],o=n[1];t&&en(t,o)}function Fe(n){var t=this;t.self==e&&(t=n.target||n.srcElement),ne(t,R)?Te():be()}function Ue(){if(!xe){var n=e.location.hash.replace("#","").split("/"),t=n[0],o=n[1];t.length&&(t&&t!==i&&void 0!==i||void 0===i&&void 0===o&&!X||!X&&a!=o)&&en(t,o)}}function $e(e,n){var t=_(n),i=ie(e,function(e){return ne(e,y)}),a=_(i),r=i.getAttribute("data-anchor"),l=Q(C,i),c=rn(n),s=U;if(o.onSlideLeave){var f=Q(E,i),u=_(f),v=u==t?"none":u>t?"left":"right";s||"none"===v||le(o.onSlideLeave)&&o.onSlideLeave.call(f,r,a+1,u,v,t)}for(var d=Z(x,i),h=0;h<d.length;h++)te(d[h],m);oe(n,m),!o.loopHorizontal&&o.controlArrows&&(ee(Q(D,i),0!==t),ee(Q(Y,i),!n.is(":last-child"))),ne(i,m)&&on(t,c,r,a);var p=function(){s||le(o.afterSlideLoad)&&o.afterSlideLoad.call(n,r,a+1,c,t),X=!1};if(o.css3){var g="translate3d(-"+Math.round(n.offsetLeft)+"px, 0px, 0px)",b=Q(A,e);Ge(b,o.scrollingSpeed),vn(b,g),setTimeout(function(){p()},o.scrollingSpeed,o.easing)}else se(e,Math.round(n.offsetLeft),o.scrollingSpeed,function(){p()});o.slidesNavigation&&(te(Q(S,l),m),oe(Q("a",Z("li",l)[t]),m))}n.addEventListener?e.addEventListener("hashchange",Ue,!1):e.attachEvent("onhashchange",Ue),n.onkeydown=function(t){clearTimeout(Re);var i=n.activeElement.tagName;if("SELECT"!==i&&"INPUT"!==i&&o.keyboardScrolling&&o.autoScrolling){for(var a=(t=e.event||t||t.originalEvent).charCode||t.keyCode,r=[40,38,32,33,34],l=0;l<r.length;l++)r[l]==a&&re(t);var c=t.shiftKey;Re=setTimeout(function(){!function(e,n){switch(a){case 38:case 33:me();break;case 32:if(e){me();break}case 40:case 34:Se();break;case 36:ye(1);break;case 35:ye(Z(b).length);break;case 37:Te();break;case 39:be()}}(c)},150)}},null!==Q(P)&&ce(Q(P),"click onclick touchstart",function(e){re(e);var n=ie(this,function(e){return ne(e1,y)}),t=Q(k,n),o=_(ie(this,function(e){return"li"===e.tagName}));$e(t,Z(x,t)[o])});var qe,Ke=F;function Ve(){if(j){if("text"!==n.activeElement.getAttribute("type")){var e=ae();Math.abs(e-Ke)>20*Math.max(Ke,e)/100&&(Le(!0),Ke=e)}}else clearTimeout(qe),qe=setTimeout(function(){Le(!0)},350)}function Ge(e){var n="all "+o.scrollingSpeed+"ms "+o.easingcss3;return te(e,h),G(e,{"-webkit-transition":n,transition:n}),e}function Je(e,n){var t,i;!function(e){if(o.menu){var n=Q(o.menu);n&&(te(Q(S,n),m),oe(Q('[data-menuanchor="'+e+'"]',n),m))}}(e),t=e,i=n,o.navigation&&(te(Q(S,r),m),oe(t?Q('a[href="#'+t+'"]',r):Q("a",Z("li",r)[i]),m))}function Qe(e){var n=_(Q(T)),t=_(e);return n==t?"none":n>t?"up":"down"}function Ze(e,n){n?Ge(s):oe(s,h),vn(s,e),setTimeout(function(){te(s,h)},10)}function _e(e){var n=Q(b+'[data-anchor="'+e+'"]');return n||(n=Z(b)[e-1]),n}function en(e,n){var t=_e(decodeURI(e));void 0===n&&(n=0),e===i||ne(t,m)?nn(t,n):Ye(t,function(){nn(t,n)})}function nn(e,n){if(void 0!==n){var t=Q(k,e),o=(i=n,a=Q(k,e),r=Q(x+'[data-anchor="'+i+'"]',a),a&&!r&&(r=Z(x,a)[i]),r);o&&$e(t,o)}var i,a,r}function tn(e,t){var i=n.createElement("div");i.className=B;var a=n.createElement("ul");i.appendChild(a),e.appendChild(i);var r=Q(C,e),l=Q("ul",r);oe(r,o.slidesNavPosition);for(var c="",s=0;s<t;s++)c+='<li><a href="#"><span></span></a></li>';l.innerHTML=l.innerHTML+c,J(r,"margin-left","-"+r.offsetWidth/2+"px"),oe(Q("a",Z("li",r)[0]),m)}function on(e,n,t,i){var r="";o.anchors.length&&(e?(void 0!==t&&(r=t),void 0===n&&(n=e),a=n,an(r+"/"+n)):void 0!==e?(a=n,an(t)):an(t)),ln()}function an(n){if(o.recordHistory)location.hash=n;else if(j||W)history.replaceState(t,t,"#"+n);else{var i=e.location.href.split("#")[0];e.location.replace(i+"#"+n)}}function rn(e){var n=e.getAttribute("data-anchor"),t=_(e);return n||(n=t),n}function ln(e){var t=Q(T),i=Q(E,t),a=t.getAttribute("data-anchor"),r=_(t);e=String(r),o.anchors.length&&(e=a),i&&(e=e+"-"+rn(i)),e=e.replace("/","-").replace("#","");var l=new RegExp("\\b\\s?"+g+"-[^\\s]+\\b","g");n.body.className=n.body.className.replace(l,""),oe(n.body,g+"-"+e)}function cn(e,n,t,o,i){e.addEventListener?(e.addEventListener(t,n,!1),void 0!==i&&e.addEventListener(i,n,!1)):e.attachEvent(o,n)}function sn(e){var n=[];return n.y=void 0!==e.pageY&&(e.pageY||e.pageX)?e.pageY:e.touches[0].pageY,n.x=void 0!==e.pageX&&(e.pageY||e.pageX)?e.pageX:e.touches[0].pageX,W&&Pe(e)&&(n.y=e.touches[0].pageY,n.x=e.touches[0].pageX),n}function fn(e,n){ge(0,"internal"),void 0!==n&&(U=!0),$e(ie(e,function(e){return ne(e,M)}),e),void 0!==n&&(U=!1),ge(c.scrollingSpeed,"internal")}function un(e){if(o.scrollBar){var n=Xe(e);de(n.element,n.options)}else o.css3?Ze("translate3d(0px, -"+e+"px, 0px)",!1):J(s,"top",-e+"px")}function vn(e,n){G(e,{"-webkit-transform":n,"-moz-transform":n,"-ms-transform":n,transform:n})}function dn(e,n,t){o[e]=n,"internal"!==t&&(c[e]=n)}function hn(e,n){console&&console[e]&&console[e]("fullPage: "+n)}return{initialize:function(i,a){o=function(e,n){for(var t in"object"!=typeof n&&(n={}),n)e.hasOwnProperty(t)&&(e[t]=n[t]);return e}({menu:!1,anchors:[],navigation:!1,navigationPosition:"right",navigationColor:"#000",navigationTooltips:[],showActiveTooltip:!1,slidesNavigation:!1,slidesNavPosition:"bottom",scrollBar:!1,css3:!0,scrollingSpeed:700,autoScrolling:!0,fitToSection:!0,fitToSectionDelay:1e3,easingcss3:"ease",loopHorizontal:!0,touchSensitivity:5,keyboardScrolling:!0,recordHistory:!0,controlArrows:!0,sectionSelector:".section",slideSelector:".slide",afterLoad:null,onLeave:null,afterRender:null,afterResize:null,afterReBuild:null,afterSlideLoad:null,onSlideLeave:null},a),c=function(e){if(null===e||"object"!=typeof e)return e;var n=e.constructor();for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}(o),s=Q(i),function(i){te(s,p),function(){for(var e=0;e<o.anchors.length;e++){var t=o.anchors[e];((i="#"+t,n.getElementById(i))||Z('[name="'+t+'"]').length)&&hn("error","data-anchor tags can not have the same value as any `id` element on the site (or `name` element for IE).")}var i}(),o.css3&&(o.css3=function(){var o,i=n.createElement("p"),a={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(var r in n.body.insertBefore(i,null),a)i.style[r]!==t&&(i.style[r]="translate3d(1px,1px,1px)",o=e.getComputedStyle(i).getPropertyValue(a[r]));return n.body.removeChild(i),o!==t&&o.length>0&&"none"!==o}()),null!==s?(G(s,{height:"100%",position:"relative"}),oe(s,v),oe(Q("html"),"fp-enabled")):hn("error","Error! Fullpage.js needs to be initialized with a selector. For example: fullpage('#fullpage');"),cn(Q(d),De,"mousewheel","onmousewheel","wheel"),function(){if(j||W){var t=Q(d);if(n.addEventListener){var o=e.PointerEvent?{down:"pointerdown",move:"pointermove"}:{down:"MSPointerDown",move:"MSPointerMove"};t.removeEventListener("touchstart",He),t.removeEventListener(o.down,He),t.removeEventListener("touchmove",Ce),t.removeEventListener(o.move,Ce),ce(t,"touchstart "+o.down,He),ce(t,"touchmove "+o.move,Ce)}}}(),cn(e,Ve,"resize","onresize"),cn(e,Ee,"scroll","onscroll","onscroll");var a=Z(o.sectionSelector);for(f=0;f<a.length;++f)oe(a[f],y);var l=Z(o.slideSelector);for(f=0;f<l.length;++f)oe(l[f],w);o.navigation&&function(){var i=n.createElement("div");i.setAttribute("id",L);var a=n.createElement("ul");i.appendChild(a),n.body.appendChild(i),J(r=Q("#fp-nav"),"color",o.navigationColor),oe(r,o.navigationPosition),o.showActiveTooltip&&oe(r,"fp-show-active");for(var l="",c=0;c<Z(b).length;c++){var s="";o.anchors.length&&(s=o.anchors[c]),l=l+'<li><a href="#'+s+'"><span></span></a>';var f=o.navigationTooltips[c];typeof f!==t&&""!==f&&(l+='<div class="fp-tooltip '+o.navigationPosition+'">'+f+"</div>"),l+="</li>"}var u=Q("ul",r);u.innerHTML=u.innerHTML+l;for(var v=Z(P),d=0;d<v.length;d++)ce(v[d],"click onclick touchstart",function(n){re(n=e.event||n||n.originalEvent);var t=_(this.parentNode);Ye(Z(b)[t],null,!1)})}();for(var c=Z(b),f=0;f<c.length;f++){var u=f,h=c[f],g=Z(x,h),S=g.length;if(u||null!==Q(T)||oe(h,m),void 0!==o.anchors[u]&&(h.setAttribute("data-anchor",o.anchors[u]),ne(h,m)&&Je(o.anchors[u],u)),S>0){var k=100*S,B=100/S,C=h.innerHTML,H='<div class="'+M+'"><div class="'+N+'">'+C+"</div></div>";h.innerHTML=H,g=Z(x,h),J(Q(A,h),"width",k+"%"),o.controlArrows&&S>1&&we(h),o.slidesNavigation&&tn(h,S);for(var z=0;z<g.length;z++){J(g[z],"width",B+"%")}var R=Q(E,h);null!==typeof R?oe(g[0],m):fn(R)}}i()}(K)},moveSectionUp:me,moveSectionDown:Se,moveTo:ye,silentMoveTo:function(e,n){ge(0,"internal"),ye(e,n),ge(c.scrollingSpeed,"internal")},moveSlideRight:be,moveSlideLeft:Te,setAutoScrolling:he,setFitToSection:function(e,n){dn("fitToSection",e,n)},setKeyboardScrolling:function(e){o.keyboardScrolling=e},setRecordHistory:pe,setScrollingSpeed:ge}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImphdmFzY3JpcHQuZnVsbFBhZ2UuanMiXSwibmFtZXMiOlsicm9vdCIsIndpbmRvdyIsImRvY3VtZW50IiwiZmFjdG9yeSIsInVuZGVmaW5lZCIsImRlZmluZSIsImFtZCIsImZ1bGxwYWdlIiwiZXhwb3J0cyIsIm1vZHVsZSIsInRoaXMiLCJvcHRpb25zIiwibGFzdFNjcm9sbGVkRGVzdGlueSIsImxhc3RTY3JvbGxlZFNsaWRlIiwibmF2IiwiYWN0aXZlQW5pbWF0aW9uIiwib3JpZ2luYWxzIiwiY29udGFpbmVyIiwic2Nyb2xsSWQiLCJzY3JvbGxJZDIiLCJXUkFQUEVSIiwiV1JBUFBFUl9TRUwiLCJOT19UUkFOU0lUSU9OIiwiREVTVFJPWUVEIiwiVklFV0lOR19QUkVGSVgiLCJBQ1RJVkUiLCJBQ1RJVkVfU0VMIiwiU0VDVElPTiIsIlNFQ1RJT05fU0VMIiwiU0VDVElPTl9BQ1RJVkVfU0VMIiwiU0VDVElPTl9OQVYiLCJTTElERSIsIlNMSURFX1NFTCIsIlNMSURFX0FDVElWRV9TRUwiLCJTTElERVNfV1JBUFBFUiIsIlNMSURFU19XUkFQUEVSX1NFTCIsIlNMSURFU19DT05UQUlORVIiLCJTTElERVNfQ09OVEFJTkVSX1NFTCIsIlNMSURFU19OQVYiLCJTTElERVNfTkFWX1NFTCIsIlNMSURFU19OQVZfTElOS19TRUwiLCJTTElERVNfQVJST1ciLCJTTElERVNfQVJST1dfU0VMIiwiU0xJREVTX1BSRVYiLCJTTElERVNfQVJST1dfUFJFViIsIlNMSURFU19BUlJPV19QUkVWX1NFTCIsIlNMSURFU19BUlJPV19ORVhUIiwiU0xJREVTX0FSUk9XX05FWFRfU0VMIiwic2xpZGVNb3ZpbmciLCJpc1RvdWNoRGV2aWNlIiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwibWF0Y2giLCJpc1RvdWNoIiwibXNNYXhUb3VjaFBvaW50cyIsIm1heFRvdWNoUG9pbnRzIiwid2luZG93c0hlaWdodCIsImdldFdpbmRvd0hlaWdodCIsImlzUmVzaXppbmciLCJjYW5TY3JvbGwiLCJzY3JvbGxpbmdzIiwiYWZ0ZXJEb21SZWFkeSIsInNsaWRlc0Fycm93cyIsIiQkIiwiaSIsImxlbmd0aCIsImFkZExpc3RlbmVyTXVsdGkiLCJhcnJvd3NIYW5kbGVyIiwic2V0QXV0b1Njcm9sbGluZyIsImF1dG9TY3JvbGxpbmciLCJzZWN0aW9uIiwiYWN0aXZlU2VjdGlvbiIsIiQiLCJhY3RpdmVTbGlkZSIsImFjdGl2ZVNlY3Rpb25JbmRleCIsImdldE5vZGVJbmRleCIsInNpbGVudExhbmRzY2FwZVNjcm9sbCIsIm5hdmlnYXRpb24iLCJzZXRDc3MiLCJvZmZzZXRIZWlnaHQiLCJhZGRDbGFzcyIsImlzRnVuY3Rpb24iLCJhZnRlckxvYWQiLCJjYWxsIiwiZ2V0QXR0cmlidXRlIiwiYWZ0ZXJSZW5kZXIiLCJkZXN0aW55IiwibG9jYXRpb24iLCJoYXNoIiwicmVwbGFjZSIsInNwbGl0IiwiYW5pbWF0ZUFuY2hvciIsInNpbGVudFNjcm9sbCIsIm9mZnNldFRvcCIsInNldEJvZHlDbGFzcyIsInNjcm9sbFNldHRpbmdzIiwiZ2V0U2Nyb2xsU2V0dGluZ3MiLCJzY3JvbGxUbyIsImVsZW1lbnQiLCJhY3RpdmF0ZU1lbnVBbmROYXYiLCJyZW1vdmVDbGFzcyIsImFkZEhhbmRsZXIiLCJzY3JvbGxUb0FuY2hvciIsImdldEJ5VGFnIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJjc3MiLCJlbCIsInByb3BzIiwia2V5IiwiaGFzT3duUHJvcGVydHkiLCJzdHlsZSIsInZhbHVlIiwic2VsZWN0b3IiLCJjb250ZXh0IiwicXVlcnlTZWxlY3RvciIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJub2RlIiwiaW5kZXgiLCJwcmV2aW91c1NpYmxpbmciLCJub2RlVHlwZSIsInRlc3QiLCJkYXRhIiwidG9nZ2xlIiwiZGlzcGxheSIsImhhc0NsYXNzIiwiZWxlIiwiY2xzIiwiY2xhc3NOYW1lIiwiUmVnRXhwIiwicmVnIiwiY2xvc2VzdCIsImZuIiwicGFyZW50Tm9kZSIsImlubmVySGVpZ2h0IiwiZG9jdW1lbnRFbGVtZW50IiwicHJldmVudERlZmF1bHQiLCJldmVudCIsInJldHVyblZhbHVlIiwiZnVuY3Rpb25Ub0NoZWNrIiwidG9TdHJpbmciLCJzIiwiZXZ0cyIsImlMZW4iLCJhZGRFdmVudExpc3RlbmVyIiwiYXR0YWNoRXZlbnQiLCJ0byIsImR1cmF0aW9uIiwiY2FsbGJhY2siLCJzdGFydCIsInNlbGYiLCJzY3JvbGxMZWZ0Iiwic2Nyb2xsQmFyIiwiZ2V0U2Nyb2xsVG9wIiwiY2hhbmdlIiwiY3VycmVudFRpbWUiLCJhbmltYXRlU2Nyb2xsIiwidmFsIiwiTWF0aCIsImVhc2VJbk91dEN1YmljIiwic2V0U2Nyb2xsaW5nIiwic2V0VGltZW91dCIsImRvYyIsInBhZ2VZT2Zmc2V0Iiwic2Nyb2xsVG9wIiwiY2xpZW50VG9wIiwibmV4dCIsIm5leHRTaWJsaW5nIiwicHJldiIsInByZXZTaWJsaW5nIiwidG9wIiwidHlwZSIsInNldFZhcmlhYmxlU3RhdGUiLCJib2R5Iiwib3ZlcmZsb3ciLCJoZWlnaHQiLCJzZXRSZWNvcmRIaXN0b3J5IiwicmVjb3JkSGlzdG9yeSIsIi1tcy10b3VjaC1hY3Rpb24iLCJ0b3VjaC1hY3Rpb24iLCJzZXRTY3JvbGxpbmdTcGVlZCIsIm1vdmVTZWN0aW9uVXAiLCJzY3JvbGxQYWdlIiwibW92ZVNlY3Rpb25Eb3duIiwibW92ZVRvIiwic2VjdGlvbkFuY2hvciIsInNsaWRlQW5jaG9yIiwiZ2V0U2VjdGlvbkJ5QW5jaG9yIiwic2Nyb2xsUGFnZUFuZFNsaWRlIiwibW92ZVNsaWRlUmlnaHQiLCJtb3ZlU2xpZGUiLCJtb3ZlU2xpZGVMZWZ0IiwicmVCdWlsZCIsInJlc2l6aW5nIiwic2VjdGlvbnMiLCJzbGlkZXNXcmFwIiwic2xpZGVzIiwibGFuZHNjYXBlU2Nyb2xsIiwiYWZ0ZXJSZXNpemUiLCJhZnRlclJlQnVpbGQiLCJjcmVhdGVTbGlkZUFycm93cyIsImNyZWF0ZUVsZW1lbnQiLCJjb250cm9sQXJyb3dDb2xvciIsImFwcGVuZENoaWxkIiwibG9vcEhvcml6b250YWwiLCJ0IiwiYiIsImMiLCJkIiwiaXNTY3JvbGxpbmciLCJzY3JvbGxIYW5kbGVyIiwiY3VycmVudFNlY3Rpb24iLCJjdXJyZW50U2Nyb2xsIiwidmlzaWJsZVNlY3Rpb25JbmRleCIsImluaXRpYWwiLCJhYnMiLCJjdXJyZW50IiwibGVhdmluZ1NlY3Rpb24iLCJsZWF2aW5nU2VjdGlvbkluZGV4IiwieU1vdmVtZW50IiwiZ2V0WW1vdmVtZW50IiwiYW5jaG9yTGluayIsInNlY3Rpb25JbmRleCIsInNsaWRlQW5jaG9yTGluayIsInNsaWRlSW5kZXgiLCJvbkxlYXZlIiwiYW5jaG9ycyIsInNldFN0YXRlIiwiY2xlYXJUaW1lb3V0IiwiZml0VG9TZWN0aW9uIiwiZml0VG9TZWN0aW9uRGVsYXkiLCJzY3JvbGxpbmciLCJ0b3VjaFN0YXJ0WSIsInRvdWNoU3RhcnRYIiwidG91Y2hFbmRZIiwidG91Y2hFbmRYIiwidG91Y2hNb3ZlSGFuZGxlciIsImUiLCJvcmlnaW5hbEV2ZW50IiwiaXNSZWFsbHlUb3VjaCIsInRvdWNoRXZlbnRzIiwiZ2V0RXZlbnRzUGFnZSIsInkiLCJ4IiwiaW5uZXJXaWR0aCIsIm9mZnNldFdpZHRoIiwidG91Y2hTZW5zaXRpdml0eSIsInBvaW50ZXJUeXBlIiwidG91Y2hTdGFydEhhbmRsZXIiLCJnZXRBdmVyYWdlIiwiZWxlbWVudHMiLCJudW1iZXIiLCJzdW0iLCJsYXN0RWxlbWVudHMiLCJzbGljZSIsIm1heCIsImNlaWwiLCJrZXlkb3duSWQiLCJwcmV2VGltZSIsIkRhdGUiLCJnZXRUaW1lIiwiTW91c2VXaGVlbEhhbmRsZXIiLCJjdXJUaW1lIiwid2hlZWxEZWx0YSIsImRlbHRhWSIsImRldGFpbCIsImRlbHRhIiwibWluIiwic2hpZnQiLCJwdXNoIiwidGltZURpZmYiLCJkaXJlY3Rpb24iLCJuIiwiY3VycmVudFNsaWRlIiwic2libGluZ3MiLCJza2lwTWUiLCJyIiwiZmlyc3RDaGlsZCIsImlzTW92ZW1lbnRVcCIsInYiLCJkdG9wIiwibG9jYWxJc1Jlc2l6aW5nIiwiY3NzMyIsInRyYW5zZm9ybUNvbnRhaW5lciIsInRyYW5zbGF0ZTNkIiwic2Nyb2xsaW5nU3BlZWQiLCJhZnRlclNlY3Rpb25Mb2FkcyIsInNjcm9sbCIsInNsaWRlIiwidGFyZ2V0Iiwic3JjRWxlbWVudCIsImhhc2hDaGFuZ2VIYW5kbGVyIiwiZTEiLCJzbGlkZXNOYXYiLCJnZXRTbGlkZUFuY2hvciIsIm9uU2xpZGVMZWF2ZSIsInByZXZTbGlkZSIsInByZXZTbGlkZUluZGV4IiwieE1vdmVtZW50IiwiY29udHJvbEFycm93cyIsImlzIiwiYWZ0ZXJTbGlkZUxvYWRzIiwiYWZ0ZXJTbGlkZUxvYWQiLCJyb3VuZCIsIm9mZnNldExlZnQiLCJzbGlkZXNDb250YWluZXIiLCJhZGRBbmltYXRpb24iLCJzZXRUcmFuc2Zvcm1zIiwiZWFzaW5nIiwic2xpZGVzTmF2aWdhdGlvbiIsIm9ua2V5ZG93biIsInRhZ05hbWUiLCJhY3RpdmVFbGVtZW50Iiwia2V5Ym9hcmRTY3JvbGxpbmciLCJjaGFyQ29kZSIsImtleUNvZGUiLCJrZXlDb250cm9scyIsInNoaWZ0UHJlc3NlZCIsInNoaWZ0S2V5IiwibGlJbmRleCIsInJlc2l6ZUlkIiwicHJldmlvdXNIZWlnaHQiLCJyZXNpemVIYW5kbGVyIiwiY3VycmVudEhlaWdodCIsInRyYW5zaXRpb24iLCJlYXNpbmdjc3MzIiwiLXdlYmtpdC10cmFuc2l0aW9uIiwiYW5jaG9yIiwibmFtZSIsIm1lbnUiLCJmcm9tSW5kZXgiLCJ0b0luZGV4IiwiYW5pbWF0ZWQiLCJkZWNvZGVVUkkiLCJzY3JvbGxTbGlkZXIiLCJhZGRTbGlkZXNOYXZpZ2F0aW9uIiwibnVtU2xpZGVzIiwiZGl2IiwiZGl2VWwiLCJ1bCIsInNsaWRlc05hdlBvc2l0aW9uIiwibGlzdCIsImlubmVySFRNTCIsInNlY3Rpb25IYXNoIiwic2V0VXJsSGFzaCIsInVybCIsImhpc3RvcnkiLCJyZXBsYWNlU3RhdGUiLCJiYXNlVXJsIiwiaHJlZiIsInRleHQiLCJTdHJpbmciLCJjbGFzc1JlIiwibWV0aG9kIiwibm9ybWFsIiwib2xkSUUiLCJmaXJlZm94IiwiZXZlbnRzIiwicGFnZVkiLCJwYWdlWCIsInRvdWNoZXMiLCJub0NhbGxiYWNrcyIsIi13ZWJraXQtdHJhbnNmb3JtIiwiLW1vei10cmFuc2Zvcm0iLCItbXMtdHJhbnNmb3JtIiwidHJhbnNmb3JtIiwidmFyaWFibGUiLCJzaG93RXJyb3IiLCJjb25zb2xlIiwiaW5pdGlhbGl6ZSIsImN1c3RvbU9wdGlvbnMiLCJkZWZhdWx0T3B0aW9ucyIsIm5hdmlnYXRpb25Qb3NpdGlvbiIsIm5hdmlnYXRpb25Db2xvciIsIm5hdmlnYXRpb25Ub29sdGlwcyIsInNob3dBY3RpdmVUb29sdGlwIiwic2VjdGlvblNlbGVjdG9yIiwic2xpZGVTZWxlY3RvciIsIm9iaiIsImNvcHkiLCJjb25zdHJ1Y3RvciIsImF0dHIiLCJnZXRFbGVtZW50QnlJZCIsImhhczNkIiwidHJhbnNmb3JtcyIsIndlYmtpdFRyYW5zZm9ybSIsIk9UcmFuc2Zvcm0iLCJtc1RyYW5zZm9ybSIsIk1velRyYW5zZm9ybSIsImluc2VydEJlZm9yZSIsImdldENvbXB1dGVkU3R5bGUiLCJnZXRQcm9wZXJ0eVZhbHVlIiwicmVtb3ZlQ2hpbGQiLCJwb3NpdGlvbiIsIndyYXBwZXIiLCJNU1BvaW50ZXIiLCJQb2ludGVyRXZlbnQiLCJkb3duIiwibW92ZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJvcmlnaW5hbFNlY3Rpb25zIiwib3JpZ2luYWxTbGlkZXMiLCJzZXRBdHRyaWJ1dGUiLCJsaSIsImxpbmsiLCJ0b29sdGlwIiwibGlua3MiLCJsIiwic2xpZGVyV2lkdGgiLCJzbGlkZVdpZHRoIiwic2xpZGVzSFRNTCIsIm5ld0hUTUwiLCJhIiwic3RhcnRpbmdTbGlkZSIsInNpbGVudE1vdmVUbyIsInNldEZpdFRvU2VjdGlvbiIsInNldEtleWJvYXJkU2Nyb2xsaW5nIl0sIm1hcHBpbmdzIjoiQ0FPQyxTQUFVQSxFQUFNQyxFQUFRQyxFQUFVQyxFQUFTQyxHQUNsQixtQkFBWEMsUUFB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LEVBQTBCLElBQVp4RSxFQUNkeUUsRUFBYSxJQUFNekUsRUFFbkIwRSxFQUFhblYsRUFBUStRLFVBQ3JCcUUsRUFBVSxlQUFnQnhYLEVBQWdCLGlCQUFpQkUsRUFBaUIsS0FBT3FYLEVBQWEsZUFDcEduVixFQUFRK1EsVUFBWXFFLEVBR3BCdk4sRUFBU3BJLEVBQUcvQixFQUFXc0MsR0FFdkJRLEVBQU9OLEVBQUVuQyxFQUFzQmlDLEdBQVUsUUFBVWlWLEVBQWMsS0FFOUQ1WSxFQUFRK1IsZUFBaUJxQyxFQUFZLEdBQ3BDeEksR0FBa0JqSSxHQUduQjNELEVBQVF5UyxrQkFDUDBCLEdBQW9CeFEsRUFBU3lRLEdBSWpDLElBQUksSUFBSTRFLEVBQUksRUFBR0EsRUFBRXhOLEVBQU9sSSxPQUFRMFYsSUFBSSxDQUVoQzdVLEVBRG1CcUgsRUFBT3dOLEdBQ0wsUUFBU0gsRUFBYSxLQUcvQyxJQUFJSSxFQUFnQnBWLEVBQUV2QyxFQUFrQnFDLEdBR1osY0FBbEJzVixFQUNONVUsR0FBU21ILEVBQU8sR0FBSTFLLEdBTXBCbUQsR0FBc0JnVixJQU1sQ3pRLElBL0dKLENBSFN0RixJQTQ5REx1SCxjQUFlQSxHQUNmRSxnQkFBaUJBLEdBQ2pCQyxPQUFRQSxHQUNSc08sYUFwNkNKLFNBQXNCck8sRUFBZUMsR0FDakNOLEdBQW1CLEVBQUcsWUFDdEJJLEdBQU9DLEVBQWVDLEdBQ3RCTixHQUFtQm5LLEVBQVU0USxlQUFnQixhQWs2QzdDaEcsZUFBZ0JBLEdBQ2hCRSxjQUFlQSxHQUNmMUgsaUJBQWtCQSxHQUNsQjBWLGdCQXg5Q0osU0FBeUIvUyxFQUFPMkQsR0FDNUJDLEdBQWlCLGVBQWdCNUQsRUFBTzJELElBdzlDeENxUCxxQkF2OENKLFNBQThCaFQsR0FDMUJwRyxFQUFRNlMsa0JBQW9Cek0sR0F1OEM1QmdFLGlCQUFrQkEsR0FDbEJJLGtCQUFtQkEiLCJmaWxlIjoiamF2YXNjcmlwdC5mdWxsUGFnZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBmdWxsUGFnZSBQdXJlIEphdmFzY3JpcHQgdi4wLjAuOSAoQWxwaGEpIC0gTm90IHN1cHBvcnQgZ2l2ZW4gdW50aWwgQmV0YSB2ZXJzaW9uLlxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vYWx2YXJvdHJpZ28vZnVsbFBhZ2UuanNcclxuICogTUlUIGxpY2Vuc2VkXHJcbiAqXHJcbiAqIENvcHlyaWdodCAoQykgMjAxMyBhbHZhcm90cmlnby5jb20gLSBBIHByb2plY3QgYnkgQWx2YXJvIFRyaWdvXHJcbiAqL1xyXG4oZnVuY3Rpb24oIHJvb3QsIHdpbmRvdywgZG9jdW1lbnQsIGZhY3RvcnksIHVuZGVmaW5lZCApIHtcclxuICAgIGlmKCB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgKSB7XHJcbiAgICAgICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLlxyXG4gICAgICAgIGRlZmluZSggZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHJvb3QuZnVsbHBhZ2UgPSBmYWN0b3J5KHdpbmRvdywgZG9jdW1lbnQpO1xyXG4gICAgICAgICAgICByZXR1cm4gcm9vdC5mdWxscGFnZTtcclxuICAgICAgICB9ICk7XHJcbiAgICB9IGVsc2UgaWYoIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyApIHtcclxuICAgICAgICAvLyBOb2RlLiBEb2VzIG5vdCB3b3JrIHdpdGggc3RyaWN0IENvbW1vbkpTLlxyXG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSh3aW5kb3csIGRvY3VtZW50KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gQnJvd3NlciBnbG9iYWxzLlxyXG4gICAgICAgIHdpbmRvdy5mdWxscGFnZSA9IGZhY3Rvcnkod2luZG93LCBkb2N1bWVudCk7XHJcbiAgICB9XHJcbn0odGhpcywgd2luZG93LCBkb2N1bWVudCwgZnVuY3Rpb24od2luZG93LCBkb2N1bWVudCwgdW5kZWZpbmVkKXtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICB2YXIgZnVsbHBhZ2U7XHJcblxyXG4gICAgLy9DT05TVEFOVFNcclxuXHJcbiAgICAvLyBrZWVwaW5nIGNlbnRyYWwgc2V0IG9mIGNsYXNzbmFtZXMgYW5kIHNlbGVjdG9yc1xyXG4gICAgdmFyIFdSQVBQRVIgPSAgICAgICAgICAgICAgICdmdWxscGFnZS13cmFwcGVyJztcclxuICAgIHZhciBXUkFQUEVSX1NFTCA9ICAgICAgICAgICAnLicgKyBXUkFQUEVSO1xyXG5cclxuICAgIC8vIHV0aWxcclxuICAgIHZhciBSRVNQT05TSVZFID0gICAgICAgICAgICAnZnAtcmVzcG9uc2l2ZSc7XHJcbiAgICB2YXIgTk9fVFJBTlNJVElPTiA9ICAgICAgICAgJ2ZwLW5vdHJhbnNpdGlvbic7XHJcbiAgICB2YXIgREVTVFJPWUVEID0gICAgICAgICAgICAgJ2ZwLWRlc3Ryb3llZCc7XHJcbiAgICB2YXIgRU5BQkxFRCA9ICAgICAgICAgICAgICAgJ2ZwLWVuYWJsZWQnO1xyXG4gICAgdmFyIFZJRVdJTkdfUFJFRklYID0gICAgICAgICdmcC12aWV3aW5nJztcclxuICAgIHZhciBBQ1RJVkUgPSAgICAgICAgICAgICAgICAnYWN0aXZlJztcclxuICAgIHZhciBBQ1RJVkVfU0VMID0gICAgICAgICAgICAnLicgKyBBQ1RJVkU7XHJcblxyXG4gICAgLy8gc2VjdGlvblxyXG4gICAgdmFyIFNFQ1RJT05fREVGQVVMVF9TRUwgPSAgICcuc2VjdGlvbic7XHJcbiAgICB2YXIgU0VDVElPTiA9ICAgICAgICAgICAgICAgJ2ZwLXNlY3Rpb24nO1xyXG4gICAgdmFyIFNFQ1RJT05fU0VMID0gICAgICAgICAgICcuJyArIFNFQ1RJT047XHJcbiAgICB2YXIgU0VDVElPTl9BQ1RJVkVfU0VMID0gICAgU0VDVElPTl9TRUwgKyBBQ1RJVkVfU0VMO1xyXG5cclxuICAgIC8vIHNlY3Rpb24gbmF2XHJcbiAgICB2YXIgU0VDVElPTl9OQVYgPSAgICAgICAgICAgJ2ZwLW5hdic7XHJcbiAgICB2YXIgU0VDVElPTl9OQVZfU0VMID0gICAgICAgJyMnICsgU0VDVElPTl9OQVY7XHJcbiAgICB2YXIgU0VDVElPTl9OQVZfVE9PTFRJUCA9ICAgJ2ZwLXRvb2x0aXAnO1xyXG4gICAgdmFyIFNIT1dfQUNUSVZFX1RPT0xUSVAgPSAgICdmcC1zaG93LWFjdGl2ZSc7XHJcblxyXG4gICAgLy8gc2xpZGVcclxuICAgIHZhciBTTElERV9ERUZBVUxUX1NFTCA9ICAgICAnLnNsaWRlJztcclxuICAgIHZhciBTTElERSA9ICAgICAgICAgICAgICAgICAnZnAtc2xpZGUnO1xyXG4gICAgdmFyIFNMSURFX1NFTCA9ICAgICAgICAgICAgICcuJyArIFNMSURFO1xyXG4gICAgdmFyIFNMSURFX0FDVElWRV9TRUwgPSAgICAgIFNMSURFX1NFTCArIEFDVElWRV9TRUw7XHJcbiAgICB2YXIgU0xJREVTX1dSQVBQRVIgPSAgICAgICAgJ2ZwLXNsaWRlcyc7XHJcbiAgICB2YXIgU0xJREVTX1dSQVBQRVJfU0VMID0gICAgJy4nICsgU0xJREVTX1dSQVBQRVI7XHJcbiAgICB2YXIgU0xJREVTX0NPTlRBSU5FUiA9ICAgICAgJ2ZwLXNsaWRlc0NvbnRhaW5lcic7XHJcbiAgICB2YXIgU0xJREVTX0NPTlRBSU5FUl9TRUwgPSAgJy4nICsgU0xJREVTX0NPTlRBSU5FUjtcclxuICAgIHZhciBUQUJMRSA9ICAgICAgICAgICAgICAgICAnZnAtdGFibGUnO1xyXG5cclxuICAgIC8vIHNsaWRlIG5hdlxyXG4gICAgdmFyIFNMSURFU19OQVYgPSAgICAgICAgICAgICdmcC1zbGlkZXNOYXYnO1xyXG4gICAgdmFyIFNMSURFU19OQVZfU0VMID0gICAgICAgICcuJyArIFNMSURFU19OQVY7XHJcbiAgICB2YXIgU0xJREVTX05BVl9MSU5LX1NFTCA9ICAgU0xJREVTX05BVl9TRUwgKyAnIGEnO1xyXG4gICAgdmFyIFNMSURFU19BUlJPVyA9ICAgICAgICAgICdmcC1jb250cm9sQXJyb3cnO1xyXG4gICAgdmFyIFNMSURFU19BUlJPV19TRUwgPSAgICAgICcuJyArIFNMSURFU19BUlJPVztcclxuICAgIHZhciBTTElERVNfUFJFViA9ICAgICAgICAgICAnZnAtcHJldic7XHJcbiAgICB2YXIgU0xJREVTX1BSRVZfU0VMID0gICAgICAgJy4nICsgU0xJREVTX1BSRVY7XHJcbiAgICB2YXIgU0xJREVTX0FSUk9XX1BSRVYgPSAgICAgU0xJREVTX0FSUk9XICsgJyAnICsgU0xJREVTX1BSRVY7XHJcbiAgICB2YXIgU0xJREVTX0FSUk9XX1BSRVZfU0VMID0gU0xJREVTX0FSUk9XX1NFTCArIFNMSURFU19QUkVWX1NFTDtcclxuICAgIHZhciBTTElERVNfTkVYVCA9ICAgICAgICAgICAnZnAtbmV4dCc7XHJcbiAgICB2YXIgU0xJREVTX05FWFRfU0VMID0gICAgICAgJy4nICsgU0xJREVTX05FWFQ7XHJcbiAgICB2YXIgU0xJREVTX0FSUk9XX05FWFQgPSAgICAgU0xJREVTX0FSUk9XICsgJyAnICsgU0xJREVTX05FWFQ7XHJcbiAgICB2YXIgU0xJREVTX0FSUk9XX05FWFRfU0VMID0gU0xJREVTX0FSUk9XX1NFTCArIFNMSURFU19ORVhUX1NFTDtcclxuXHJcbiAgICAvL2dsb2JhbHNcclxuICAgIHZhciBvcHRpb25zO1xyXG4gICAgdmFyIHNsaWRlTW92aW5nID0gZmFsc2U7XHJcbiAgICB2YXIgaXNUb3VjaERldmljZSA9IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goLyhpUGhvbmV8aVBvZHxpUGFkfEFuZHJvaWR8cGxheWJvb2t8c2lsa3xCbGFja0JlcnJ5fEJCMTB8V2luZG93cyBQaG9uZXxUaXplbnxCYWRhfHdlYk9TfElFTW9iaWxlfE9wZXJhIE1pbmkpLyk7XHJcbiAgICB2YXIgaXNUb3VjaCA9ICgoJ29udG91Y2hzdGFydCcgaW4gd2luZG93KSB8fCAobmF2aWdhdG9yLm1zTWF4VG91Y2hQb2ludHMgPiAwKSB8fCAobmF2aWdhdG9yLm1heFRvdWNoUG9pbnRzKSk7XHJcbiAgICB2YXIgd2luZG93c0hlaWdodCA9IGdldFdpbmRvd0hlaWdodCgpO1xyXG4gICAgdmFyIGlzUmVzaXppbmcgPSBmYWxzZTtcclxuICAgIHZhciBsYXN0U2Nyb2xsZWREZXN0aW55O1xyXG4gICAgdmFyIGxhc3RTY3JvbGxlZFNsaWRlO1xyXG4gICAgdmFyIGNhblNjcm9sbCA9IHRydWU7XHJcbiAgICB2YXIgc2Nyb2xsaW5ncyA9IFtdO1xyXG4gICAgdmFyIG5hdjtcclxuICAgIHZhciBhY3RpdmVBbmltYXRpb247XHJcbiAgICB2YXIgb3JpZ2luYWxzO1xyXG4gICAgdmFyIGNvbnRhaW5lcjtcclxuXHJcbiAgICAvL2Vhc2VJbk91dEN1YmljIGFuaW1hdGlvbiBpbmNsdWRlZCBpbiB0aGUgcGx1Z2luXHJcbiAgICBNYXRoLmVhc2VJbk91dEN1YmljID0gZnVuY3Rpb24gKHQsIGIsIGMsIGQpIHtcclxuICAgICAgICBpZiAoKHQvPWQvMikgPCAxKSByZXR1cm4gYy8yKnQqdCp0ICsgYjtyZXR1cm4gYy8yKigodC09MikqdCp0ICsgMikgKyBiO1xyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBpbml0aWFsaXplKGVsZW1lbnQsIGN1c3RvbU9wdGlvbnMpe1xyXG5cclxuICAgICAgICAvLyBDcmVhdGUgc29tZSBkZWZhdWx0cywgZXh0ZW5kaW5nIHRoZW0gd2l0aCBhbnkgb3B0aW9ucyB0aGF0IHdlcmUgcHJvdmlkZWRcclxuICAgICAgICB2YXIgZGVmYXVsdHMgPSB7XHJcbiAgICAgICAgICAgIC8vbmF2aWdhdGlvblxyXG4gICAgICAgICAgICBtZW51OiBmYWxzZSxcclxuICAgICAgICAgICAgYW5jaG9yczpbXSxcclxuICAgICAgICAgICAgbmF2aWdhdGlvbjogZmFsc2UsXHJcbiAgICAgICAgICAgIG5hdmlnYXRpb25Qb3NpdGlvbjogJ3JpZ2h0JyxcclxuICAgICAgICAgICAgbmF2aWdhdGlvbkNvbG9yOiAnIzAwMCcsXHJcbiAgICAgICAgICAgIG5hdmlnYXRpb25Ub29sdGlwczogW10sXHJcbiAgICAgICAgICAgIHNob3dBY3RpdmVUb29sdGlwOiBmYWxzZSxcclxuICAgICAgICAgICAgc2xpZGVzTmF2aWdhdGlvbjogZmFsc2UsXHJcbiAgICAgICAgICAgIHNsaWRlc05hdlBvc2l0aW9uOiAnYm90dG9tJyxcclxuICAgICAgICAgICAgc2Nyb2xsQmFyOiBmYWxzZSxcclxuXHJcbiAgICAgICAgICAgIC8vc2Nyb2xsaW5nXHJcbiAgICAgICAgICAgIGNzczM6IHRydWUsXHJcbiAgICAgICAgICAgIHNjcm9sbGluZ1NwZWVkOiA3MDAsXHJcbiAgICAgICAgICAgIGF1dG9TY3JvbGxpbmc6IHRydWUsXHJcbiAgICAgICAgICAgIGZpdFRvU2VjdGlvbjogdHJ1ZSxcclxuICAgICAgICAgICAgZml0VG9TZWN0aW9uRGVsYXk6IDEwMDAsXHJcbiAgICAgICAgICAgIGVhc2luZ2NzczM6ICdlYXNlJyxcclxuICAgICAgICAgICAgbG9vcEhvcml6b250YWw6IHRydWUsXHJcbiAgICAgICAgICAgIHRvdWNoU2Vuc2l0aXZpdHk6IDUsXHJcblxyXG4gICAgICAgICAgICAvL0FjY2Vzc2liaWxpdHlcclxuICAgICAgICAgICAga2V5Ym9hcmRTY3JvbGxpbmc6IHRydWUsXHJcbiAgICAgICAgICAgIHJlY29yZEhpc3Rvcnk6IHRydWUsXHJcblxyXG4gICAgICAgICAgICAvL2Rlc2lnblxyXG4gICAgICAgICAgICBjb250cm9sQXJyb3dzOiB0cnVlLFxyXG5cclxuICAgICAgICAgICAgLy9DdXN0b20gc2VsZWN0b3JzXHJcbiAgICAgICAgICAgIHNlY3Rpb25TZWxlY3RvcjogU0VDVElPTl9ERUZBVUxUX1NFTCxcclxuICAgICAgICAgICAgc2xpZGVTZWxlY3RvcjogU0xJREVfREVGQVVMVF9TRUwsXHJcblxyXG5cclxuICAgICAgICAgICAgLy9ldmVudHNcclxuICAgICAgICAgICAgYWZ0ZXJMb2FkOiBudWxsLFxyXG4gICAgICAgICAgICBvbkxlYXZlOiBudWxsLFxyXG4gICAgICAgICAgICBhZnRlclJlbmRlcjogbnVsbCxcclxuICAgICAgICAgICAgYWZ0ZXJSZXNpemU6IG51bGwsXHJcbiAgICAgICAgICAgIGFmdGVyUmVCdWlsZDogbnVsbCxcclxuICAgICAgICAgICAgYWZ0ZXJTbGlkZUxvYWQ6IG51bGwsXHJcbiAgICAgICAgICAgIG9uU2xpZGVMZWF2ZTogbnVsbFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIG9wdGlvbnMgPSBleHRlbmQoZGVmYXVsdHMsIGN1c3RvbU9wdGlvbnMpO1xyXG5cclxuICAgICAgICBvcmlnaW5hbHMgPSBjbG9uZShvcHRpb25zKTsgLy9kZWVwIGNvcHlcclxuICAgICAgICBjb250YWluZXIgPSAkKGVsZW1lbnQpO1xyXG5cclxuICAgICAgICBpbml0KGFmdGVyRG9tUmVhZHkpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGluaXQoY2FsbGJhY2spe1xyXG4gICAgICAgIHJlbW92ZUNsYXNzKGNvbnRhaW5lciwgREVTVFJPWUVEKTsgLy9pbiBjYXNlIGl0IHdhcyBkZXN0cm95ZWQgYmVmb3JlIGluaXRpbGl6aW5nIGl0IGFnYWluXHJcbiAgICAgICAgZGlzcGxheVdhcm5pbmdzKCk7XHJcblxyXG4gICAgICAgIC8vaWYgY3NzMyBpcyBub3Qgc3VwcG9ydGVkLCBpdCB3aWxsIHVzZSBqUXVlcnkgYW5pbWF0aW9uc1xyXG4gICAgICAgIGlmKG9wdGlvbnMuY3NzMyl7XHJcbiAgICAgICAgICAgIG9wdGlvbnMuY3NzMyA9IHN1cHBvcnQzZCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoY29udGFpbmVyICE9PSBudWxsKXtcclxuICAgICAgICAgICAgY3NzKGNvbnRhaW5lciwge1xyXG4gICAgICAgICAgICAgICAgJ2hlaWdodCc6ICcxMDAlJyxcclxuICAgICAgICAgICAgICAgICdwb3NpdGlvbic6ICdyZWxhdGl2ZSdcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvL2FkZGluZyBhIGNsYXNzIHRvIHJlY29nbml6ZSB0aGUgY29udGFpbmVyIGludGVybmFsbHkgaW4gdGhlIGNvZGVcclxuICAgICAgICAgICAgYWRkQ2xhc3MoY29udGFpbmVyLCBXUkFQUEVSKTtcclxuICAgICAgICAgICAgYWRkQ2xhc3MoJCgnaHRtbCcpLCBFTkFCTEVEKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy90cnlpbmcgdG8gdXNlIGZ1bGxwYWdlIHdpdGhvdXQgYSBzZWxlY3Rvcj9cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICBzaG93RXJyb3IoJ2Vycm9yJywgJ0Vycm9yISBGdWxscGFnZS5qcyBuZWVkcyB0byBiZSBpbml0aWFsaXplZCB3aXRoIGEgc2VsZWN0b3IuIEZvciBleGFtcGxlOiBmdWxscGFnZShcXCcjZnVsbHBhZ2VcXCcpOycpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc2V0TW91c2VXaGVlbFNjcm9sbGluZyh0cnVlKTtcclxuICAgICAgICBhZGRUb3VjaEhhbmRsZXIoKTtcclxuICAgICAgICBhZGRSZXNpemVIYW5kbGVyKCk7XHJcbiAgICAgICAgYWRkU2Nyb2xsSGFuZGxlcigpO1xyXG5cclxuICAgICAgICAvL2FkZGluZyBpbnRlcm5hbCBjbGFzcyBuYW1lcyB0byB2b2lkIHByb2JsZW0gd2l0aCBjb21tb24gb25lc1xyXG4gICAgICAgIHZhciBvcmlnaW5hbFNlY3Rpb25zID0gJCQob3B0aW9ucy5zZWN0aW9uU2VsZWN0b3IpO1xyXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBvcmlnaW5hbFNlY3Rpb25zLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgIGFkZENsYXNzKG9yaWdpbmFsU2VjdGlvbnNbaV0sIFNFQ1RJT04pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIG9yaWdpbmFsU2xpZGVzID0gJCQob3B0aW9ucy5zbGlkZVNlbGVjdG9yKTtcclxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgb3JpZ2luYWxTbGlkZXMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgYWRkQ2xhc3Mob3JpZ2luYWxTbGlkZXNbaV0sIFNMSURFKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vY3JlYXRpbmcgdGhlIG5hdmlnYXRpb24gZG90c1xyXG4gICAgICAgIGlmIChvcHRpb25zLm5hdmlnYXRpb24pIHtcclxuICAgICAgICAgICAgYWRkVmVydGljYWxOYXZpZ2F0aW9uKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgc2VjdGlvbnMgPSAkJChTRUNUSU9OX1NFTCk7XHJcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaTxzZWN0aW9ucy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9IGk7XHJcbiAgICAgICAgICAgIHZhciBzZWN0aW9uID0gc2VjdGlvbnNbaV07XHJcbiAgICAgICAgICAgIHZhciB0aGF0ID0gc2VjdGlvbjtcclxuICAgICAgICAgICAgdmFyIHNsaWRlcyA9ICQkKFNMSURFX1NFTCwgc2VjdGlvbik7XHJcbiAgICAgICAgICAgIHZhciBudW1TbGlkZXMgPSBzbGlkZXMubGVuZ3RoO1xyXG5cclxuICAgICAgICAgICAgLy9pZiBubyBhY3RpdmUgc2VjdGlvbiBpcyBkZWZpbmVkLCB0aGUgMXN0IG9uZSB3aWxsIGJlIHRoZSBkZWZhdWx0IG9uZVxyXG4gICAgICAgICAgICBpZighaW5kZXggJiYgJChTRUNUSU9OX0FDVElWRV9TRUwpID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBhZGRDbGFzcyhzZWN0aW9uLCBBQ1RJVkUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMuYW5jaG9yc1tpbmRleF0gIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICBzZWN0aW9uLnNldEF0dHJpYnV0ZSgnZGF0YS1hbmNob3InLCBvcHRpb25zLmFuY2hvcnNbaW5kZXhdKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvL2FjdGl2YXRpbmcgdGhlIG1lbnUgLyBuYXYgZWxlbWVudCBvbiBsb2FkXHJcbiAgICAgICAgICAgICAgICBpZihoYXNDbGFzcyhzZWN0aW9uLCBBQ1RJVkUpKXtcclxuICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZU1lbnVBbmROYXYob3B0aW9ucy5hbmNob3JzW2luZGV4XSwgaW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBpZiB0aGVyZSdzIGFueSBzbGlkZVxyXG4gICAgICAgICAgICBpZiAobnVtU2xpZGVzID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNsaWRlcldpZHRoID0gbnVtU2xpZGVzICogMTAwO1xyXG4gICAgICAgICAgICAgICAgdmFyIHNsaWRlV2lkdGggPSAxMDAgLyBudW1TbGlkZXM7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHNsaWRlc0hUTUwgPSBzZWN0aW9uLmlubmVySFRNTDtcclxuICAgICAgICAgICAgICAgIHZhciBuZXdIVE1MID0gJzxkaXYgY2xhc3M9XCInKyBTTElERVNfV1JBUFBFUiArJ1wiPjxkaXYgY2xhc3M9XCInK1NMSURFU19DT05UQUlORVIrJ1wiPicgKyBzbGlkZXNIVE1MICsgJzwvZGl2PjwvZGl2Pic7XHJcbiAgICAgICAgICAgICAgICBzZWN0aW9uLmlubmVySFRNTCA9IG5ld0hUTUw7XHJcblxyXG4gICAgICAgICAgICAgICAgLy9nZXR0aW5nIGFnYWluIHRoZSBORVcgZG9tIGVsZW1lbnRzIGFmdGVyIGlubmVySFRNTFxyXG4gICAgICAgICAgICAgICAgc2xpZGVzID0gJCQoU0xJREVfU0VMLCBzZWN0aW9uKTtcclxuXHJcbiAgICAgICAgICAgICAgICBzZXRDc3MoJChTTElERVNfQ09OVEFJTkVSX1NFTCwgc2VjdGlvbiksICd3aWR0aCcsICBzbGlkZXJXaWR0aCArICclJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYob3B0aW9ucy5jb250cm9sQXJyb3dzICYmIG51bVNsaWRlcyA+IDEpe1xyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZVNsaWRlQXJyb3dzKHNlY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmKG9wdGlvbnMuc2xpZGVzTmF2aWdhdGlvbil7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkU2xpZGVzTmF2aWdhdGlvbihzZWN0aW9uLCBudW1TbGlkZXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICBmb3IodmFyIGEgPSAwOyBhPHNsaWRlcy5sZW5ndGg7IGErKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRTbGlkZSA9IHNsaWRlc1thXTtcclxuICAgICAgICAgICAgICAgICAgICBzZXRDc3MoY3VycmVudFNsaWRlLCAnd2lkdGgnLCBzbGlkZVdpZHRoICsgJyUnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgc3RhcnRpbmdTbGlkZSA9ICQoU0xJREVfQUNUSVZFX1NFTCwgc2VjdGlvbik7XHJcblxyXG4gICAgICAgICAgICAgICAgLy9pZiB0aGUgc2xpZGUgd29uI3QgYmUgYW4gc3RhcnRpbmcgcG9pbnQsIHRoZSBkZWZhdWx0IHdpbGwgYmUgdGhlIGZpcnN0IG9uZVxyXG4gICAgICAgICAgICAgICAgaWYodHlwZW9mIHN0YXJ0aW5nU2xpZGUgIT09IG51bGwpe1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZENsYXNzKHNsaWRlc1swXSwgQUNUSVZFKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy9pcyB0aGVyZSBhIHN0YXJ0aW5nIHBvaW50IGZvciBhIG5vbi1zdGFydGluZyBzZWN0aW9uP1xyXG4gICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICBzaWxlbnRMYW5kc2NhcGVTY3JvbGwoc3RhcnRpbmdTbGlkZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjYWxsYmFjaygpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGFmdGVyRG9tUmVhZHkoKXtcclxuICAgICAgICAvL2FkZGluZyBldmVudCBmb3IgaG9yaXpvbnRhbCBzbGlkZXMgYXJyb3dzIG5hdmlnYXRpb25cclxuICAgICAgICB2YXIgc2xpZGVzQXJyb3dzID0gJCQoU0xJREVTX0FSUk9XX1NFTCk7XHJcbiAgICAgICAgZm9yKHZhciBpPTA7IGk8c2xpZGVzQXJyb3dzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgYWRkTGlzdGVuZXJNdWx0aSggc2xpZGVzQXJyb3dzW2ldLCAnY2xpY2sgb25jbGljayB0b3VjaHN0YXJ0JywgYXJyb3dzSGFuZGxlcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzZXRBdXRvU2Nyb2xsaW5nKG9wdGlvbnMuYXV0b1Njcm9sbGluZywgJ2ludGVybmFsJyk7XHJcblxyXG4gICAgICAgIC8vdGhlIHN0YXJ0aW5nIHBvaW50IGlzIGEgc2xpZGU/XHJcbiAgICAgICAgdmFyIGFjdGl2ZVNlY3Rpb24gPSAkKFNFQ1RJT05fQUNUSVZFX1NFTCk7XHJcblxyXG4gICAgICAgIHZhciBhY3RpdmVTbGlkZSA9ICQoU0xJREVfQUNUSVZFX1NFTCwgYWN0aXZlU2VjdGlvbik7XHJcbiAgICAgICAgdmFyIGFjdGl2ZVNlY3Rpb25JbmRleCA9IGdldE5vZGVJbmRleCgkKFNFQ1RJT05fQUNUSVZFX1NFTCkpO1xyXG5cclxuICAgICAgICAvL3RoZSBhY3RpdmUgc2VjdGlvbiBpc24ndCB0aGUgZmlyc3Qgb25lPyBJcyBub3QgdGhlIGZpcnN0IHNsaWRlIG9mIHRoZSBmaXJzdCBzZWN0aW9uPyBUaGVuIHdlIGxvYWQgdGhhdCBzZWN0aW9uL3NsaWRlIGJ5IGRlZmF1bHQuXHJcbiAgICAgICAgaWYoIGFjdGl2ZVNsaWRlICYmICAoYWN0aXZlU2VjdGlvbkluZGV4ICE9PTAgfHwgKGFjdGl2ZVNlY3Rpb25JbmRleCA9PT0gMCAmJiAgZ2V0Tm9kZUluZGV4KGFjdGl2ZVNsaWRlKSAhPT0gMCkpKXtcclxuICAgICAgICAgICAgc2lsZW50TGFuZHNjYXBlU2Nyb2xsKGFjdGl2ZVNsaWRlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vdmVydGljYWwgY2VudGVyZWQgb2YgdGhlIG5hdmlnYXRpb24gKyBmaXJzdCBidWxsZXQgYWN0aXZlXHJcbiAgICAgICAgaWYob3B0aW9ucy5uYXZpZ2F0aW9uKXtcclxuICAgICAgICAgICAgc2V0Q3NzKG5hdiwgJ21hcmdpbi10b3AnLCAnLScgKyAobmF2Lm9mZnNldEhlaWdodC8yKSArICdweCcpO1xyXG4gICAgICAgICAgICB2YXIgYWN0aXZlTGkgPSAkJCgnbGknLCBuYXYpW2dldE5vZGVJbmRleCgkKFNFQ1RJT05fQUNUSVZFX1NFTCkpXTtcclxuICAgICAgICAgICAgYWRkQ2xhc3MoICQoJ2EnLCBhY3RpdmVMaSksIEFDVElWRSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBhZnRlclJlbmRlckFjdGlvbnMoKTtcclxuXHJcbiAgICAgICAgLy9nZXR0aW5nIHRoZSBhbmNob3IgbGluayBpbiB0aGUgVVJMIGFuZCBkZWxldGluZyB0aGUgYCNgXHJcbiAgICAgICAgdmFyIHZhbHVlID0gIHdpbmRvdy5sb2NhdGlvbi5oYXNoLnJlcGxhY2UoJyMnLCAnJykuc3BsaXQoJy8nKTtcclxuICAgICAgICB2YXIgZGVzdGlueSA9IHZhbHVlWzBdO1xyXG5cclxuICAgICAgICBpZihkZXN0aW55Lmxlbmd0aCl7XHJcbiAgICAgICAgICAgIHZhciBzZWN0aW9uID0gJCgnW2RhdGEtYW5jaG9yPVwiJytkZXN0aW55KydcIl0nKTtcclxuXHJcbiAgICAgICAgICAgIGlmKCFvcHRpb25zLmFuaW1hdGVBbmNob3IgJiYgc2VjdGlvbi5sZW5ndGgpe1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKG9wdGlvbnMuYXV0b1Njcm9sbGluZyl7XHJcbiAgICAgICAgICAgICAgICAgICAgc2lsZW50U2Nyb2xsKHNlY3Rpb24ub2Zmc2V0VG9wKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgc2lsZW50U2Nyb2xsKDApO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldEJvZHlDbGFzcyhkZXN0aW55KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy9zY3JvbGxpbmcgdGhlIHBhZ2UgdG8gdGhlIHNlY3Rpb24gd2l0aCBubyBhbmltYXRpb25cclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsU2V0dGluZ3MgPSBnZXRTY3JvbGxTZXR0aW5ncyhzZWN0aW9uLm9mZnNldFRvcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG8oc2Nyb2xsU2V0dGluZ3MuZWxlbWVudCwgc2Nyb2xsU2V0dGluZ3Mub3B0aW9ucywgMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgYWN0aXZhdGVNZW51QW5kTmF2KGRlc3RpbnksIG51bGwpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlzRnVuY3Rpb24oIG9wdGlvbnMuYWZ0ZXJMb2FkICkgJiYgb3B0aW9ucy5hZnRlckxvYWQuY2FsbCggc2VjdGlvbiwgZGVzdGlueSwgKGdldE5vZGVJbmRleChzZWN0aW9uKSArIDEpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvL3VwZGF0aW5nIHRoZSBhY3RpdmUgY2xhc3NcclxuICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzKGFjdGl2ZVNlY3Rpb24sIEFDVElWRSk7XHJcbiAgICAgICAgICAgICAgICBhZGRDbGFzcyhzZWN0aW9uLCBBQ1RJVkUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL3NldHRpbmcgdGhlIGNsYXNzIGZvciB0aGUgYm9keSBlbGVtZW50XHJcbiAgICAgICAgc2V0Qm9keUNsYXNzKCk7XHJcblxyXG4gICAgICAgIC8vc3VwcG9ydCBmb3IgSUUgPiA4XHJcbiAgICAgICAgYWRkSGFuZGxlcihkb2N1bWVudCwgc2Nyb2xsVG9BbmNob3IsICdET01Db250ZW50TG9hZGVkJywgJ0RPTUNvbnRlbnRMb2FkZWQnLCAnRE9NQ29udGVudExvYWRlZCcpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qIC0tLS0tLS0tLS0tLS0tLSBKYXZhc2NyaXB0IGhlbHBlcnMgIC0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG4gICAgLyoqXHJcbiAgICAqIFJlcGxhY2VtZW50IG9mIGpRdWVyeSBleHRlbmQgbWV0aG9kLlxyXG4gICAgKi9cclxuICAgIGZ1bmN0aW9uIGV4dGVuZChkZWZhdWx0T3B0aW9ucywgb3B0aW9ucyl7XHJcbiAgICAgICAgLy9jcmVhdGluZyB0aGUgb2JqZWN0IGlmIGl0IGRvZXNudCBleGlzdFxyXG4gICAgICAgIGlmKHR5cGVvZihvcHRpb25zKSAhPT0gJ29iamVjdCcpe1xyXG4gICAgICAgICAgICBvcHRpb25zID0ge307XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IodmFyIGtleSBpbiBvcHRpb25zKXtcclxuICAgICAgICAgICAgaWYoZGVmYXVsdE9wdGlvbnMuaGFzT3duUHJvcGVydHkoa2V5KSl7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0T3B0aW9uc1trZXldID0gb3B0aW9uc1trZXldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZGVmYXVsdE9wdGlvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0QnlJZChlbGVtZW50KXtcclxuICAgICAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0QnlUYWcoZWxlbWVudCl7XHJcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKGVsZW1lbnQpWzBdO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNzcyggZWwsIHByb3BzICkge1xyXG4gICAgICAgIHZhciBrZXk7XHJcbiAgICAgICAgZm9yICgga2V5IGluIHByb3BzICkge1xyXG4gICAgICAgICAgICBpZiAoIHByb3BzLmhhc093blByb3BlcnR5KGtleSkgKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIGtleSAhPT0gbnVsbCApIHtcclxuICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZVtrZXldID0gcHJvcHNba2V5XTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZWw7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2V0Q3NzKGVsZW1lbnQsIHN0eWxlLCB2YWx1ZSl7XHJcbiAgICAgICAgZWxlbWVudC5zdHlsZVtzdHlsZV0gPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiAkKHNlbGVjdG9yLCBjb250ZXh0KXtcclxuICAgICAgICBjb250ZXh0ID0gY29udGV4dCB8fCBkb2N1bWVudDtcclxuICAgICAgICByZXR1cm4gY29udGV4dC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiAkJChzZWxlY3RvciwgY29udGV4dCl7XHJcbiAgICAgICAgY29udGV4dCA9IGNvbnRleHQgfHwgZG9jdW1lbnQ7XHJcbiAgICAgICAgcmV0dXJuIGNvbnRleHQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0Tm9kZUluZGV4KG5vZGUpIHtcclxuICAgICAgICB2YXIgaW5kZXggPSAwO1xyXG4gICAgICAgIHdoaWxlICggKG5vZGUgPSBub2RlLnByZXZpb3VzU2libGluZykgKSB7XHJcbiAgICAgICAgICAgIGlmIChub2RlLm5vZGVUeXBlICE9IDMgfHwgIS9eXFxzKiQvLnRlc3Qobm9kZS5kYXRhKSkge1xyXG4gICAgICAgICAgICAgICAgaW5kZXgrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaW5kZXg7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gdG9nZ2xlKGVsZW1lbnQsIGRpc3BsYXkpIHtcclxuICAgICAgICBpZih0eXBlb2YgZGlzcGxheSE9PSAndW5kZWZpbmVkJyl7XHJcbiAgICAgICAgICAgIGlmKGRpc3BsYXkpe1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgaWYoIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9PSAnYmxvY2snICkge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy9odHRwOi8vamFrZXRyZW50LmNvbS9wb3N0L2FkZHJlbW92ZS1jbGFzc2VzLXJhdy1qYXZhc2NyaXB0L1xyXG4gICAgZnVuY3Rpb24gaGFzQ2xhc3MoZWxlLGNscykge1xyXG4gICAgICAgIHJldHVybiAhIWVsZS5jbGFzc05hbWUubWF0Y2gobmV3IFJlZ0V4cCgnKFxcXFxzfF4pJytjbHMrJyhcXFxcc3wkKScpKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiByZW1vdmVDbGFzcyhlbGVtZW50LCBjbGFzc05hbWUpIHtcclxuICAgICAgICBpZiAoZWxlbWVudCAmJiBoYXNDbGFzcyhlbGVtZW50LGNsYXNzTmFtZSkpIHtcclxuICAgICAgICAgICAgdmFyIHJlZyA9IG5ldyBSZWdFeHAoJyhcXFxcc3xeKScrY2xhc3NOYW1lKycoXFxcXHN8JCknKTtcclxuICAgICAgICAgICAgZWxlbWVudC5jbGFzc05hbWU9ZWxlbWVudC5jbGFzc05hbWUucmVwbGFjZShyZWcsJycpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBhZGRDbGFzcyhlbGVtZW50LCBjbGFzc05hbWUpIHtcclxuICAgICAgICBpZiAoZWxlbWVudCAmJiAhaGFzQ2xhc3MoZWxlbWVudCxjbGFzc05hbWUpKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NOYW1lICs9ICcgJytjbGFzc05hbWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8yMjEwMDg1My9kb20tcHVyZS1qYXZhc2NyaXB0LXNvbHV0aW9uLXRvLWpxdWVyeS1jbG9zZXN0LWltcGxlbWVudGF0aW9uXHJcbiAgICBmdW5jdGlvbiBjbG9zZXN0KGVsLCBmbikge1xyXG4gICAgICAgIHJldHVybiBlbCAmJiAoXHJcbiAgICAgICAgICAgIGZuKGVsKSA/IGVsIDogY2xvc2VzdChlbC5wYXJlbnROb2RlLCBmbilcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldFdpbmRvd1dpZHRoKCl7XHJcbiAgICAgICAgcmV0dXJuICAnaW5uZXJXaWR0aCcgaW4gd2luZG93ID8gd2luZG93LmlubmVyV2lkdGggOiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQub2Zmc2V0V2lkdGg7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0V2luZG93SGVpZ2h0KCl7XHJcbiAgICAgICAgcmV0dXJuICAnaW5uZXJIZWlnaHQnIGluIHdpbmRvdyA/IHdpbmRvdy5pbm5lckhlaWdodCA6IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5vZmZzZXRIZWlnaHQ7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY2xvbmUob2JqKSB7XHJcbiAgICAgICAgaWYgKG51bGwgPT09IG9iaiB8fCAnb2JqZWN0JyAhPT0gdHlwZW9mIG9iail7XHJcbiAgICAgICAgICAgIHJldHVybiBvYmo7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBjb3B5ID0gb2JqLmNvbnN0cnVjdG9yKCk7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGF0dHIgaW4gb2JqKSB7XHJcbiAgICAgICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkoYXR0cikpe1xyXG4gICAgICAgICAgICAgICAgY29weVthdHRyXSA9IG9ialthdHRyXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY29weTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBwcmV2ZW50RGVmYXVsdChldmVudCl7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQgPyBldmVudC5wcmV2ZW50RGVmYXVsdCgpIDogZXZlbnQucmV0dXJuVmFsdWUgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBpc0Z1bmN0aW9uKGZ1bmN0aW9uVG9DaGVjaykge1xyXG4gICAgICAgIHZhciBnZXRUeXBlID0ge307XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uVG9DaGVjayAmJiBnZXRUeXBlLnRvU3RyaW5nLmNhbGwoZnVuY3Rpb25Ub0NoZWNrKSA9PT0gJ1tvYmplY3QgRnVuY3Rpb25dJztcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBhZGRMaXN0ZW5lck11bHRpKGVsLCBzLCBmbikge1xyXG4gICAgICAgIHZhciBldnRzID0gcy5zcGxpdCgnICcpO1xyXG4gICAgICAgIGZvciAodmFyIGk9MCwgaUxlbj1ldnRzLmxlbmd0aDsgaTxpTGVuOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIpIHtcclxuICAgICAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoZXZ0c1tpXSwgZm4sIGZhbHNlKTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBlbC5hdHRhY2hFdmVudChldnRzW2ldLCBmbiwgZmFsc2UpOyAvL0lFIDYvNy84XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAqIFNpbXVsYXRlcyB0aGUgYW5pbWF0ZWQgc2Nyb2xsVG9wIG9mIGpRdWVyeS4gVXNlZCB3aGVuIGNzczM6ZmFsc2Ugb3Igc2Nyb2xsQmFyOnRydWUgb3IgYXV0b1Njcm9sbGluZzpmYWxzZVxyXG4gICAgKiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNjEzNjc4OS8xMDgxMzk2XHJcbiAgICAqL1xyXG4gICAgZnVuY3Rpb24gc2Nyb2xsVG8oZWxlbWVudCwgdG8sIGR1cmF0aW9uLCBjYWxsYmFjaykge1xyXG4gICAgICAgIHZhciBzdGFydCA9IGdldFNjcm9sbGVkUG9zaXRpb24oZWxlbWVudCk7XHJcbiAgICAgICAgdmFyIGNoYW5nZSA9IHRvIC0gc3RhcnQ7XHJcbiAgICAgICAgdmFyIGN1cnJlbnRUaW1lID0gMDtcclxuICAgICAgICB2YXIgaW5jcmVtZW50ID0gMjA7XHJcbiAgICAgICAgYWN0aXZlQW5pbWF0aW9uID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgdmFyIGFuaW1hdGVTY3JvbGwgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBpZihhY3RpdmVBbmltYXRpb24peyAvL2luIG9yZGVyIHRvIHN0b3BlIGl0IGZyb20gb3RoZXIgZnVuY3Rpb24gd2hlbmV2ZXIgd2Ugd2FudFxyXG4gICAgICAgICAgICAgICAgdmFyIHZhbCA9IHRvO1xyXG5cclxuICAgICAgICAgICAgICAgIGN1cnJlbnRUaW1lICs9IGluY3JlbWVudDtcclxuICAgICAgICAgICAgICAgIHZhbCA9IE1hdGguZWFzZUluT3V0Q3ViaWMoY3VycmVudFRpbWUsIHN0YXJ0LCBjaGFuZ2UsIGR1cmF0aW9uKTtcclxuXHJcbiAgICAgICAgICAgICAgICBzZXRTY3JvbGxpbmcoZWxlbWVudCwgdmFsKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZihjdXJyZW50VGltZSA8IGR1cmF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChhbmltYXRlU2Nyb2xsLCBpbmNyZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgfWVsc2UgaWYodHlwZW9mIGNhbGxiYWNrICE9PSAndW5kZWZpbmVkJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfWVsc2UgaWYgKGN1cnJlbnRUaW1lIDwgZHVyYXRpb24pe1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGFuaW1hdGVTY3JvbGwoKTtcclxuICAgIH1cclxuXHJcbiAgICAvL2h0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzQ2NDg3Ni9qYXZhc2NyaXB0LWdldC13aW5kb3cteC15LXBvc2l0aW9uLWZvci1zY3JvbGxcclxuICAgIGZ1bmN0aW9uIGdldFNjcm9sbFRvcCgpe1xyXG4gICAgICAgIHZhciBkb2MgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XHJcbiAgICAgICAgcmV0dXJuICh3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jLnNjcm9sbFRvcCkgIC0gKGRvYy5jbGllbnRUb3AgfHwgMCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy9odHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzg0MjMzNi9pcy10aGVyZS1hLXdheS10by1zZWxlY3Qtc2libGluZy1ub2Rlc1xyXG4gICAgZnVuY3Rpb24gZ2V0Q2hpbGRyZW4obiwgc2tpcE1lKXtcclxuICAgICAgICB2YXIgciA9IFtdO1xyXG4gICAgICAgIGZvciAoIDsgbjsgbiA9IG4ubmV4dFNpYmxpbmcgKVxyXG4gICAgICAgICAgIGlmICggbi5ub2RlVHlwZSA9PSAxICYmIG4gIT0gc2tpcE1lKVxyXG4gICAgICAgICAgICAgIHIucHVzaCggbiApO1xyXG4gICAgICAgIHJldHVybiByO1xyXG4gICAgfTtcclxuXHJcbiAgICAvL0dldHMgc2libGluZ3NcclxuICAgIGZ1bmN0aW9uIGdldEFsbFNpYmxpbmdzKG4pIHtcclxuICAgICAgICByZXR1cm4gZ2V0Q2hpbGRyZW4obi5wYXJlbnROb2RlLmZpcnN0Q2hpbGQsIG4pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG5leHQoZWxlbWVudCl7XHJcbiAgICAgICAgdmFyIG5leHRTaWJsaW5nID0gZWxlbWVudC5uZXh0U2libGluZztcclxuXHJcbiAgICAgICAgd2hpbGUobmV4dFNpYmxpbmcgJiYgbmV4dFNpYmxpbmcubm9kZVR5cGUgIT0gMSkge1xyXG4gICAgICAgICAgICBuZXh0U2libGluZyA9IG5leHRTaWJsaW5nLm5leHRTaWJsaW5nO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG5leHRTaWJsaW5nO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBwcmV2KGVsZW1lbnQpe1xyXG4gICAgICAgIHZhciBwcmV2U2libGluZyA9IGVsZW1lbnQucHJldmlvdXNTaWJsaW5nO1xyXG5cclxuICAgICAgICB3aGlsZShwcmV2U2libGluZyAmJiBwcmV2U2libGluZy5ub2RlVHlwZSAhPSAxKSB7XHJcbiAgICAgICAgICAgIHByZXZTaWJsaW5nID0gcHJldlNpYmxpbmcucHJldmlvdXNTaWJsaW5nO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHByZXZTaWJsaW5nO1xyXG4gICAgfVxyXG5cclxuICAgIC8qIC0tLS0tLS0tLS0tLS0tLSBFTkQgSmF2YXNjcmlwdCBoZWxwZXJzICAtLS0tLS0tLS0tLS0tLS0qL1xyXG5cclxuXHJcbiAgICAvKipcclxuICAgICogR2V0dGluZyB0aGUgcG9zaXRpb24gb2YgdGhlIGVsZW1lbnQgdG8gc2Nyb2xsIHdoZW4gdXNpbmcgalF1ZXJ5IGFuaW1hdGlvbnNcclxuICAgICovXHJcbiAgICBmdW5jdGlvbiBnZXRTY3JvbGxlZFBvc2l0aW9uKGVsZW1lbnQpe1xyXG4gICAgICAgIHZhciBwb3NpdGlvbjtcclxuXHJcbiAgICAgICAgLy9pcyBub3QgdGhlIHdpbmRvdyBlbGVtZW50IGFuZCBpcyBhIHNsaWRlP1xyXG4gICAgICAgIGlmKGVsZW1lbnQuc2VsZiAhPSB3aW5kb3cgJiYgaGFzQ2xhc3MoZWxlbWVudCwgU0xJREVTX1dSQVBQRVIpKXtcclxuICAgICAgICAgICAgcG9zaXRpb24gPSBlbGVtZW50LnNjcm9sbExlZnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYoIW9wdGlvbnMuYXV0b1Njcm9sbGluZyAgfHwgb3B0aW9ucy5zY3JvbGxCYXIpe1xyXG4gICAgICAgICAgICBwb3NpdGlvbiA9IGdldFNjcm9sbFRvcCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICBwb3NpdGlvbiA9IGVsZW1lbnQub2Zmc2V0VG9wO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9nZXRzIHRoZSB0b3AgcHJvcGVydHkgb2YgdGhlIHdyYXBwZXJcclxuICAgICAgICByZXR1cm4gcG9zaXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2V0U2Nyb2xsaW5nKGVsZW1lbnQsIHZhbCl7XHJcbiAgICAgICAgaWYoIW9wdGlvbnMuYXV0b1Njcm9sbGluZyB8fCBvcHRpb25zLnNjcm9sbEJhciB8fCAoZWxlbWVudC5zZWxmICE9IHdpbmRvdyAmJiBoYXNDbGFzcyhlbGVtZW50LCBTTElERVNfV1JBUFBFUikpKXtcclxuXHJcbiAgICAgICAgICAgIC8vc2Nyb2xsaW5nIGhvcml6b250YWxseSB0aHJvdWdoIHRoZSBzbGlkZXM/XHJcbiAgICAgICAgICAgIGlmKGVsZW1lbnQuc2VsZiAhPSB3aW5kb3cgICYmIGhhc0NsYXNzKGVsZW1lbnQsIFNMSURFU19XUkFQUEVSKSl7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LnNjcm9sbExlZnQgPSB2YWw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy92ZXJ0aWNhbCBzY3JvbGxcclxuICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuc2Nyb2xsVG8oMCwgdmFsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgZWxlbWVudC5zdHlsZS50b3AgPSB2YWwgKyAncHgnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzZXRBdXRvU2Nyb2xsaW5nKHZhbHVlLCB0eXBlKXtcclxuICAgICAgICBzZXRWYXJpYWJsZVN0YXRlKCdhdXRvU2Nyb2xsaW5nJywgdmFsdWUsIHR5cGUpO1xyXG5cclxuICAgICAgICB2YXIgZWxlbWVudCA9ICQoU0VDVElPTl9BQ1RJVkVfU0VMKTtcclxuXHJcbiAgICAgICAgaWYob3B0aW9ucy5hdXRvU2Nyb2xsaW5nICYmICFvcHRpb25zLnNjcm9sbEJhcil7XHJcblxyXG4gICAgICAgICAgICBjc3MoZG9jdW1lbnQuYm9keSwge1xyXG4gICAgICAgICAgICAgICAgJ292ZXJmbG93JzogJ2hpZGRlbicsXHJcbiAgICAgICAgICAgICAgICAnaGVpZ2h0JzogJzEwMCUnXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgY3NzKGdldEJ5VGFnKCdodG1sJykse1xyXG4gICAgICAgICAgICAgICAgJ292ZXJmbG93JzogJ2hpZGRlbicsXHJcbiAgICAgICAgICAgICAgICAnaGVpZ2h0JzogJzEwMCUnXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgc2V0UmVjb3JkSGlzdG9yeShvcHRpb25zLnJlY29yZEhpc3RvcnksICdpbnRlcm5hbCcpO1xyXG5cclxuICAgICAgICAgICAgLy9mb3IgSUUgdG91Y2ggZGV2aWNlc1xyXG4gICAgICAgICAgICBjc3MoY29udGFpbmVyLCB7XHJcbiAgICAgICAgICAgICAgICAnLW1zLXRvdWNoLWFjdGlvbic6ICdub25lJyxcclxuICAgICAgICAgICAgICAgICd0b3VjaC1hY3Rpb24nOiAnbm9uZSdcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZihlbGVtZW50KXtcclxuICAgICAgICAgICAgICAgIC8vbW92aW5nIHRoZSBjb250YWluZXIgdXBcclxuICAgICAgICAgICAgICAgIHNpbGVudFNjcm9sbChlbGVtZW50Lm9mZnNldFRvcCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGNzcyhkb2N1bWVudC5ib2R5LCB7XHJcbiAgICAgICAgICAgICAgICAnb3ZlcmZsb3cnOiAndmlzaWJsZScsXHJcbiAgICAgICAgICAgICAgICAnaGVpZ2h0JzogJzEwMCUnXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgY3NzKGdldEJ5VGFnKCdodG1sJykse1xyXG4gICAgICAgICAgICAgICAgJ292ZXJmbG93JzogJ3Zpc2libGUnLFxyXG4gICAgICAgICAgICAgICAgJ2hlaWdodCc6ICcxMDAlJ1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHNldFJlY29yZEhpc3RvcnkoZmFsc2UsICdpbnRlcm5hbCcpO1xyXG5cclxuICAgICAgICAgICAgLy9mb3IgSUUgdG91Y2ggZGV2aWNlc1xyXG4gICAgICAgICAgICBjc3MoY29udGFpbmVyLCB7XHJcbiAgICAgICAgICAgICAgICAnLW1zLXRvdWNoLWFjdGlvbic6ICcnLFxyXG4gICAgICAgICAgICAgICAgJ3RvdWNoLWFjdGlvbic6ICcnXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgc2lsZW50U2Nyb2xsKDApO1xyXG5cclxuICAgICAgICAgICAgLy9zY3JvbGxpbmcgdGhlIHBhZ2UgdG8gdGhlIHNlY3Rpb24gd2l0aCBubyBhbmltYXRpb25cclxuICAgICAgICAgICAgdmFyIHNjcm9sbFNldHRpbmdzID0gZ2V0U2Nyb2xsU2V0dGluZ3MoZWxlbWVudC5vZmZzZXRUb3ApO1xyXG4gICAgICAgICAgICBzY3JvbGxTZXR0aW5ncy5lbGVtZW50LnNjcm9sbFRvKDAsIHNjcm9sbFNldHRpbmdzLm9wdGlvbnMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAqIERlZmluZXMgd2hldGVyIHRvIHJlY29yZCB0aGUgaGlzdG9yeSBmb3IgZWFjaCBoYXNoIGNoYW5nZSBpbiB0aGUgVVJMLlxyXG4gICAgKi9cclxuICAgIGZ1bmN0aW9uIHNldFJlY29yZEhpc3RvcnkodmFsdWUsIHR5cGUpe1xyXG4gICAgICAgIHNldFZhcmlhYmxlU3RhdGUoJ3JlY29yZEhpc3RvcnknLCB2YWx1ZSwgdHlwZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAqIERlZmluZXMgdGhlIHNjcm9sbGluZyBzcGVlZFxyXG4gICAgKi9cclxuICAgIGZ1bmN0aW9uIHNldFNjcm9sbGluZ1NwZWVkKHZhbHVlLCB0eXBlKXtcclxuICAgICAgICBzZXRWYXJpYWJsZVN0YXRlKCdzY3JvbGxpbmdTcGVlZCcsIHZhbHVlLCB0eXBlKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogU2V0cyBmaXRUb1NlY3Rpb25cclxuICAgICovXHJcbiAgICBmdW5jdGlvbiBzZXRGaXRUb1NlY3Rpb24odmFsdWUsIHR5cGUpe1xyXG4gICAgICAgIHNldFZhcmlhYmxlU3RhdGUoJ2ZpdFRvU2VjdGlvbicsIHZhbHVlLCB0eXBlKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogQWRkcyBvciByZW1vdmVzIHRoZSBwb3NzaWJsaXR5IG9mIHNjcm9sbGluZyB0aHJvdWdoIHNlY3Rpb25zIGJ5IHVzaW5nIHRoZSBtb3VzZSB3aGVlbCBvciB0aGUgdHJhY2twYWQuXHJcbiAgICAqL1xyXG4gICAgZnVuY3Rpb24gc2V0TW91c2VXaGVlbFNjcm9sbGluZyh2YWx1ZSl7XHJcbiAgICAgICAgaWYodmFsdWUpe1xyXG4gICAgICAgICAgICBhZGRNb3VzZVdoZWVsSGFuZGxlcigpO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICByZW1vdmVNb3VzZVdoZWVsSGFuZGxlcigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogQWRkcyBvciByZW1vdmVzIHRoZSBwb3NzaWJsaXR5IG9mIHNjcm9sbGluZyB0aHJvdWdoIHNlY3Rpb25zIGJ5IHVzaW5nIHRoZSBrZXlib2FyZCBhcnJvdyBrZXlzXHJcbiAgICAqL1xyXG4gICAgZnVuY3Rpb24gc2V0S2V5Ym9hcmRTY3JvbGxpbmcodmFsdWUpe1xyXG4gICAgICAgIG9wdGlvbnMua2V5Ym9hcmRTY3JvbGxpbmcgPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogTW92ZXMgdGhlIHBhZ2UgdXAgb25lIHNlY3Rpb24uXHJcbiAgICAqL1xyXG4gICAgZnVuY3Rpb24gbW92ZVNlY3Rpb25VcCgpe1xyXG4gICAgICAgIHZhciBzZWN0aW9uID0gcHJldigkKFNFQ1RJT05fQUNUSVZFX1NFTCkpO1xyXG5cclxuICAgICAgICBpZiAoc2VjdGlvbikge1xyXG4gICAgICAgICAgICBzY3JvbGxQYWdlKHNlY3Rpb24sIG51bGwsIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogTW92ZXMgdGhlIHBhZ2UgZG93biBvbmUgc2VjdGlvbi5cclxuICAgICovXHJcbiAgICBmdW5jdGlvbiBtb3ZlU2VjdGlvbkRvd24oKXtcclxuICAgICAgICB2YXIgc2VjdGlvbiA9IG5leHQoJChTRUNUSU9OX0FDVElWRV9TRUwpKTtcclxuXHJcbiAgICAgICAgaWYoc2VjdGlvbil7XHJcbiAgICAgICAgICAgIHNjcm9sbFBhZ2Uoc2VjdGlvbiwgbnVsbCwgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogTW92ZXMgdGhlIHBhZ2UgdG8gdGhlIGdpdmVuIHNlY3Rpb24gYW5kIHNsaWRlIHdpdGggbm8gYW5pbWF0aW9uLlxyXG4gICAgKiBBbmNob3JzIG9yIGluZGV4IHBvc2l0aW9ucyBjYW4gYmUgdXNlZCBhcyBwYXJhbXMuXHJcbiAgICAqL1xyXG4gICAgZnVuY3Rpb24gc2lsZW50TW92ZVRvKHNlY3Rpb25BbmNob3IsIHNsaWRlQW5jaG9yKXtcclxuICAgICAgICBzZXRTY3JvbGxpbmdTcGVlZCAoMCwgJ2ludGVybmFsJyk7XHJcbiAgICAgICAgbW92ZVRvKHNlY3Rpb25BbmNob3IsIHNsaWRlQW5jaG9yKVxyXG4gICAgICAgIHNldFNjcm9sbGluZ1NwZWVkIChvcmlnaW5hbHMuc2Nyb2xsaW5nU3BlZWQsICdpbnRlcm5hbCcpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICogTW92ZXMgdGhlIHBhZ2UgdG8gdGhlIGdpdmVuIHNlY3Rpb24gYW5kIHNsaWRlLlxyXG4gICAgKiBBbmNob3JzIG9yIGluZGV4IHBvc2l0aW9ucyBjYW4gYmUgdXNlZCBhcyBwYXJhbXMuXHJcbiAgICAqL1xyXG4gICAgZnVuY3Rpb24gbW92ZVRvKHNlY3Rpb25BbmNob3IsIHNsaWRlQW5jaG9yKXtcclxuICAgICAgICB2YXIgZGVzdGlueSA9IGdldFNlY3Rpb25CeUFuY2hvcihzZWN0aW9uQW5jaG9yKTtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBzbGlkZUFuY2hvciAhPT0gJ3VuZGVmaW5lZCcpe1xyXG4gICAgICAgICAgICBzY3JvbGxQYWdlQW5kU2xpZGUoc2VjdGlvbkFuY2hvciwgc2xpZGVBbmNob3IpO1xyXG4gICAgICAgIH1lbHNlIGlmKGRlc3Rpbnkpe1xyXG4gICAgICAgICAgICBzY3JvbGxQYWdlKGRlc3RpbnkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogU2xpZGVzIHJpZ2h0IHRoZSBzbGlkZXIgb2YgdGhlIGFjdGl2ZSBzZWN0aW9uLlxyXG4gICAgKi9cclxuICAgIGZ1bmN0aW9uIG1vdmVTbGlkZVJpZ2h0KCl7XHJcbiAgICAgICAgbW92ZVNsaWRlKCduZXh0Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAqIFNsaWRlcyBsZWZ0IHRoZSBzbGlkZXIgb2YgdGhlIGFjdGl2ZSBzZWN0aW9uLlxyXG4gICAgKi9cclxuICAgIGZ1bmN0aW9uIG1vdmVTbGlkZUxlZnQoKXtcclxuICAgICAgICBtb3ZlU2xpZGUoJ3ByZXYnKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBXaGVuIHJlc2l6aW5nIGlzIGZpbmlzaGVkLCB3ZSBhZGp1c3QgdGhlIHNsaWRlcyBzaXplcyBhbmQgcG9zaXRpb25zXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHJlQnVpbGQocmVzaXppbmcpe1xyXG4gICAgICAgIGlmKGhhc0NsYXNzKGNvbnRhaW5lciwgREVTVFJPWUVEKSl7IHJldHVybjsgfVxyXG5cclxuICAgICAgICBpc1Jlc2l6aW5nID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgd2luZG93c0hlaWdodCA9IGdldFdpbmRvd0hlaWdodCgpO1xyXG5cclxuICAgICAgICB2YXIgc2VjdGlvbnMgPSAkJChTRUNUSU9OX1NFTCk7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWN0aW9ucy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICB2YXIgc2VjdGlvbiA9IHNlY3Rpb25zW2ldO1xyXG4gICAgICAgICAgICB2YXIgc2xpZGVzV3JhcCA9ICQoU0xJREVTX1dSQVBQRVJfU0VMLCBzZWN0aW9uKTtcclxuICAgICAgICAgICAgdmFyIHNsaWRlcyA9ICQkKFNMSURFX1NFTCwgc2VjdGlvbik7XHJcblxyXG4gICAgICAgICAgICAvL2FkanVzdGluZyB0aGUgcG9zaXRpb24gZm8gdGhlIEZVTEwgV0lEVEggc2xpZGVzLi4uXHJcbiAgICAgICAgICAgIGlmIChzbGlkZXNXcmFwICYmIHNsaWRlcy5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgICAgICBsYW5kc2NhcGVTY3JvbGwoc2xpZGVzV3JhcCwgJChTTElERV9BQ1RJVkVfU0VMLCBzbGlkZXNXcmFwKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICB2YXIgYWN0aXZlU2VjdGlvbiA9ICQoU0VDVElPTl9BQ1RJVkVfU0VMKTtcclxuXHJcbiAgICAgICAgLy9pc24ndCBpdCB0aGUgZmlyc3Qgc2VjdGlvbj9cclxuICAgICAgICBpZihnZXROb2RlSW5kZXgoYWN0aXZlU2VjdGlvbikpe1xyXG4gICAgICAgICAgICAvL2FkanVzdGluZyB0aGUgcG9zaXRpb24gZm9yIHRoZSBjdXJyZW50IHNlY3Rpb25cclxuICAgICAgICAgICAgc2lsZW50U2Nyb2xsKGFjdGl2ZVNlY3Rpb24ub2Zmc2V0VG9wKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlzUmVzaXppbmcgPSBmYWxzZTtcclxuICAgICAgICBpc0Z1bmN0aW9uKCBvcHRpb25zLmFmdGVyUmVzaXplICkgJiYgcmVzaXppbmcgJiYgb3B0aW9ucy5hZnRlclJlc2l6ZS5jYWxsKGNvbnRhaW5lcik7XHJcbiAgICAgICAgaXNGdW5jdGlvbiggb3B0aW9ucy5hZnRlclJlQnVpbGQgKSAmJiAhcmVzaXppbmcgJiYgb3B0aW9ucy5hZnRlclJlQnVpbGQuY2FsbChjb250YWluZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgKiBDcmVhdGVzIHRoZSBjb250cm9sIGFycm93cyBmb3IgdGhlIGdpdmVuIHNlY3Rpb25cclxuICAgICovXHJcbiAgICBmdW5jdGlvbiBjcmVhdGVTbGlkZUFycm93cyhzZWN0aW9uKXtcclxuICAgICAgICB2YXIgcHJldiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIHByZXYuY2xhc3NOYW1lID0gU0xJREVTX0FSUk9XX1BSRVY7XHJcblxyXG4gICAgICAgIHZhciBuZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgbmV4dC5jbGFzc05hbWUgPSBTTElERVNfQVJST1dfTkVYVDtcclxuXHJcbiAgICAgICAgdmFyIHNsaWRlcyA9ICQoU0xJREVTX1dSQVBQRVJfU0VMLCBzZWN0aW9uKTtcclxuXHJcbiAgICAgICAgaWYob3B0aW9ucy5jb250cm9sQXJyb3dDb2xvciAhPSAnI2ZmZicpe1xyXG4gICAgICAgICAgICAvL3NldENzcyhuZXh0LCAnYm9yZGVyLWNvbG9yJywgJ3RyYW5zcGFyZW50IHRyYW5zcGFyZW50IHRyYW5zcGFyZW50ICcrb3B0aW9ucy5jb250cm9sQXJyb3dDb2xvcik7XHJcbiAgICAgICAgICAgIC8vc2V0Q3NzKHByZXYsICdib3JkZXItY29sb3InLCAndHJhbnNwYXJlbnQgJysgb3B0aW9ucy5jb250cm9sQXJyb3dDb2xvciArICcgdHJhbnNwYXJlbnQgdHJhbnNwYXJlbnQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNsaWRlcy5wYXJlbnROb2RlLmFwcGVuZENoaWxkKHByZXYpO1xyXG4gICAgICAgIHNsaWRlcy5wYXJlbnROb2RlLmFwcGVuZENoaWxkKG5leHQpO1xyXG5cclxuICAgICAgICBpZighb3B0aW9ucy5sb29wSG9yaXpvbnRhbCl7XHJcbiAgICAgICAgICAgICQoU0xJREVTX0FSUk9XX1BSRVZfU0VMLCBzZWN0aW9uKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogQ3JlYXRlcyBhIHZlcnRpY2FsIG5hdmlnYXRpb24gYmFyLlxyXG4gICAgKi9cclxuICAgIGZ1bmN0aW9uIGFkZFZlcnRpY2FsTmF2aWdhdGlvbigpe1xyXG4gICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBkaXYuc2V0QXR0cmlidXRlKCdpZCcsIFNFQ1RJT05fTkFWKTtcclxuXHJcbiAgICAgICAgdmFyIGRpdlVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcclxuICAgICAgICBkaXYuYXBwZW5kQ2hpbGQoZGl2VWwpO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRpdik7XHJcblxyXG4gICAgICAgIG5hdiA9ICQoU0VDVElPTl9OQVZfU0VMKTtcclxuXHJcbiAgICAgICAgc2V0Q3NzKG5hdiwgJ2NvbG9yJywgb3B0aW9ucy5uYXZpZ2F0aW9uQ29sb3IpO1xyXG4gICAgICAgIGFkZENsYXNzKG5hdiwgb3B0aW9ucy5uYXZpZ2F0aW9uUG9zaXRpb24pO1xyXG5cclxuICAgICAgICBpZihvcHRpb25zLnNob3dBY3RpdmVUb29sdGlwKXtcclxuICAgICAgICAgICAgYWRkQ2xhc3MobmF2LCBTSE9XX0FDVElWRV9UT09MVElQKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBsaSA9ICcnO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICQkKFNFQ1RJT05fU0VMKS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgbGluayA9ICcnO1xyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5hbmNob3JzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgbGluayA9IG9wdGlvbnMuYW5jaG9yc1tpXTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGkgPSBsaSArICc8bGk+PGEgaHJlZj1cIiMnICsgbGluayArICdcIj48c3Bhbj48L3NwYW4+PC9hPic7XHJcblxyXG4gICAgICAgICAgICAvLyBPbmx5IGFkZCB0b29sdGlwIGlmIG5lZWRlZCAoZGVmaW5lZCBieSB1c2VyKVxyXG4gICAgICAgICAgICB2YXIgdG9vbHRpcCA9IG9wdGlvbnMubmF2aWdhdGlvblRvb2x0aXBzW2ldO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRvb2x0aXAgIT09IHVuZGVmaW5lZCAmJiB0b29sdGlwICE9PSAnJykge1xyXG4gICAgICAgICAgICAgICAgbGkgKz0gJzxkaXYgY2xhc3M9XCInKyBTRUNUSU9OX05BVl9UT09MVElQICsnICcgKyBvcHRpb25zLm5hdmlnYXRpb25Qb3NpdGlvbiArICdcIj4nICsgdG9vbHRpcCArICc8L2Rpdj4nO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsaSArPSAnPC9saT4nO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHVsID0gJCgndWwnLCBuYXYpO1xyXG4gICAgICAgIHVsLmlubmVySFRNTCA9IHVsLmlubmVySFRNTCArIGxpO1xyXG5cclxuICAgICAgICAvL2NyZWF0aW5nIHRoZSBldmVudCBsaXN0ZW5lclxyXG4gICAgICAgIHZhciBsaW5rcyA9ICQkKFNMSURFU19OQVZfTElOS19TRUwpO1xyXG4gICAgICAgIGZvcih2YXIgbCA9IDA7IGw8bGlua3MubGVuZ3RoOyBsKyspe1xyXG4gICAgICAgICAgICBhZGRMaXN0ZW5lck11bHRpKGxpbmtzW2xdLCAnY2xpY2sgb25jbGljayB0b3VjaHN0YXJ0JywgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgICAgICAgICBlID0gd2luZG93LmV2ZW50IHx8IGUgfHwgZS5vcmlnaW5hbEV2ZW50O1xyXG4gICAgICAgICAgICAgICAgcHJldmVudERlZmF1bHQoZSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBnZXROb2RlSW5kZXgodGhpcy5wYXJlbnROb2RlKTtcclxuXHJcbiAgICAgICAgICAgICAgICBzY3JvbGxQYWdlKCQkKFNFQ1RJT05fU0VMKVtpbmRleF0sIG51bGwsIGZhbHNlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogQWN0aW9ucyBhbmQgY2FsbGJhY2tzIHRvIGZpcmUgYWZ0ZXJSZW5kZXJcclxuICAgICovXHJcbiAgICBmdW5jdGlvbiBhZnRlclJlbmRlckFjdGlvbnMoKXtcclxuICAgICAgICB2YXIgc2VjdGlvbiA9ICQoU0VDVElPTl9BQ1RJVkVfU0VMKTtcclxuXHJcbiAgICAgICAgaXNGdW5jdGlvbiggb3B0aW9ucy5hZnRlckxvYWQgKSAmJiBvcHRpb25zLmFmdGVyTG9hZC5jYWxsKHNlY3Rpb24sIHNlY3Rpb24uZ2V0QXR0cmlidXRlKCdkYXRhLWFuY2hvcicpLCAoZ2V0Tm9kZUluZGV4KHNlY3Rpb24pICsgMSkpO1xyXG4gICAgICAgIGlzRnVuY3Rpb24oIG9wdGlvbnMuYWZ0ZXJSZW5kZXIgKSAmJiBvcHRpb25zLmFmdGVyUmVuZGVyLmNhbGwoY29udGFpbmVyKTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgc2Nyb2xsSWQ7XHJcbiAgICB2YXIgc2Nyb2xsSWQyO1xyXG4gICAgdmFyIGlzU2Nyb2xsaW5nID0gZmFsc2U7XHJcblxyXG5cclxuICAgIC8vd2hlbiBzY3JvbGxpbmdcclxuICAgIGZ1bmN0aW9uIHNjcm9sbEhhbmRsZXIoKXtcclxuICAgICAgICB2YXIgY3VycmVudFNlY3Rpb247XHJcblxyXG4gICAgICAgIGlmKCFvcHRpb25zLmF1dG9TY3JvbGxpbmcgfHwgb3B0aW9ucy5zY3JvbGxCYXIpe1xyXG4gICAgICAgICAgICB2YXIgY3VycmVudFNjcm9sbCA9IGdldFNjcm9sbFRvcCgpO1xyXG4gICAgICAgICAgICB2YXIgdmlzaWJsZVNlY3Rpb25JbmRleCA9IDA7XHJcbiAgICAgICAgICAgIHZhciBpbml0aWFsID0gTWF0aC5hYnMoY3VycmVudFNjcm9sbCAtICQkKFNFQ1RJT05fU0VMKVswXS5vZmZzZXRUb3ApO1xyXG5cclxuICAgICAgICAgICAgLy90YWtpbmcgdGhlIHNlY3Rpb24gd2hpY2ggaXMgc2hvd2luZyBtb3JlIGNvbnRlbnQgaW4gdGhlIHZpZXdwb3J0XHJcbiAgICAgICAgICAgIHZhciBzZWN0aW9ucyA9ICQkKFNFQ1RJT05fU0VMKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWN0aW9ucy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNlY3Rpb24gPSBzZWN0aW9uc1tpXTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudCA9IE1hdGguYWJzKGN1cnJlbnRTY3JvbGwgLSBzZWN0aW9uLm9mZnNldFRvcCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoY3VycmVudCA8IGluaXRpYWwpe1xyXG4gICAgICAgICAgICAgICAgICAgIHZpc2libGVTZWN0aW9uSW5kZXggPSBpO1xyXG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWwgPSBjdXJyZW50O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvL2dldGluZyB0aGUgbGFzdCBvbmUsIHRoZSBjdXJyZW50IG9uZSBvbiB0aGUgc2NyZWVuXHJcbiAgICAgICAgICAgIGN1cnJlbnRTZWN0aW9uID0gJCQoU0VDVElPTl9TRUwpW3Zpc2libGVTZWN0aW9uSW5kZXhdO1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKCFvcHRpb25zLmF1dG9TY3JvbGxpbmcgfHwgb3B0aW9ucy5zY3JvbGxCYXIpe1xyXG4gICAgICAgICAgICAvL2V4ZWN1dGluZyBpdCBvbmx5IG9uY2UgdGhlIGZpcnN0IHRpbWUgd2UgcmVhY2ggdGhlIHNlY3Rpb25cclxuICAgICAgICAgICAgaWYoIWhhc0NsYXNzKGN1cnJlbnRTZWN0aW9uLCBBQ1RJVkUpKXtcclxuXHJcbiAgICAgICAgICAgICAgICBpc1Njcm9sbGluZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGVhdmluZ1NlY3Rpb24gPSAkKFNFQ1RJT05fQUNUSVZFX1NFTCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGVhdmluZ1NlY3Rpb25JbmRleCA9IGdldE5vZGVJbmRleChsZWF2aW5nU2VjdGlvbikgKyAxO1xyXG4gICAgICAgICAgICAgICAgdmFyIHlNb3ZlbWVudCA9IGdldFltb3ZlbWVudChjdXJyZW50U2VjdGlvbik7XHJcbiAgICAgICAgICAgICAgICB2YXIgYW5jaG9yTGluayAgPSBjdXJyZW50U2VjdGlvbi5nZXRBdHRyaWJ1dGUoJ2RhdGEtYW5jaG9yJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VjdGlvbkluZGV4ID0gZ2V0Tm9kZUluZGV4KGN1cnJlbnRTZWN0aW9uKSArIDE7XHJcbiAgICAgICAgICAgICAgICB2YXIgYWN0aXZlU2xpZGUgPSAkKFNMSURFX0FDVElWRV9TRUwsIGN1cnJlbnRTZWN0aW9uKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZihhY3RpdmVTbGlkZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNsaWRlQW5jaG9yTGluayA9IGFjdGl2ZVNsaWRlLmdldEF0dHJpYnV0ZSgnZGF0YS1hbmNob3InKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2xpZGVJbmRleCA9IGdldE5vZGVJbmRleChhY3RpdmVTbGlkZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoY2FuU2Nyb2xsKXtcclxuICAgICAgICAgICAgICAgICAgICAvL3JlbW92aW5nIHNpYmxpbmdzIGFjdGl2ZSBjbGFzc1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzKGxlYXZpbmdTZWN0aW9uLCBBQ1RJVkUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL2FkZGluZyB0aGUgYWN0aXZlIGNsYXNzIHRvIHRoZSBjdXJyZW50IGFjdGl2ZSBzZWN0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgYWRkQ2xhc3MoY3VycmVudFNlY3Rpb24sIEFDVElWRSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlzRnVuY3Rpb24oIG9wdGlvbnMub25MZWF2ZSApICYmIG9wdGlvbnMub25MZWF2ZS5jYWxsKCBsZWF2aW5nU2VjdGlvbiwgbGVhdmluZ1NlY3Rpb25JbmRleCwgc2VjdGlvbkluZGV4LCB5TW92ZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlzRnVuY3Rpb24oIG9wdGlvbnMuYWZ0ZXJMb2FkICkgJiYgb3B0aW9ucy5hZnRlckxvYWQuY2FsbCggY3VycmVudFNlY3Rpb24sIGFuY2hvckxpbmssIHNlY3Rpb25JbmRleCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlTWVudUFuZE5hdihhbmNob3JMaW5rLCAwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYob3B0aW9ucy5hbmNob3JzLmxlbmd0aCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vbmVlZGVkIHRvIGVudGVyIGluIGhhc2hDaGFuZ2UgZXZlbnQgd2hlbiB1c2luZyB0aGUgbWVudSB3aXRoIGFuY2hvciBsaW5rc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0U2Nyb2xsZWREZXN0aW55ID0gYW5jaG9yTGluaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFN0YXRlKHNsaWRlSW5kZXgsIHNsaWRlQW5jaG9yTGluaywgYW5jaG9yTGluaywgc2VjdGlvbkluZGV4KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy9zbWFsbCB0aW1lb3V0IGluIG9yZGVyIHRvIGF2b2lkIGVudGVyaW5nIGluIGhhc2hDaGFuZ2UgZXZlbnQgd2hlbiBzY3JvbGxpbmcgaXMgbm90IGZpbmlzaGVkIHlldFxyXG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHNjcm9sbElkKTtcclxuICAgICAgICAgICAgICAgIHNjcm9sbElkID0gc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgIGlzU2Nyb2xsaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9LCAxMDApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZihvcHRpb25zLmZpdFRvU2VjdGlvbil7XHJcbiAgICAgICAgICAgICAgICAvL2ZvciB0aGUgYXV0byBhZGp1c3Qgb2YgdGhlIHZpZXdwb3J0IHRvIGZpdCBhIHdob2xlIHNlY3Rpb25cclxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChzY3JvbGxJZDIpO1xyXG5cclxuICAgICAgICAgICAgICAgIHNjcm9sbElkMiA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICBpZihjYW5TY3JvbGwgJiYgIW9wdGlvbnMuYXV0b1Njcm9sbGluZyB8fCBvcHRpb25zLnNjcm9sbEJhcil7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vYWxsb3dzIHRvIHNjcm9sbCB0byBhbiBhY3RpdmUgc2VjdGlvbiBhbmRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9pZiB0aGUgc2VjdGlvbiBpcyBhbHJlYWR5IGFjdGl2ZSwgd2UgcHJldmVudCBmaXJpbmcgY2FsbGJhY2tzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGdldE5vZGVJbmRleCgkKFNFQ1RJT05fQUNUSVZFX1NFTCkpID09IGdldE5vZGVJbmRleChjdXJyZW50U2VjdGlvbikgKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzUmVzaXppbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxQYWdlKGN1cnJlbnRTZWN0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNSZXNpemluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sIG9wdGlvbnMuZml0VG9TZWN0aW9uRGVsYXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgKiBEZXRlcm1pbmVzIHRoZSB3YXkgb2Ygc2Nyb2xsaW5nIHVwIG9yIGRvd246XHJcbiAgICAqIGJ5ICdhdXRvbWF0aWNhbGx5JyBzY3JvbGxpbmcgYSBzZWN0aW9uIG9yIGJ5IHVzaW5nIHRoZSBkZWZhdWx0IGFuZCBub3JtYWwgc2Nyb2xsaW5nLlxyXG4gICAgKi9cclxuICAgIGZ1bmN0aW9uIHNjcm9sbGluZyh0eXBlKXtcclxuICAgICAgICBpZih0eXBlID09ICdkb3duJyl7XHJcbiAgICAgICAgICAgIG1vdmVTZWN0aW9uRG93bigpO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBtb3ZlU2VjdGlvblVwKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICB2YXIgdG91Y2hTdGFydFkgPSAwO1xyXG4gICAgdmFyIHRvdWNoU3RhcnRYID0gMDtcclxuICAgIHZhciB0b3VjaEVuZFkgPSAwO1xyXG4gICAgdmFyIHRvdWNoRW5kWCA9IDA7XHJcblxyXG4gICAgLyogRGV0ZWN0aW5nIHRvdWNoIGV2ZW50c1xyXG5cclxuICAgICogQXMgd2UgYXJlIGNoYW5naW5nIHRoZSB0b3AgcHJvcGVydHkgb2YgdGhlIHBhZ2Ugb24gc2Nyb2xsaW5nLCB3ZSBjYW4gbm90IHVzZSB0aGUgdHJhZGl0aW9uYWwgd2F5IHRvIGRldGVjdCBpdC5cclxuICAgICogVGhpcyB3YXksIHRoZSB0b3VjaHN0YXJ0IGFuZCB0aGUgdG91Y2ggbW92ZXMgc2hvd3MgYW4gc21hbGwgZGlmZmVyZW5jZSBiZXR3ZWVuIHRoZW0gd2hpY2ggaXMgdGhlXHJcbiAgICAqIHVzZWQgb25lIHRvIGRldGVybWluZSB0aGUgZGlyZWN0aW9uLlxyXG4gICAgKi9cclxuICAgIGZ1bmN0aW9uIHRvdWNoTW92ZUhhbmRsZXIoZXZlbnQpe1xyXG5cclxuICAgICAgICB2YXIgZSA9IHdpbmRvdy5ldmVudCB8fCBldmVudCB8fCBldmVudC5vcmlnaW5hbEV2ZW50O1xyXG5cclxuICAgICAgICBpZihpc1JlYWxseVRvdWNoKGUpKXtcclxuICAgICAgICAgICAgaWYob3B0aW9ucy5hdXRvU2Nyb2xsaW5nKXtcclxuICAgICAgICAgICAgICAgIC8vcHJldmVudGluZyB0aGUgZWFzaW5nIG9uIGlPUyBkZXZpY2VzXHJcbiAgICAgICAgICAgICAgICBwcmV2ZW50RGVmYXVsdChldmVudCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBhY3RpdmVTZWN0aW9uID0gJChTRUNUSU9OX0FDVElWRV9TRUwpO1xyXG4gICAgICAgICAgICB2YXIgc2xpZGVzID0gJCQoU0xJREVTX1dSQVBQRVJfU0VMLCBhY3RpdmVTZWN0aW9uKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChjYW5TY3JvbGwgJiYgIXNsaWRlTW92aW5nKSB7IC8vaWYgdGhlcmVzIGFueSAjXHJcbiAgICAgICAgICAgICAgICB2YXIgdG91Y2hFdmVudHMgPSBnZXRFdmVudHNQYWdlKGUpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRvdWNoRW5kWSA9IHRvdWNoRXZlbnRzLnk7XHJcbiAgICAgICAgICAgICAgICB0b3VjaEVuZFggPSB0b3VjaEV2ZW50cy54O1xyXG5cclxuICAgICAgICAgICAgICAgIC8vaWYgbW92ZW1lbnQgaW4gdGhlIFggYXh5cyBpcyBncmVhdGVyIHRoYW4gaW4gdGhlIFkgYW5kIHRoZSBjdXJyZWN0IHNlY3Rpb24gaGFzIHNsaWRlcy4uLlxyXG4gICAgICAgICAgICAgICAgaWYgKCBzbGlkZXMgJiYgTWF0aC5hYnModG91Y2hTdGFydFggLSB0b3VjaEVuZFgpID4gKE1hdGguYWJzKHRvdWNoU3RhcnRZIC0gdG91Y2hFbmRZKSkpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy9pcyB0aGUgbW92ZW1lbnQgZ3JlYXRlciB0aGFuIHRoZSBtaW5pbXVtIHJlc2lzdGFuY2UgdG8gc2Nyb2xsP1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChNYXRoLmFicyh0b3VjaFN0YXJ0WCAtIHRvdWNoRW5kWCkgPiAoZ2V0V2luZG93V2lkdGgoKSAvIDEwMCAqIG9wdGlvbnMudG91Y2hTZW5zaXRpdml0eSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRvdWNoU3RhcnRYID4gdG91Y2hFbmRYKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlU2xpZGVSaWdodCgpOyAvL25leHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVTbGlkZUxlZnQoKTsgLy9wcmV2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy92ZXJ0aWNhbCBzY3JvbGxpbmcgKG9ubHkgd2hlbiBhdXRvU2Nyb2xsaW5nIGlzIGVuYWJsZWQpXHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmKG9wdGlvbnMuYXV0b1Njcm9sbGluZyl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vaXMgdGhlIG1vdmVtZW50IGdyZWF0ZXIgdGhhbiB0aGUgbWluaW11bSByZXNpc3RhbmNlIHRvIHNjcm9sbD9cclxuICAgICAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnModG91Y2hTdGFydFkgLSB0b3VjaEVuZFkpID4gKGdldFdpbmRvd0hlaWdodCgpLyAxMDAgKiBvcHRpb25zLnRvdWNoU2Vuc2l0aXZpdHkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0b3VjaFN0YXJ0WSA+IHRvdWNoRW5kWSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsaW5nKCdkb3duJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodG91Y2hFbmRZID4gdG91Y2hTdGFydFkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbGluZygndXAnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogQXMgSUUgPj0gMTAgZmlyZXMgYm90aCB0b3VjaCBhbmQgbW91c2UgZXZlbnRzIHdoZW4gdXNpbmcgYSBtb3VzZSBpbiBhIHRvdWNoc2NyZWVuXHJcbiAgICAqIHRoaXMgd2F5IHdlIG1ha2Ugc3VyZSB0aGF0IGlzIHJlYWxseSBhIHRvdWNoIGV2ZW50IHdoYXQgSUUgaXMgZGV0ZWN0aW5nLlxyXG4gICAgKi9cclxuICAgIGZ1bmN0aW9uIGlzUmVhbGx5VG91Y2goZSl7XHJcbiAgICAgICAgLy9pZiBpcyBub3QgSUUgICB8fCAgSUUgaXMgZGV0ZWN0aW5nIGB0b3VjaGAgb3IgYHBlbmBcclxuICAgICAgICByZXR1cm4gdHlwZW9mIGUucG9pbnRlclR5cGUgPT09ICd1bmRlZmluZWQnIHx8IGUucG9pbnRlclR5cGUgIT0gJ21vdXNlJztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogSGFuZGxlciBmb3IgdGhlIHRvdWNoIHN0YXJ0IGV2ZW50LlxyXG4gICAgKi9cclxuICAgIGZ1bmN0aW9uIHRvdWNoU3RhcnRIYW5kbGVyKGV2ZW50KXtcclxuICAgICAgICB2YXIgZSA9IHdpbmRvdy5ldmVudCB8fCBldmVudCB8fCBldmVudC5vcmlnaW5hbEV2ZW50O1xyXG5cclxuICAgICAgICAvL3N0b3BwaW5nIHRoZSBhdXRvIHNjcm9sbCB0byBhZGp1c3QgdG8gYSBzZWN0aW9uXHJcbiAgICAgICAgaWYob3B0aW9ucy5maXRUb1NlY3Rpb24pe1xyXG4gICAgICAgICAgICBhY3RpdmVBbmltYXRpb24gPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKGlzUmVhbGx5VG91Y2goZSkpe1xyXG4gICAgICAgICAgICB2YXIgdG91Y2hFdmVudHMgPSBnZXRFdmVudHNQYWdlKGUpO1xyXG4gICAgICAgICAgICB0b3VjaFN0YXJ0WSA9IHRvdWNoRXZlbnRzLnk7XHJcbiAgICAgICAgICAgIHRvdWNoU3RhcnRYID0gdG91Y2hFdmVudHMueDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAqIEdldHMgdGhlIGF2ZXJhZ2Ugb2YgdGhlIGxhc3QgYG51bWJlcmAgZWxlbWVudHMgb2YgdGhlIGdpdmVuIGFycmF5LlxyXG4gICAgKi9cclxuICAgIGZ1bmN0aW9uIGdldEF2ZXJhZ2UoZWxlbWVudHMsIG51bWJlcil7XHJcbiAgICAgICAgdmFyIHN1bSA9IDA7XHJcblxyXG4gICAgICAgIC8vdGFraW5nIGBudW1iZXJgIGVsZW1lbnRzIGZyb20gdGhlIGVuZCB0byBtYWtlIHRoZSBhdmVyYWdlLCBpZiB0aGVyZSBhcmUgbm90IGVub3VnaHQsIDFcclxuICAgICAgICB2YXIgbGFzdEVsZW1lbnRzID0gZWxlbWVudHMuc2xpY2UoTWF0aC5tYXgoZWxlbWVudHMubGVuZ3RoIC0gbnVtYmVyLCAxKSk7XHJcblxyXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsYXN0RWxlbWVudHMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICBzdW0gPSBzdW0gKyBsYXN0RWxlbWVudHNbaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBNYXRoLmNlaWwoc3VtL251bWJlcik7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGV0ZWN0aW5nIG1vdXNld2hlZWwgc2Nyb2xsaW5nXHJcbiAgICAgKlxyXG4gICAgICogaHR0cDovL2Jsb2dzLnNpdGVwb2ludHN0YXRpYy5jb20vZXhhbXBsZXMvdGVjaC9tb3VzZS13aGVlbC9pbmRleC5odG1sXHJcbiAgICAgKiBodHRwOi8vd3d3LnNpdGVwb2ludC5jb20vaHRtbDUtamF2YXNjcmlwdC1tb3VzZS13aGVlbC9cclxuICAgICAqL1xyXG4gICAgdmFyIHByZXZUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcblxyXG4gICAgZnVuY3Rpb24gTW91c2VXaGVlbEhhbmRsZXIoZSkge1xyXG4gICAgICAgIHZhciBjdXJUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcblxyXG4gICAgICAgIGlmKG9wdGlvbnMuYXV0b1Njcm9sbGluZyl7XHJcbiAgICAgICAgICAgIC8vIGNyb3NzLWJyb3dzZXIgd2hlZWwgZGVsdGFcclxuICAgICAgICAgICAgZSA9IHdpbmRvdy5ldmVudCB8fCBlIHx8IGUub3JpZ2luYWxFdmVudDtcclxuXHJcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGUud2hlZWxEZWx0YSB8fCAtZS5kZWx0YVkgfHwgLWUuZGV0YWlsO1xyXG4gICAgICAgICAgICB2YXIgZGVsdGEgPSBNYXRoLm1heCgtMSwgTWF0aC5taW4oMSwgdmFsdWUpKTtcclxuXHJcbiAgICAgICAgICAgIC8vTGltaXRpbmcgdGhlIGFycmF5IHRvIDE1MCAobGV0cyBub3Qgd2Fpc3QgbWVtb3J5ISlcclxuICAgICAgICAgICAgaWYoc2Nyb2xsaW5ncy5sZW5ndGggPiAxNDkpe1xyXG4gICAgICAgICAgICAgICAgc2Nyb2xsaW5ncy5zaGlmdCgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvL2tlZXBpbmcgcmVjb3JkIG9mIHRoZSBwcmV2aW91cyBzY3JvbGxpbmdzXHJcbiAgICAgICAgICAgIHNjcm9sbGluZ3MucHVzaChNYXRoLmFicyh2YWx1ZSkpO1xyXG5cclxuICAgICAgICAgICAgLy9wcmV2ZW50aW5nIHRvIHNjcm9sbCB0aGUgc2l0ZSBvbiBtb3VzZSB3aGVlbCB3aGVuIHNjcm9sbGJhciBpcyBwcmVzZW50XHJcbiAgICAgICAgICAgIGlmKG9wdGlvbnMuc2Nyb2xsQmFyKXtcclxuICAgICAgICAgICAgICAgIHByZXZlbnREZWZhdWx0KGUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgdGltZURpZmYgPSBjdXJUaW1lLXByZXZUaW1lO1xyXG4gICAgICAgICAgICBwcmV2VGltZSA9IGN1clRpbWU7XHJcblxyXG4gICAgICAgICAgICAvL2hhdmVuJ3QgdGhleSBzY3JvbGxlZCBpbiBhIHdoaWxlP1xyXG4gICAgICAgICAgICAvLyhlbm91Z2ggdG8gYmUgY29uc2lkZXIgYSBkaWZmZXJlbnQgc2Nyb2xsaW5nIGFjdGlvbiB0byBzY3JvbGwgYW5vdGhlciBzZWN0aW9uKVxyXG4gICAgICAgICAgICBpZih0aW1lRGlmZiA+IDIwMCl7XHJcbiAgICAgICAgICAgICAgICAvL2VtcHR5aW5nIHRoZSBhcnJheSwgd2UgZG9udCBjYXJlIGFib3V0IG9sZCBzY3JvbGxpbmdzIGZvciBvdXIgYXZlcmFnZXNcclxuICAgICAgICAgICAgICAgIHNjcm9sbGluZ3MgPSBbXTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYoY2FuU2Nyb2xsKXsvL2lmIHRoZXJlcyBhbnkgI1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlRW5kID0gZ2V0QXZlcmFnZShzY3JvbGxpbmdzLCAxMCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXZlcmFnZU1pZGRsZSA9IGdldEF2ZXJhZ2Uoc2Nyb2xsaW5ncywgNzApO1xyXG4gICAgICAgICAgICAgICAgdmFyIGlzQWNjZWxlcmF0aW5nID0gYXZlcmFnZUVuZCA+PSBhdmVyYWdlTWlkZGxlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKGlzQWNjZWxlcmF0aW5nKXtcclxuICAgICAgICAgICAgICAgICAgICAvL3Njcm9sbGluZyBkb3duP1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkZWx0YSA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsaW5nKCdkb3duJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vc2Nyb2xsaW5nIHVwP1xyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsaW5nKCd1cCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYob3B0aW9ucy5maXRUb1NlY3Rpb24pe1xyXG4gICAgICAgICAgICAvL3N0b3BwaW5nIHRoZSBhdXRvIHNjcm9sbCB0byBhZGp1c3QgdG8gYSBzZWN0aW9uXHJcbiAgICAgICAgICAgIGFjdGl2ZUFuaW1hdGlvbiA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogU2xpZGVzIGEgc2xpZGVyIHRvIHRoZSBnaXZlbiBkaXJlY3Rpb24uXHJcbiAgICAqL1xyXG4gICAgZnVuY3Rpb24gbW92ZVNsaWRlKGRpcmVjdGlvbil7XHJcbiAgICAgICAgdmFyIGFjdGl2ZVNlY3Rpb24gPSAkKFNFQ1RJT05fQUNUSVZFX1NFTCk7XHJcbiAgICAgICAgdmFyIHNsaWRlcyA9ICQoU0xJREVTX1dSQVBQRVJfU0VMLCBhY3RpdmVTZWN0aW9uKTtcclxuXHJcbiAgICAgICAgLy8gbW9yZSB0aGFuIG9uZSBzbGlkZSBuZWVkZWQgYW5kIG5vdGhpbmcgc2hvdWxkIGJlIHNsaWRpbmdcclxuICAgICAgICBpZiAoIXNsaWRlc3x8IHNsaWRlTW92aW5nKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBjdXJyZW50U2xpZGUgPSAkKFNMSURFX0FDVElWRV9TRUwsIHNsaWRlcyk7XHJcbiAgICAgICAgdmFyIGRlc3RpbnkgPSBudWxsO1xyXG4gICAgICAgIGlmKGRpcmVjdGlvbiA9PT0gJ3ByZXYnKXtcclxuICAgICAgICAgICAgZGVzdGlueSA9IHByZXYoY3VycmVudFNsaWRlKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgZGVzdGlueSA9IG5leHQoY3VycmVudFNsaWRlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vaXNuJ3QgdGhlcmUgYSBuZXh0IHNsaWRlIGluIHRoZSBzZWN1ZW5jZT9cclxuICAgICAgICBpZighZGVzdGlueSl7XHJcbiAgICAgICAgICAgIC8vcmVzcGVjdCBsb29wSG9yaXpvbnRhbCBzZXR0aW5cclxuICAgICAgICAgICAgaWYgKCFvcHRpb25zLmxvb3BIb3Jpem9udGFsKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICB2YXIgc2libGluZ3MgPSBnZXRBbGxTaWJsaW5ncyhjdXJyZW50U2xpZGUpO1xyXG4gICAgICAgICAgICBpZihkaXJlY3Rpb24gPT09ICdwcmV2Jyl7XHJcbiAgICAgICAgICAgICAgICBkZXN0aW55ID0gc2libGluZ3Nbc2libGluZ3MubGVuZ3RoIC0gMV07IC8vbGFzdFxyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGRlc3RpbnkgPSBzaWJsaW5nc1swXTsgLy9maXJzdFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzbGlkZU1vdmluZyA9IHRydWU7XHJcblxyXG4gICAgICAgIGxhbmRzY2FwZVNjcm9sbChzbGlkZXMsIGRlc3RpbnkpO1xyXG4gICAgfVxyXG5cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAqIE1haW50YWlucyB0aGUgYWN0aXZlIHNsaWRlcyBpbiB0aGUgdmlld3BvcnRcclxuICAgICogKEJlY2F1c2UgaGUgYHNjcm9sbGAgYW5pbWF0aW9uIG1pZ2h0IGdldCBsb3N0IHdpdGggc29tZSBhY3Rpb25zKVxyXG4gICAgKi9cclxuICAgIGZ1bmN0aW9uIGtlZXBTbGlkZXNQb3NpdGlvbigpe1xyXG4gICAgICAgIHZhciBhY3RpdmVTbGlkZXMgPSAkJChTTElERV9BQ1RJVkVfU0VMKTtcclxuICAgICAgICBmb3IoIHZhciBpID0wOyBpPGFjdGl2ZVNsaWRlcy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgIHNpbGVudExhbmRzY2FwZVNjcm9sbChhY3RpdmVTbGlkZXNbaV0sICdpbnRlcm5hbCcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogU2Nyb2xscyB0aGUgc2l0ZSB0byB0aGUgZ2l2ZW4gZWxlbWVudCBhbmQgc2Nyb2xscyB0byB0aGUgc2xpZGUgaWYgYSBjYWxsYmFjayBpcyBnaXZlbi5cclxuICAgICovXHJcbiAgICBmdW5jdGlvbiBzY3JvbGxQYWdlKGVsZW1lbnQsIGNhbGxiYWNrLCBpc01vdmVtZW50VXApe1xyXG4gICAgICAgIGlmKGVsZW1lbnQgPT09IG51bGwpeyByZXR1cm47IH0gLy90aGVyZSdzIG5vIGVsZW1lbnQgdG8gc2Nyb2xsLCBsZWF2aW5nIHRoZSBmdW5jdGlvblxyXG4gICAgICAgIC8vbG9jYWwgdmFyaWFibGVzXHJcbiAgICAgICAgdmFyIHYgPSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsXHJcbiAgICAgICAgICAgIGNhbGxiYWNrOiBjYWxsYmFjayxcclxuICAgICAgICAgICAgaXNNb3ZlbWVudFVwOiBpc01vdmVtZW50VXAsXHJcbiAgICAgICAgICAgIGR0b3A6IGVsZW1lbnQub2Zmc2V0VG9wLFxyXG4gICAgICAgICAgICB5TW92ZW1lbnQ6IGdldFltb3ZlbWVudChlbGVtZW50KSxcclxuICAgICAgICAgICAgYW5jaG9yTGluazogZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtYW5jaG9yJyksXHJcbiAgICAgICAgICAgIHNlY3Rpb25JbmRleDogZ2V0Tm9kZUluZGV4KGVsZW1lbnQpLFxyXG4gICAgICAgICAgICBhY3RpdmVTbGlkZTogJChTTElERV9BQ1RJVkVfU0VMLCBlbGVtZW50KSxcclxuICAgICAgICAgICAgYWN0aXZlU2VjdGlvbjogJChTRUNUSU9OX0FDVElWRV9TRUwpLFxyXG4gICAgICAgICAgICBsZWF2aW5nU2VjdGlvbjogZ2V0Tm9kZUluZGV4KCQoU0VDVElPTl9BQ1RJVkVfU0VMKSkgKyAxLFxyXG5cclxuICAgICAgICAgICAgLy9jYWNoaW5nIHRoZSB2YWx1ZSBvZiBpc1Jlc2l6aW5nIGF0IHRoZSBtb21tZW50IHRoZSBmdW5jdGlvbiBpcyBjYWxsZWRcclxuICAgICAgICAgICAgLy9iZWNhdXNlIGl0IHdpbGwgYmUgY2hlY2tlZCBsYXRlciBpbnNpZGUgYSBzZXRUaW1lb3V0IGFuZCB0aGUgdmFsdWUgbWlnaHQgY2hhbmdlXHJcbiAgICAgICAgICAgIGxvY2FsSXNSZXNpemluZzogaXNSZXNpemluZ1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vcXVpdGluZyB3aGVuIGRlc3RpbmF0aW9uIHNjcm9sbCBpcyB0aGUgc2FtZSBhcyB0aGUgY3VycmVudCBvbmVcclxuICAgICAgICBpZigoIGdldE5vZGVJbmRleCh2LmFjdGl2ZVNlY3Rpb24pID09IHYuc2VjdGlvbkluZGV4ICYmICFpc1Jlc2l6aW5nKSB8fCAob3B0aW9ucy5zY3JvbGxCYXIgJiYgZ2V0U2Nyb2xsVG9wKCkgPT09IHYuZHRvcCkpeyByZXR1cm47IH1cclxuXHJcbiAgICAgICAgaWYodi5hY3RpdmVTbGlkZSl7XHJcbiAgICAgICAgICAgIHZhciBzbGlkZUFuY2hvckxpbmsgPSB2LmFjdGl2ZVNsaWRlLmdldEF0dHJpYnV0ZSgnZGF0YS1hbmNob3InKTtcclxuICAgICAgICAgICAgdmFyIHNsaWRlSW5kZXggPSBnZXROb2RlSW5kZXgodi5hY3RpdmVTbGlkZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgc2libGluZ3MgPSAkJChTRUNUSU9OX1NFTCk7XHJcbiAgICAgICAgZm9yKHZhciBzPTA7IHM8c2libGluZ3MubGVuZ3RoOyBzKyspe1xyXG4gICAgICAgICAgICByZW1vdmVDbGFzcyhzaWJsaW5nc1tzXSwgQUNUSVZFKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGFkZENsYXNzKGVsZW1lbnQsIEFDVElWRSk7XHJcblxyXG4gICAgICAgIC8vcHJldmVudGluZyBmcm9tIGFjdGl2YXRpbmcgdGhlIE1vdXNlV2hlZWxIYW5kbGVyIGV2ZW50XHJcbiAgICAgICAgLy9tb3JlIHRoYW4gb25jZSBpZiB0aGUgcGFnZSBpcyBzY3JvbGxpbmdcclxuICAgICAgICBjYW5TY3JvbGwgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgc2V0U3RhdGUoc2xpZGVJbmRleCwgc2xpZGVBbmNob3JMaW5rLCB2LmFuY2hvckxpbmssIHYuc2VjdGlvbkluZGV4KTtcclxuXHJcbiAgICAgICAgLy9jYWxsYmFjayAob25MZWF2ZSkgaWYgdGhlIHNpdGUgaXMgbm90IGp1c3QgcmVzaXppbmcgYW5kIHJlYWRqdXN0aW5nIHRoZSBzbGlkZXNcclxuICAgICAgICBpc0Z1bmN0aW9uKG9wdGlvbnMub25MZWF2ZSkgJiYgIXYubG9jYWxJc1Jlc2l6aW5nICYmIG9wdGlvbnMub25MZWF2ZS5jYWxsKHYuYWN0aXZlU2VjdGlvbiwgdi5sZWF2aW5nU2VjdGlvbiwgKHYuc2VjdGlvbkluZGV4ICsgMSksIHYueU1vdmVtZW50KTtcclxuXHJcblxyXG4gICAgICAgIHBlcmZvcm1Nb3ZlbWVudCh2KTtcclxuXHJcbiAgICAgICAgLy9mbGFnIHRvIGF2b2lkIGNhbGxpbmduIGBzY3JvbGxQYWdlKClgIHR3aWNlIGluIGNhc2Ugb2YgdXNpbmcgYW5jaG9yIGxpbmtzXHJcbiAgICAgICAgbGFzdFNjcm9sbGVkRGVzdGlueSA9IHYuYW5jaG9yTGluaztcclxuXHJcblxyXG4gICAgICAgIGFjdGl2YXRlTWVudUFuZE5hdih2LmFuY2hvckxpbmssIHYuc2VjdGlvbkluZGV4KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogUGVyZm9ybXMgdGhlIG1vdmVtZW50IChieSBDU1MzIG9yIGJ5IGpRdWVyeSlcclxuICAgICovXHJcbiAgICBmdW5jdGlvbiBwZXJmb3JtTW92ZW1lbnQodil7XHJcbiAgICAgICAgLy8gdXNpbmcgQ1NTMyB0cmFuc2xhdGUgZnVuY3Rpb25hbGl0eVxyXG4gICAgICAgIGlmIChvcHRpb25zLmNzczMgJiYgb3B0aW9ucy5hdXRvU2Nyb2xsaW5nICYmICFvcHRpb25zLnNjcm9sbEJhcikge1xyXG4gICAgICAgICAgICB2YXIgdHJhbnNsYXRlM2QgPSAndHJhbnNsYXRlM2QoMHB4LCAtJyArIHYuZHRvcCArICdweCwgMHB4KSc7XHJcbiAgICAgICAgICAgIHRyYW5zZm9ybUNvbnRhaW5lcih0cmFuc2xhdGUzZCwgdHJ1ZSk7XHJcblxyXG4gICAgICAgICAgICAvL2V2ZW4gd2hlbiB0aGUgc2Nyb2xsaW5nU3BlZWQgaXMgMCB0aGVyZSdzIGEgbGl0dGxlIGRlbGF5LCB3aGljaCBtaWdodCBjYXVzZSB0aGVcclxuICAgICAgICAgICAgLy9zY3JvbGxpbmdTcGVlZCB0byBjaGFuZ2UgaW4gY2FzZSBvZiB1c2luZyBzaWxlbnRNb3ZlVG8oKTtcclxuICAgICAgICAgICAgaWYob3B0aW9ucy5zY3JvbGxpbmdTcGVlZCl7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBhZnRlclNlY3Rpb25Mb2Fkcyh2KTtcclxuICAgICAgICAgICAgICAgIH0sIG9wdGlvbnMuc2Nyb2xsaW5nU3BlZWQpO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGFmdGVyU2VjdGlvbkxvYWRzKHYpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyB1c2luZyBqUXVlcnkgYW5pbWF0ZVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIHZhciBzY3JvbGxTZXR0aW5ncyA9IGdldFNjcm9sbFNldHRpbmdzKHYuZHRvcCk7XHJcbiAgICAgICAgICAgIHNjcm9sbFRvKHNjcm9sbFNldHRpbmdzLmVsZW1lbnQsIHNjcm9sbFNldHRpbmdzLm9wdGlvbnMsIG9wdGlvbnMuc2Nyb2xsaW5nU3BlZWQsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBhZnRlclNlY3Rpb25Mb2Fkcyh2KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgKiBHZXRzIHRoZSBzY3JvbGxpbmcgc2V0dGluZ3MgZGVwZW5kaW5nIG9uIHRoZSBwbHVnaW4gYXV0b1Njcm9sbGluZyBvcHRpb25cclxuICAgICovXHJcbiAgICBmdW5jdGlvbiBnZXRTY3JvbGxTZXR0aW5ncyh0b3Ape1xyXG4gICAgICAgIHZhciBzY3JvbGwgPSB7fTtcclxuXHJcbiAgICAgICAgLy90b3AgcHJvcGVydHkgYW5pbWF0aW9uXHJcbiAgICAgICAgaWYob3B0aW9ucy5hdXRvU2Nyb2xsaW5nICYmICFvcHRpb25zLnNjcm9sbEJhcil7XHJcbiAgICAgICAgICAgIHNjcm9sbC5vcHRpb25zID0gLXRvcDtcclxuICAgICAgICAgICAgc2Nyb2xsLmVsZW1lbnQgPSAkKCcuJytXUkFQUEVSKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vd2luZG93IHJlYWwgc2Nyb2xsaW5nXHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgc2Nyb2xsLm9wdGlvbnMgPSB0b3A7XHJcbiAgICAgICAgICAgIHNjcm9sbC5lbGVtZW50ID0gd2luZG93O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHNjcm9sbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogQWN0aW9ucyB0byBkbyBvbmNlIHRoZSBzZWN0aW9uIGlzIGxvYWRlZFxyXG4gICAgKi9cclxuICAgIGZ1bmN0aW9uIGFmdGVyU2VjdGlvbkxvYWRzICh2KXtcclxuICAgICAgICAvL2NhbGxiYWNrIChhZnRlckxvYWQpIGlmIHRoZSBzaXRlIGlzIG5vdCBqdXN0IHJlc2l6aW5nIGFuZCByZWFkanVzdGluZyB0aGUgc2xpZGVzXHJcbiAgICAgICAgaXNGdW5jdGlvbihvcHRpb25zLmFmdGVyTG9hZCkgJiYgIXYubG9jYWxJc1Jlc2l6aW5nICYmIG9wdGlvbnMuYWZ0ZXJMb2FkLmNhbGwodi5lbGVtZW50LCB2LmFuY2hvckxpbmssICh2LnNlY3Rpb25JbmRleCArIDEpKTtcclxuICAgICAgICBjYW5TY3JvbGwgPSB0cnVlO1xyXG5cclxuICAgICAgICBpc0Z1bmN0aW9uKHYuY2FsbGJhY2spICYmIHYuY2FsbGJhY2suY2FsbCh0aGlzKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAqIFNjcm9sbHMgdG8gdGhlIGFuY2hvciBpbiB0aGUgVVJMIHdoZW4gbG9hZGluZyB0aGUgc2l0ZVxyXG4gICAgKi9cclxuICAgIGZ1bmN0aW9uIHNjcm9sbFRvQW5jaG9yKCl7XHJcbiAgICAgICAgLy9nZXR0aW5nIHRoZSBhbmNob3IgbGluayBpbiB0aGUgVVJMIGFuZCBkZWxldGluZyB0aGUgYCNgXHJcbiAgICAgICAgdmFyIHZhbHVlID0gIHdpbmRvdy5sb2NhdGlvbi5oYXNoLnJlcGxhY2UoJyMnLCAnJykuc3BsaXQoJy8nKTtcclxuICAgICAgICB2YXIgc2VjdGlvbiA9IHZhbHVlWzBdO1xyXG4gICAgICAgIHZhciBzbGlkZSA9IHZhbHVlWzFdO1xyXG5cclxuICAgICAgICBpZihzZWN0aW9uKXsgIC8vaWYgdGhlcmVzIGFueSAjXHJcbiAgICAgICAgICAgIHNjcm9sbFBhZ2VBbmRTbGlkZShzZWN0aW9uLCBzbGlkZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vZGV0ZWN0aW5nIGFueSBjaGFuZ2Ugb24gdGhlIFVSTCB0byBzY3JvbGwgdG8gdGhlIGdpdmVuIGFuY2hvciBsaW5rXHJcbiAgICAvLyhhIHdheSB0byBkZXRlY3QgYmFjayBoaXN0b3J5IGJ1dHRvbiBhcyB3ZSBwbGF5IHdpdGggdGhlIGhhc2hlcyBvbiB0aGUgVVJMKVxyXG4gICAgaWYgKGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIpIHtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIGhhc2hDaGFuZ2VIYW5kbGVyLCBmYWxzZSk7IC8vSUU5LCBDaHJvbWUsIFNhZmFyaSwgT3BlclxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB3aW5kb3cuYXR0YWNoRXZlbnQoJ29uaGFzaGNoYW5nZScsIGhhc2hDaGFuZ2VIYW5kbGVyKTsgLy9JRSA2LzcvOFxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGFycm93c0hhbmRsZXIoZXZlbnQpe1xyXG4gICAgICAgIHZhciBlbGVtZW50ID0gdGhpcztcclxuXHJcbiAgICAgICAgLy9JRSA4ICh1c2luZyBhdHRhY2ggZXZlbnQuLi4pXHJcbiAgICAgICAgLy9odHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS80NTkwMjMxLzEwODEzOTZcclxuICAgICAgICBpZihlbGVtZW50LnNlbGYgPT0gd2luZG93ICl7XHJcbiAgICAgICAgICAgIGVsZW1lbnQgPSBldmVudC50YXJnZXQgfHwgZXZlbnQuc3JjRWxlbWVudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChoYXNDbGFzcyhlbGVtZW50LCBTTElERVNfUFJFVikpIHtcclxuICAgICAgICAgICAgbW92ZVNsaWRlTGVmdCgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG1vdmVTbGlkZVJpZ2h0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGhhc2hDaGFuZ2VIYW5kbGVyKCl7XHJcbiAgICAgICAgaWYoIWlzU2Nyb2xsaW5nKXtcclxuICAgICAgICAgICAgdmFyIHZhbHVlID0gIHdpbmRvdy5sb2NhdGlvbi5oYXNoLnJlcGxhY2UoJyMnLCAnJykuc3BsaXQoJy8nKTtcclxuICAgICAgICAgICAgdmFyIHNlY3Rpb24gPSB2YWx1ZVswXTtcclxuICAgICAgICAgICAgdmFyIHNsaWRlID0gdmFsdWVbMV07XHJcblxyXG4gICAgICAgICAgICBpZihzZWN0aW9uLmxlbmd0aCl7XHJcbiAgICAgICAgICAgICAgICAvL3doZW4gbW92aW5nIHRvIGEgc2xpZGUgaW4gdGhlIGZpcnN0IHNlY3Rpb24gZm9yIHRoZSBmaXJzdCB0aW1lIChmaXJzdCB0aW1lIHRvIGFkZCBhbiBhbmNob3IgdG8gdGhlIFVSTClcclxuICAgICAgICAgICAgICAgIHZhciBpc0ZpcnN0U2xpZGVNb3ZlID0gICh0eXBlb2YgbGFzdFNjcm9sbGVkRGVzdGlueSA9PT0gJ3VuZGVmaW5lZCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGlzRmlyc3RTY3JvbGxNb3ZlID0gKHR5cGVvZiBsYXN0U2Nyb2xsZWREZXN0aW55ID09PSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygc2xpZGUgPT09ICd1bmRlZmluZWQnICYmICFzbGlkZU1vdmluZyk7XHJcblxyXG4gICAgICAgICAgICAgICAgLyppbiBvcmRlciB0byBjYWxsIHNjcm9sbHBhZ2UoKSBvbmx5IG9uY2UgZm9yIGVhY2ggZGVzdGluYXRpb24gYXQgYSB0aW1lXHJcbiAgICAgICAgICAgICAgICBJdCBpcyBjYWxsZWQgdHdpY2UgZm9yIGVhY2ggc2Nyb2xsIG90aGVyd2lzZSwgYXMgaW4gY2FzZSBvZiB1c2luZyBhbmNob3JsaW5rcyBgaGFzaENoYW5nZWBcclxuICAgICAgICAgICAgICAgIGV2ZW50IGlzIGZpcmVkIG9uIGV2ZXJ5IHNjcm9sbCB0b28uKi9cclxuICAgICAgICAgICAgICAgIGlmICgoc2VjdGlvbiAmJiBzZWN0aW9uICE9PSBsYXN0U2Nyb2xsZWREZXN0aW55KSAmJiAhaXNGaXJzdFNsaWRlTW92ZSB8fCBpc0ZpcnN0U2Nyb2xsTW92ZSB8fCAoIXNsaWRlTW92aW5nICYmIGxhc3RTY3JvbGxlZFNsaWRlICE9IHNsaWRlICkpICB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsUGFnZUFuZFNsaWRlKHNlY3Rpb24sIHNsaWRlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTbGlkaW5nIHdpdGggYXJyb3cga2V5cywgYm90aCwgdmVydGljYWwgYW5kIGhvcml6b250YWxcclxuICAgICAqL1xyXG4gICAgdmFyIGtleWRvd25JZDtcclxuICAgIGRvY3VtZW50Lm9ua2V5ZG93biA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBjbGVhclRpbWVvdXQoa2V5ZG93bklkKTtcclxuXHJcbiAgICAgICAgdmFyIGFjdGl2ZUVsZW1lbnQgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xyXG4gICAgICAgIHZhciB0YWdOYW1lID0gYWN0aXZlRWxlbWVudC50YWdOYW1lO1xyXG5cclxuICAgICAgICBpZih0YWdOYW1lICE9PSAnU0VMRUNUJyAmJiB0YWdOYW1lICE9PSAnSU5QVVQnICYmIG9wdGlvbnMua2V5Ym9hcmRTY3JvbGxpbmcgJiYgb3B0aW9ucy5hdXRvU2Nyb2xsaW5nKXtcclxuXHJcbiAgICAgICAgICAgIGUgPSB3aW5kb3cuZXZlbnQgfHwgZSB8fCBlLm9yaWdpbmFsRXZlbnQ7XHJcbiAgICAgICAgICAgIHZhciBjaGFyQ29kZSA9IGUuY2hhckNvZGUgfHwgZS5rZXlDb2RlO1xyXG5cclxuICAgICAgICAgICAgLy9wcmV2ZW50aW5nIHRoZSBzY3JvbGwgd2l0aCBhcnJvdyBrZXlzICYgc3BhY2ViYXIgJiBQYWdlIFVwICYgRG93biBrZXlzXHJcbiAgICAgICAgICAgIHZhciBrZXlDb250cm9scyA9IFs0MCwgMzgsIDMyLCAzMywgMzRdO1xyXG4gICAgICAgICAgICBmb3IodmFyIGk9MDsgaTxrZXlDb250cm9scy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICBpZihrZXlDb250cm9sc1tpXSA9PSBjaGFyQ29kZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJldmVudERlZmF1bHQoZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBzaGlmdFByZXNzZWQgPSBlLnNoaWZ0S2V5O1xyXG4gICAgICAgICAgICBrZXlkb3duSWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBvbmtleWRvd24oc2hpZnRQcmVzc2VkLCBjaGFyQ29kZSk7XHJcbiAgICAgICAgICAgIH0sMTUwKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIG9ua2V5ZG93bihzaGlmdFByZXNzZWQsIGNoYXJDb2RlKXtcclxuICAgICAgICBzd2l0Y2ggKGNoYXJDb2RlKSB7XHJcbiAgICAgICAgICAgIC8vdXBcclxuICAgICAgICAgICAgY2FzZSAzODpcclxuICAgICAgICAgICAgY2FzZSAzMzpcclxuICAgICAgICAgICAgICAgIG1vdmVTZWN0aW9uVXAoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgLy9kb3duXHJcbiAgICAgICAgICAgIGNhc2UgMzI6IC8vc3BhY2ViYXJcclxuICAgICAgICAgICAgICAgIGlmKHNoaWZ0UHJlc3NlZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgbW92ZVNlY3Rpb25VcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIDQwOlxyXG4gICAgICAgICAgICBjYXNlIDM0OlxyXG4gICAgICAgICAgICAgICAgbW92ZVNlY3Rpb25Eb3duKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIC8vSG9tZVxyXG4gICAgICAgICAgICBjYXNlIDM2OlxyXG4gICAgICAgICAgICAgICAgbW92ZVRvKDEpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAvL0VuZFxyXG4gICAgICAgICAgICBjYXNlIDM1OlxyXG4gICAgICAgICAgICAgICAgbW92ZVRvKCAkJChTRUNUSU9OX1NFTCkubGVuZ3RoICk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIC8vbGVmdFxyXG4gICAgICAgICAgICBjYXNlIDM3OlxyXG4gICAgICAgICAgICAgICAgbW92ZVNsaWRlTGVmdCgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAvL3JpZ2h0XHJcbiAgICAgICAgICAgIGNhc2UgMzk6XHJcbiAgICAgICAgICAgICAgICBtb3ZlU2xpZGVSaWdodCgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBleGl0IHRoaXMgaGFuZGxlciBmb3Igb3RoZXIga2V5c1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogU2Nyb2xscyB0aGUgc2xpZGVyIHRvIHRoZSBnaXZlbiBzbGlkZSBkZXN0aW5hdGlvbiBmb3IgdGhlIGdpdmVuIHNlY3Rpb25cclxuICAgICovXHJcbiAgICB2YXIgc2xpZGVzTmF2ID0gJChTTElERVNfTkFWX0xJTktfU0VMKTtcclxuICAgIGlmKHNsaWRlc05hdiAhPT0gbnVsbCl7XHJcbiAgICAgICAgYWRkTGlzdGVuZXJNdWx0aSgkKFNMSURFU19OQVZfTElOS19TRUwpLCAnY2xpY2sgb25jbGljayB0b3VjaHN0YXJ0JywgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgICAgIHByZXZlbnREZWZhdWx0KGUpO1xyXG5cclxuICAgICAgICAgICAgLy9lcXVpdmFsZW50IHRvOiAgIHZhciBzbGlkZXMgPSAkKHRoaXMpLmNsb3Nlc3QoU0VDVElPTl9TRUwpLmZpbmQoU0xJREVTX1dSQVBQRVJfU0VMKTtcclxuICAgICAgICAgICAgdmFyIHNlY3Rpb24gPSBjbG9zZXN0KHRoaXMsIGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGhhc0NsYXNzKGUxLCBTRUNUSU9OKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHZhciBzbGlkZXMgPSAkKFNMSURFU19XUkFQUEVSX1NFTCwgc2VjdGlvbik7XHJcblxyXG4gICAgICAgICAgICB2YXIgbGkgPSBjbG9zZXN0KHRoaXMsIGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsLnRhZ05hbWUgPT09ICdsaSc7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB2YXIgbGlJbmRleCA9IGdldE5vZGVJbmRleChsaSk7XHJcbiAgICAgICAgICAgIHZhciBkZXN0aW55ID0gJCQoU0xJREVfU0VMLCBzbGlkZXMpW2xpSW5kZXhdO1xyXG5cclxuICAgICAgICAgICAgbGFuZHNjYXBlU2Nyb2xsKHNsaWRlcywgZGVzdGlueSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTY3JvbGxpbmcgaG9yaXpvbnRhbGx5IHdoZW4gY2xpY2tpbmcgb24gdGhlIHNsaWRlciBjb250cm9scy5cclxuICAgICAqL1xyXG4gICAgLy8gJChTRUNUSU9OX1NFTCkub24oJ2NsaWNrIHRvdWNoc3RhcnQnLCBTTElERVNfQVJST1dfU0VMLCBmdW5jdGlvbigpIHtcclxuICAgIC8vICBpZiAoJCh0aGlzKS5oYXNDbGFzcyhTTElERVNfUFJFVikpIHtcclxuICAgIC8vICAgICAgbW92ZVNsaWRlTGVmdCgpO1xyXG4gICAgLy8gIH0gZWxzZSB7XHJcbiAgICAvLyAgICAgIG1vdmVTbGlkZVJpZ2h0KCk7XHJcbiAgICAvLyAgfVxyXG4gICAgLy8gfSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAqIFNjcm9sbHMgaG9yaXpvbnRhbCBzbGlkZXJzLlxyXG4gICAgKi9cclxuICAgIGZ1bmN0aW9uIGxhbmRzY2FwZVNjcm9sbChzbGlkZXMsIGRlc3Rpbnkpe1xyXG4gICAgICAgIHZhciBzbGlkZUluZGV4ID0gZ2V0Tm9kZUluZGV4KGRlc3RpbnkpO1xyXG5cclxuICAgICAgICAvL2VxdWl2YWxlbnQgdG8gc2xpZGVzLmNsb3Nlc3QoU0VDVElPTl9TRUwpXHJcbiAgICAgICAgdmFyIHNlY3Rpb24gPSBjbG9zZXN0KHNsaWRlcywgZnVuY3Rpb24oZTEpe1xyXG4gICAgICAgICAgICByZXR1cm4gaGFzQ2xhc3MoZTEsIFNFQ1RJT04pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB2YXIgc2VjdGlvbkluZGV4ID0gZ2V0Tm9kZUluZGV4KHNlY3Rpb24pO1xyXG4gICAgICAgIHZhciBhbmNob3JMaW5rID0gc2VjdGlvbi5nZXRBdHRyaWJ1dGUoJ2RhdGEtYW5jaG9yJyk7XHJcbiAgICAgICAgdmFyIHNsaWRlc05hdiA9ICQoU0xJREVTX05BVl9TRUwsIHNlY3Rpb24pO1xyXG4gICAgICAgIHZhciBzbGlkZUFuY2hvciA9IGdldFNsaWRlQW5jaG9yKGRlc3RpbnkpO1xyXG5cclxuICAgICAgICAvL2NhY2hpbmcgdGhlIHZhbHVlIG9mIGlzUmVzaXppbmcgYXQgdGhlIG1vbW1lbnQgdGhlIGZ1bmN0aW9uIGlzIGNhbGxlZFxyXG4gICAgICAgIC8vYmVjYXVzZSBpdCB3aWxsIGJlIGNoZWNrZWQgbGF0ZXIgaW5zaWRlIGEgc2V0VGltZW91dCBhbmQgdGhlIHZhbHVlIG1pZ2h0IGNoYW5nZVxyXG4gICAgICAgIHZhciBsb2NhbElzUmVzaXppbmcgPSBpc1Jlc2l6aW5nO1xyXG5cclxuICAgICAgICBpZihvcHRpb25zLm9uU2xpZGVMZWF2ZSl7XHJcbiAgICAgICAgICAgIHZhciBwcmV2U2xpZGUgPSAkKFNMSURFX0FDVElWRV9TRUwsIHNlY3Rpb24pO1xyXG4gICAgICAgICAgICB2YXIgcHJldlNsaWRlSW5kZXggPSBnZXROb2RlSW5kZXgocHJldlNsaWRlKTtcclxuICAgICAgICAgICAgdmFyIHhNb3ZlbWVudCA9IGdldFhtb3ZlbWVudChwcmV2U2xpZGVJbmRleCwgc2xpZGVJbmRleCk7XHJcblxyXG4gICAgICAgICAgICAvL2lmIHRoZSBzaXRlIGlzIG5vdCBqdXN0IHJlc2l6aW5nIGFuZCByZWFkanVzdGluZyB0aGUgc2xpZGVzXHJcbiAgICAgICAgICAgIGlmKCFsb2NhbElzUmVzaXppbmcgJiYgeE1vdmVtZW50IT09J25vbmUnKXtcclxuICAgICAgICAgICAgICAgIGlzRnVuY3Rpb24oIG9wdGlvbnMub25TbGlkZUxlYXZlICkgJiYgb3B0aW9ucy5vblNsaWRlTGVhdmUuY2FsbCggcHJldlNsaWRlLCBhbmNob3JMaW5rLCAoc2VjdGlvbkluZGV4ICsgMSksIHByZXZTbGlkZUluZGV4LCB4TW92ZW1lbnQsIHNsaWRlSW5kZXgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgc2libGluZ3MgPSAkJChTTElERV9TRUwsIHNlY3Rpb24pO1xyXG5cclxuICAgICAgICBmb3IodmFyIHM9MDsgczxzaWJsaW5ncy5sZW5ndGg7IHMrKyl7XHJcbiAgICAgICAgICAgIHJlbW92ZUNsYXNzKHNpYmxpbmdzW3NdLCBBQ1RJVkUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYWRkQ2xhc3MoZGVzdGlueSwgQUNUSVZFKTtcclxuXHJcblxyXG5cclxuICAgICAgICBpZighb3B0aW9ucy5sb29wSG9yaXpvbnRhbCAmJiBvcHRpb25zLmNvbnRyb2xBcnJvd3Mpe1xyXG4gICAgICAgICAgICAvL2hpZGRpbmcgaXQgZm9yIHRoZSBmaXN0IHNsaWRlLCBzaG93aW5nIGZvciB0aGUgcmVzdFxyXG4gICAgICAgICAgICB0b2dnbGUoJChTTElERVNfQVJST1dfUFJFVl9TRUwsIHNlY3Rpb24pLCBzbGlkZUluZGV4IT09MCk7XHJcblxyXG4gICAgICAgICAgICAvL2hpZGRpbmcgaXQgZm9yIHRoZSBsYXN0IHNsaWRlLCBzaG93aW5nIGZvciB0aGUgcmVzdFxyXG4gICAgICAgICAgICB0b2dnbGUoJChTTElERVNfQVJST1dfTkVYVF9TRUwsIHNlY3Rpb24pLCAhZGVzdGlueS5pcygnOmxhc3QtY2hpbGQnKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL29ubHkgY2hhbmdpbmcgdGhlIFVSTCBpZiB0aGUgc2xpZGVzIGFyZSBpbiB0aGUgY3VycmVudCBzZWN0aW9uIChub3QgZm9yIHJlc2l6ZSByZS1hZGp1c3RpbmcpXHJcbiAgICAgICAgaWYoaGFzQ2xhc3Moc2VjdGlvbiwgQUNUSVZFKSl7XHJcbiAgICAgICAgICAgIHNldFN0YXRlKHNsaWRlSW5kZXgsIHNsaWRlQW5jaG9yLCBhbmNob3JMaW5rLCBzZWN0aW9uSW5kZXgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGFmdGVyU2xpZGVMb2FkcyA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIC8vaWYgdGhlIHNpdGUgaXMgbm90IGp1c3QgcmVzaXppbmcgYW5kIHJlYWRqdXN0aW5nIHRoZSBzbGlkZXNcclxuICAgICAgICAgICAgaWYoIWxvY2FsSXNSZXNpemluZyl7XHJcbiAgICAgICAgICAgICAgICBpc0Z1bmN0aW9uKCBvcHRpb25zLmFmdGVyU2xpZGVMb2FkICkgJiYgb3B0aW9ucy5hZnRlclNsaWRlTG9hZC5jYWxsKCBkZXN0aW55LCBhbmNob3JMaW5rLCAoc2VjdGlvbkluZGV4ICsgMSksIHNsaWRlQW5jaG9yLCBzbGlkZUluZGV4KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL2xldHRpbmcgdGhlbSBzbGlkZSBhZ2FpblxyXG4gICAgICAgICAgICBzbGlkZU1vdmluZyA9IGZhbHNlO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGlmKG9wdGlvbnMuY3NzMyl7XHJcbiAgICAgICAgICAgIHZhciB0cmFuc2xhdGUzZCA9ICd0cmFuc2xhdGUzZCgtJyArIE1hdGgucm91bmQoZGVzdGlueS5vZmZzZXRMZWZ0KSArICdweCwgMHB4LCAwcHgpJztcclxuICAgICAgICAgICAgdmFyIHNsaWRlc0NvbnRhaW5lciA9ICQoU0xJREVTX0NPTlRBSU5FUl9TRUwsIHNsaWRlcyk7XHJcblxyXG4gICAgICAgICAgICBhZGRBbmltYXRpb24oc2xpZGVzQ29udGFpbmVyLCBvcHRpb25zLnNjcm9sbGluZ1NwZWVkPjApO1xyXG4gICAgICAgICAgICBzZXRUcmFuc2Zvcm1zKHNsaWRlc0NvbnRhaW5lciwgdHJhbnNsYXRlM2QpO1xyXG5cclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgYWZ0ZXJTbGlkZUxvYWRzKCk7XHJcbiAgICAgICAgICAgIH0sIG9wdGlvbnMuc2Nyb2xsaW5nU3BlZWQsIG9wdGlvbnMuZWFzaW5nKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgc2Nyb2xsVG8oc2xpZGVzLCBNYXRoLnJvdW5kKGRlc3Rpbnkub2Zmc2V0TGVmdCksIG9wdGlvbnMuc2Nyb2xsaW5nU3BlZWQsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBhZnRlclNsaWRlTG9hZHMoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZihvcHRpb25zLnNsaWRlc05hdmlnYXRpb24pe1xyXG4gICAgICAgICAgICByZW1vdmVDbGFzcygkKEFDVElWRV9TRUwsIHNsaWRlc05hdiksIEFDVElWRSk7XHJcbiAgICAgICAgICAgIHZhciBhY3RpdmVOYXZMaSA9ICQkKCdsaScsIHNsaWRlc05hdilbc2xpZGVJbmRleF07XHJcbiAgICAgICAgICAgIHZhciBhY3RpdmVMaW5rID0gJCgnYScsIGFjdGl2ZU5hdkxpKTtcclxuICAgICAgICAgICAgYWRkQ2xhc3MoYWN0aXZlTGluaywgQUNUSVZFKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy93aGVuIHJlc2l6aW5nIHRoZSBzaXRlLCB3ZSBhZGp1c3QgdGhlIGhlaWdodHMgb2YgdGhlIHNlY3Rpb25zXHJcbiAgICB2YXIgcHJldmlvdXNIZWlnaHQgPSB3aW5kb3dzSGVpZ2h0O1xyXG4gICAgdmFyIHJlc2l6ZUlkO1xyXG4gICAgZnVuY3Rpb24gcmVzaXplSGFuZGxlcigpe1xyXG4gICAgICAgIC8vIHJlYnVpbGQgaW1tZWRpYXRlbHkgb24gdG91Y2ggZGV2aWNlc1xyXG4gICAgICAgIGlmIChpc1RvdWNoRGV2aWNlKSB7XHJcblxyXG4gICAgICAgICAgICAvL2lmIHRoZSBrZXlib2FyZCBpcyB2aXNpYmxlXHJcbiAgICAgICAgICAgIGlmIChkb2N1bWVudC5hY3RpdmVFbGVtZW50LmdldEF0dHJpYnV0ZSgndHlwZScpICE9PSAndGV4dCcpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50SGVpZ2h0ID0gZ2V0V2luZG93SGVpZ2h0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy9tYWtpbmcgc3VyZSB0aGUgY2hhbmdlIGluIHRoZSB2aWV3cG9ydCBzaXplIGlzIGVub3VnaCB0byBmb3JjZSBhIHJlYnVpbGQuICgyMCAlIG9mIHRoZSB3aW5kb3cgdG8gYXZvaWQgcHJvYmxlbXMgd2hlbiBoaWRkaW5nIHNjcm9sbCBiYXJzKVxyXG4gICAgICAgICAgICAgICAgaWYoIE1hdGguYWJzKGN1cnJlbnRIZWlnaHQgLSBwcmV2aW91c0hlaWdodCkgPiAoMjAgKiBNYXRoLm1heChwcmV2aW91c0hlaWdodCwgY3VycmVudEhlaWdodCkgLyAxMDApICl7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVCdWlsZCh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c0hlaWdodCA9IGN1cnJlbnRIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgLy9pbiBvcmRlciB0byBjYWxsIHRoZSBmdW5jdGlvbnMgb25seSB3aGVuIHRoZSByZXNpemUgaXMgZmluaXNoZWRcclxuICAgICAgICAgICAgLy9odHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzQyOTg2MTIvanF1ZXJ5LWhvdy10by1jYWxsLXJlc2l6ZS1ldmVudC1vbmx5LW9uY2UtaXRzLWZpbmlzaGVkLXJlc2l6aW5nXHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChyZXNpemVJZCk7XHJcblxyXG4gICAgICAgICAgICByZXNpemVJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIHJlQnVpbGQodHJ1ZSk7XHJcbiAgICAgICAgICAgIH0sIDM1MCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgKiBBZGRzIHRyYW5zaXRpb24gYW5pbWF0aW9ucyBmb3IgdGhlIGdpdmVuIGVsZW1lbnRcclxuICAgICovXHJcbiAgICBmdW5jdGlvbiBhZGRBbmltYXRpb24oZWxlbWVudCl7XHJcbiAgICAgICAgdmFyIHRyYW5zaXRpb24gPSAnYWxsICcgKyBvcHRpb25zLnNjcm9sbGluZ1NwZWVkICsgJ21zICcgKyBvcHRpb25zLmVhc2luZ2NzczM7XHJcblxyXG4gICAgICAgIHJlbW92ZUNsYXNzKGVsZW1lbnQsIE5PX1RSQU5TSVRJT04pO1xyXG5cclxuICAgICAgICBjc3MoZWxlbWVudCx7XHJcbiAgICAgICAgICAgICctd2Via2l0LXRyYW5zaXRpb24nOiB0cmFuc2l0aW9uLFxyXG4gICAgICAgICAgICAndHJhbnNpdGlvbic6IHRyYW5zaXRpb25cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAqIFJlbW92ZSB0cmFuc2l0aW9uIGFuaW1hdGlvbnMgZm9yIHRoZSBnaXZlbiBlbGVtZW50XHJcbiAgICAqL1xyXG4gICAgZnVuY3Rpb24gcmVtb3ZlQW5pbWF0aW9uKGVsZW1lbnQpe1xyXG4gICAgICAgIHJldHVybiBhZGRDbGFzcyhlbGVtZW50LCBOT19UUkFOU0lUSU9OKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFjdGl2YXRpbmcgdGhlIHdlYnNpdGUgbmF2aWdhdGlvbiBkb3RzIGFjY29yZGluZyB0byB0aGUgZ2l2ZW4gc2xpZGUgbmFtZS5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gYWN0aXZhdGVOYXZEb3RzKG5hbWUsIHNlY3Rpb25JbmRleCl7XHJcbiAgICAgICAgaWYob3B0aW9ucy5uYXZpZ2F0aW9uKXtcclxuICAgICAgICAgICAgcmVtb3ZlQ2xhc3MoICQoQUNUSVZFX1NFTCwgbmF2KSwgQUNUSVZFKTtcclxuXHJcbiAgICAgICAgICAgIGlmKG5hbWUpe1xyXG4gICAgICAgICAgICAgICAgYWRkQ2xhc3MoICQoJ2FbaHJlZj1cIiMnICsgbmFtZSArICdcIl0nLCBuYXYpICwgQUNUSVZFKTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudExpID0gJCQoJ2xpJywgbmF2KVtzZWN0aW9uSW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgYWRkQ2xhc3MoICQoJ2EnLCBjdXJyZW50TGkpLCBBQ1RJVkUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWN0aXZhdGluZyB0aGUgd2Vic2l0ZSBtYWluIG1lbnUgZWxlbWVudHMgYWNjb3JkaW5nIHRvIHRoZSBnaXZlbiBzbGlkZSBuYW1lLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBhY3RpdmF0ZU1lbnVFbGVtZW50KG5hbWUpe1xyXG4gICAgICAgIGlmKG9wdGlvbnMubWVudSl7XHJcbiAgICAgICAgICAgIHZhciBtZW51ID0gJChvcHRpb25zLm1lbnUpO1xyXG4gICAgICAgICAgICBpZihtZW51KXtcclxuICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzKCQoQUNUSVZFX1NFTCwgbWVudSksIEFDVElWRSk7XHJcbiAgICAgICAgICAgICAgICBhZGRDbGFzcygkKCdbZGF0YS1tZW51YW5jaG9yPVwiJytuYW1lKydcIl0nLCBtZW51KSwgQUNUSVZFKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBhY3RpdmF0ZU1lbnVBbmROYXYoYW5jaG9yLCBpbmRleCl7XHJcbiAgICAgICAgYWN0aXZhdGVNZW51RWxlbWVudChhbmNob3IpO1xyXG4gICAgICAgIGFjdGl2YXRlTmF2RG90cyhhbmNob3IsIGluZGV4KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogUmV0dW5zIGB1cGAgb3IgYGRvd25gIGRlcGVuZGluZyBvbiB0aGUgc2Nyb2xsaW5nIG1vdmVtZW50IHRvIHJlYWNoIGl0cyBkZXN0aW5hdGlvblxyXG4gICAgKiBmcm9tIHRoZSBjdXJyZW50IHNlY3Rpb24uXHJcbiAgICAqL1xyXG4gICAgZnVuY3Rpb24gZ2V0WW1vdmVtZW50KGRlc3Rpbnkpe1xyXG4gICAgICAgIHZhciBmcm9tSW5kZXggPSBnZXROb2RlSW5kZXgoJChTRUNUSU9OX0FDVElWRV9TRUwpKTtcclxuICAgICAgICB2YXIgdG9JbmRleCA9IGdldE5vZGVJbmRleChkZXN0aW55KTtcclxuICAgICAgICBpZiggZnJvbUluZGV4ID09IHRvSW5kZXgpe1xyXG4gICAgICAgICAgICByZXR1cm4gJ25vbmUnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihmcm9tSW5kZXggPiB0b0luZGV4KXtcclxuICAgICAgICAgICAgcmV0dXJuICd1cCc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAnZG93bic7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAqIFJldHVucyBgcmlnaHRgIG9yIGBsZWZ0YCBkZXBlbmRpbmcgb24gdGhlIHNjcm9sbGluZyBtb3ZlbWVudCB0byByZWFjaCBpdHMgZGVzdGluYXRpb25cclxuICAgICogZnJvbSB0aGUgY3VycmVudCBzbGlkZS5cclxuICAgICovXHJcbiAgICBmdW5jdGlvbiBnZXRYbW92ZW1lbnQoZnJvbUluZGV4LCB0b0luZGV4KXtcclxuICAgICAgICBpZiggZnJvbUluZGV4ID09IHRvSW5kZXgpe1xyXG4gICAgICAgICAgICByZXR1cm4gJ25vbmUnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihmcm9tSW5kZXggPiB0b0luZGV4KXtcclxuICAgICAgICAgICAgcmV0dXJuICdsZWZ0JztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuICdyaWdodCc7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAqIEFkZHMgYSBjc3MzIHRyYW5zZm9ybSBwcm9wZXJ0eSB0byB0aGUgY29udGFpbmVyIGNsYXNzIHdpdGggb3Igd2l0aG91dCBhbmltYXRpb24gZGVwZW5kaW5nIG9uIHRoZSBhbmltYXRlZCBwYXJhbS5cclxuICAgICovXHJcbiAgICBmdW5jdGlvbiB0cmFuc2Zvcm1Db250YWluZXIodHJhbnNsYXRlM2QsIGFuaW1hdGVkKXtcclxuICAgICAgICBpZihhbmltYXRlZCl7XHJcbiAgICAgICAgICAgIGFkZEFuaW1hdGlvbihjb250YWluZXIpO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICByZW1vdmVBbmltYXRpb24oY29udGFpbmVyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNldFRyYW5zZm9ybXMoY29udGFpbmVyLCB0cmFuc2xhdGUzZCk7XHJcblxyXG4gICAgICAgIC8vc3luY3Jvbm91c2x5IHJlbW92aW5nIHRoZSBjbGFzcyBhZnRlciB0aGUgYW5pbWF0aW9uIGhhcyBiZWVuIGFwcGxpZWQuXHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICByZW1vdmVDbGFzcyhjb250YWluZXIsIE5PX1RSQU5TSVRJT04pO1xyXG4gICAgICAgIH0sMTApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgKiBHZXRzIGEgc2VjdGlvbiBieSBpdHMgYW5jaG9yIC8gaW5kZXhcclxuICAgICovXHJcbiAgICBmdW5jdGlvbiBnZXRTZWN0aW9uQnlBbmNob3Ioc2VjdGlvbkFuY2hvcil7XHJcbiAgICAgICAgLy9zZWN0aW9uXHJcbiAgICAgICAgdmFyIHNlY3Rpb24gPSAkKFNFQ1RJT05fU0VMICsgJ1tkYXRhLWFuY2hvcj1cIicrc2VjdGlvbkFuY2hvcisnXCJdJyk7XHJcbiAgICAgICAgaWYoIXNlY3Rpb24pe1xyXG4gICAgICAgICAgICBzZWN0aW9uID0gJCQoU0VDVElPTl9TRUwpWyhzZWN0aW9uQW5jaG9yIC0xKV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gc2VjdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogR2V0cyBhIHNsaWRlIGluc2lkZSBhIGdpdmVuIHNlY3Rpb24gYnkgaXRzIGFuY2hvciAvIGluZGV4XHJcbiAgICAqL1xyXG4gICAgZnVuY3Rpb24gZ2V0U2xpZGVCeUFuY2hvcihzbGlkZUFuY2hvciwgc2VjdGlvbil7XHJcbiAgICAgICAgdmFyIHNsaWRlcyA9ICQoU0xJREVTX1dSQVBQRVJfU0VMLCBzZWN0aW9uKTtcclxuICAgICAgICB2YXIgc2xpZGUgPSAgJChTTElERV9TRUwgKyAnW2RhdGEtYW5jaG9yPVwiJytzbGlkZUFuY2hvcisnXCJdJywgc2xpZGVzKTtcclxuXHJcbiAgICAgICAgaWYoc2xpZGVzICYmICFzbGlkZSl7XHJcbiAgICAgICAgICAgIHNsaWRlID0gJCQoU0xJREVfU0VMLCBzbGlkZXMpW3NsaWRlQW5jaG9yXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBzbGlkZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogU2Nyb2xscyB0byB0aGUgZ2l2ZW4gc2VjdGlvbiBhbmQgc2xpZGVcclxuICAgICovXHJcbiAgICBmdW5jdGlvbiBzY3JvbGxQYWdlQW5kU2xpZGUoZGVzdGlueSwgc2xpZGUpe1xyXG4gICAgICAgIHZhciBzZWN0aW9uID0gZ2V0U2VjdGlvbkJ5QW5jaG9yKGRlY29kZVVSSShkZXN0aW55KSk7XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2Ygc2xpZGUgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgIHNsaWRlID0gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vd2UgbmVlZCB0byBzY3JvbGwgdG8gdGhlIHNlY3Rpb24gYW5kIHRoZW4gdG8gdGhlIHNsaWRlXHJcbiAgICAgICAgaWYgKGRlc3RpbnkgIT09IGxhc3RTY3JvbGxlZERlc3RpbnkgJiYgIWhhc0NsYXNzKHNlY3Rpb24sIEFDVElWRSkpe1xyXG4gICAgICAgICAgICBzY3JvbGxQYWdlKHNlY3Rpb24sIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBzY3JvbGxTbGlkZXIoc2VjdGlvbiwgc2xpZGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy9pZiB3ZSB3ZXJlIGFscmVhZHkgaW4gdGhlIHNlY3Rpb25cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICBzY3JvbGxTbGlkZXIoc2VjdGlvbiwgc2xpZGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogU2Nyb2xscyB0aGUgc2xpZGVyIHRvIHRoZSBnaXZlbiBzbGlkZSBkZXN0aW5hdGlvbiBmb3IgdGhlIGdpdmVuIHNlY3Rpb25cclxuICAgICovXHJcbiAgICBmdW5jdGlvbiBzY3JvbGxTbGlkZXIoc2VjdGlvbiwgc2xpZGVBbmNob3Ipe1xyXG4gICAgICAgIGlmKHR5cGVvZiBzbGlkZUFuY2hvciAhPT0gJ3VuZGVmaW5lZCcpe1xyXG4gICAgICAgICAgICB2YXIgc2xpZGVzID0gJChTTElERVNfV1JBUFBFUl9TRUwsIHNlY3Rpb24pO1xyXG4gICAgICAgICAgICB2YXIgZGVzdGlueSA9ICBnZXRTbGlkZUJ5QW5jaG9yKHNsaWRlQW5jaG9yLCBzZWN0aW9uKTtcclxuXHJcbiAgICAgICAgICAgIGlmKGRlc3Rpbnkpe1xyXG4gICAgICAgICAgICAgICAgbGFuZHNjYXBlU2Nyb2xsKHNsaWRlcywgZGVzdGlueSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAqIENyZWF0ZXMgYSBsYW5kc2NhcGUgbmF2aWdhdGlvbiBiYXIgd2l0aCBkb3RzIGZvciBob3Jpem9udGFsIHNsaWRlcnMuXHJcbiAgICAqL1xyXG4gICAgZnVuY3Rpb24gYWRkU2xpZGVzTmF2aWdhdGlvbihzZWN0aW9uLCBudW1TbGlkZXMpe1xyXG4gICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBkaXYuY2xhc3NOYW1lID0gU0xJREVTX05BVjtcclxuXHJcbiAgICAgICAgdmFyIGRpdlVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcclxuICAgICAgICBkaXYuYXBwZW5kQ2hpbGQoZGl2VWwpO1xyXG5cclxuICAgICAgICBzZWN0aW9uLmFwcGVuZENoaWxkKGRpdik7XHJcblxyXG4gICAgICAgIHZhciBuYXYgPSAkKFNMSURFU19OQVZfU0VMLCBzZWN0aW9uKTtcclxuICAgICAgICB2YXIgdWwgPSAgJCgndWwnLCBuYXYpO1xyXG5cclxuICAgICAgICAvL3RvcCBvciBib3R0b21cclxuICAgICAgICBhZGRDbGFzcyhuYXYsIG9wdGlvbnMuc2xpZGVzTmF2UG9zaXRpb24pO1xyXG5cclxuICAgICAgICB2YXIgbGlzdCA9ICcnO1xyXG4gICAgICAgIGZvcih2YXIgaT0wOyBpPCBudW1TbGlkZXM7IGkrKyl7XHJcbiAgICAgICAgICAgIGxpc3QgPSBsaXN0ICsgJzxsaT48YSBocmVmPVwiI1wiPjxzcGFuPjwvc3Bhbj48L2E+PC9saT4nO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdWwuaW5uZXJIVE1MID0gdWwuaW5uZXJIVE1MICsgbGlzdDtcclxuXHJcbiAgICAgICAgLy9jZW50ZXJpbmcgaXRcclxuICAgICAgICBzZXRDc3MobmF2LCAnbWFyZ2luLWxlZnQnLCAnLScgKyAobmF2Lm9mZnNldFdpZHRoLzIpICsgJ3B4Jyk7XHJcblxyXG4gICAgICAgIHZhciBmaXJzdExpID0gJCQoJ2xpJywgbmF2KVswXTtcclxuICAgICAgICBhZGRDbGFzcyggJCgnYScsIGZpcnN0TGkpLCBBQ1RJVkUpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICogU2V0cyB0aGUgc3RhdGUgb2YgdGhlIHdlYnNpdGUgZGVwZW5kaW5nIG9uIHRoZSBhY3RpdmUgc2VjdGlvbi9zbGlkZS5cclxuICAgICogSXQgY2hhbmdlcyB0aGUgVVJMIGhhc2ggd2hlbiBuZWVkZWQgYW5kIHVwZGF0ZXMgdGhlIGJvZHkgY2xhc3MuXHJcbiAgICAqL1xyXG4gICAgZnVuY3Rpb24gc2V0U3RhdGUoc2xpZGVJbmRleCwgc2xpZGVBbmNob3IsIGFuY2hvckxpbmssIHNlY3Rpb25JbmRleCl7XHJcbiAgICAgICAgdmFyIHNlY3Rpb25IYXNoID0gJyc7XHJcblxyXG4gICAgICAgIGlmKG9wdGlvbnMuYW5jaG9ycy5sZW5ndGgpe1xyXG5cclxuICAgICAgICAgICAgLy9pc24ndCBpdCB0aGUgZmlyc3Qgc2xpZGU/XHJcbiAgICAgICAgICAgIGlmKHNsaWRlSW5kZXgpe1xyXG4gICAgICAgICAgICAgICAgaWYodHlwZW9mIGFuY2hvckxpbmsgIT09ICd1bmRlZmluZWQnKXtcclxuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uSGFzaCA9IGFuY2hvckxpbms7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy9zbGlkZSB3aXRob3V0IGFuY2hvciBsaW5rPyBXZSB0YWtlIHRoZSBpbmRleCBpbnN0ZWFkLlxyXG4gICAgICAgICAgICAgICAgaWYodHlwZW9mIHNsaWRlQW5jaG9yID09PSAndW5kZWZpbmVkJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVBbmNob3IgPSBzbGlkZUluZGV4O1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGxhc3RTY3JvbGxlZFNsaWRlID0gc2xpZGVBbmNob3I7XHJcbiAgICAgICAgICAgICAgICBzZXRVcmxIYXNoKHNlY3Rpb25IYXNoICsgJy8nICsgc2xpZGVBbmNob3IpO1xyXG5cclxuICAgICAgICAgICAgLy9maXJzdCBzbGlkZSB3b24ndCBoYXZlIHNsaWRlIGFuY2hvciwganVzdCB0aGUgc2VjdGlvbiBvbmVcclxuICAgICAgICAgICAgfWVsc2UgaWYodHlwZW9mIHNsaWRlSW5kZXggIT09ICd1bmRlZmluZWQnKXtcclxuICAgICAgICAgICAgICAgIGxhc3RTY3JvbGxlZFNsaWRlID0gc2xpZGVBbmNob3I7XHJcbiAgICAgICAgICAgICAgICBzZXRVcmxIYXNoKGFuY2hvckxpbmspO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvL3NlY3Rpb24gd2l0aG91dCBzbGlkZXNcclxuICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgIHNldFVybEhhc2goYW5jaG9yTGluayk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNldEJvZHlDbGFzcygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgKiBTZXRzIHRoZSBVUkwgaGFzaC5cclxuICAgICovXHJcbiAgICBmdW5jdGlvbiBzZXRVcmxIYXNoKHVybCl7XHJcbiAgICAgICAgaWYob3B0aW9ucy5yZWNvcmRIaXN0b3J5KXtcclxuICAgICAgICAgICAgbG9jYXRpb24uaGFzaCA9IHVybDtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgLy9Nb2JpbGUgQ2hyb21lIGRvZXNuJ3Qgd29yayB0aGUgbm9ybWFsIHdheSwgc28uLi4gbGV0cyB1c2UgSFRNTDUgZm9yIHBob25lcyA6KVxyXG4gICAgICAgICAgICBpZihpc1RvdWNoRGV2aWNlIHx8IGlzVG91Y2gpe1xyXG4gICAgICAgICAgICAgICAgaGlzdG9yeS5yZXBsYWNlU3RhdGUodW5kZWZpbmVkLCB1bmRlZmluZWQsICcjJyArIHVybCk7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgdmFyIGJhc2VVcmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZi5zcGxpdCgnIycpWzBdO1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UoIGJhc2VVcmwgKyAnIycgKyB1cmwgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogR2V0cyB0aGUgYW5jaG9yIGZvciB0aGUgZ2l2ZW4gc2xpZGUuIEl0cyBpbmRleCB3aWxsIGJlIHVzZWQgaWYgdGhlcmUncyBub25lLlxyXG4gICAgKi9cclxuICAgIGZ1bmN0aW9uIGdldFNsaWRlQW5jaG9yKHNsaWRlKXtcclxuICAgICAgICB2YXIgc2xpZGVBbmNob3IgPSBzbGlkZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtYW5jaG9yJyk7XHJcbiAgICAgICAgdmFyIHNsaWRlSW5kZXggPSBnZXROb2RlSW5kZXgoc2xpZGUpO1xyXG5cclxuICAgICAgICAvL1NsaWRlIHdpdGhvdXQgYW5jaG9yIGxpbms/IFdlIHRha2UgdGhlIGluZGV4IGluc3RlYWQuXHJcbiAgICAgICAgaWYoIXNsaWRlQW5jaG9yKXtcclxuICAgICAgICAgICAgc2xpZGVBbmNob3IgPSBzbGlkZUluZGV4O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHNsaWRlQW5jaG9yO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgKiBTZXRzIGEgY2xhc3MgZm9yIHRoZSBib2R5IG9mIHRoZSBwYWdlIGRlcGVuZGluZyBvbiB0aGUgYWN0aXZlIHNlY3Rpb24gLyBzbGlkZVxyXG4gICAgKi9cclxuICAgIGZ1bmN0aW9uIHNldEJvZHlDbGFzcyh0ZXh0KXtcclxuICAgICAgICB2YXIgc2VjdGlvbiA9ICQoU0VDVElPTl9BQ1RJVkVfU0VMKTtcclxuICAgICAgICB2YXIgc2xpZGUgPSAkKFNMSURFX0FDVElWRV9TRUwsIHNlY3Rpb24pO1xyXG5cclxuICAgICAgICB2YXIgc2VjdGlvbkFuY2hvciA9IHNlY3Rpb24uZ2V0QXR0cmlidXRlKCdkYXRhLWFuY2hvcicpO1xyXG4gICAgICAgIHZhciBzZWN0aW9uSW5kZXggPSBnZXROb2RlSW5kZXgoc2VjdGlvbik7XHJcblxyXG4gICAgICAgIHZhciB0ZXh0ID0gU3RyaW5nKHNlY3Rpb25JbmRleCk7XHJcblxyXG4gICAgICAgIGlmKG9wdGlvbnMuYW5jaG9ycy5sZW5ndGgpe1xyXG4gICAgICAgICAgICB0ZXh0ID0gc2VjdGlvbkFuY2hvcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKHNsaWRlKXtcclxuICAgICAgICAgICAgdmFyIHNsaWRlQW5jaG9yID0gZ2V0U2xpZGVBbmNob3Ioc2xpZGUpO1xyXG4gICAgICAgICAgICB0ZXh0ID0gdGV4dCArICctJyArIHNsaWRlQW5jaG9yO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9jaGFuZ2luZyBzbGFzaCBmb3IgZGFzaCB0byBtYWtlIGl0IGEgdmFsaWQgQ1NTIHN0eWxlXHJcbiAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZSgnLycsICctJykucmVwbGFjZSgnIycsJycpO1xyXG5cclxuICAgICAgICAvL3JlbW92aW5nIHByZXZpb3VzIGFuY2hvciBjbGFzc2VzXHJcbiAgICAgICAgdmFyIGNsYXNzUmUgPSBuZXcgUmVnRXhwKCdcXFxcYlxcXFxzPycgKyBWSUVXSU5HX1BSRUZJWCArICctW15cXFxcc10rXFxcXGInLCBcImdcIik7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc05hbWUgPSBkb2N1bWVudC5ib2R5LmNsYXNzTmFtZS5yZXBsYWNlKGNsYXNzUmUsICcnKTtcclxuXHJcbiAgICAgICAgLy9hZGRpbmcgdGhlIGN1cnJlbnQgYW5jaG9yXHJcbiAgICAgICAgYWRkQ2xhc3MoZG9jdW1lbnQuYm9keSwgVklFV0lOR19QUkVGSVggKyAnLScgKyB0ZXh0KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogQ2hlY2tzIGZvciB0cmFuc2xhdGUzZCBzdXBwb3J0XHJcbiAgICAqIEByZXR1cm4gYm9vbGVhblxyXG4gICAgKiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzU2NjE2NzEvZGV0ZWN0aW5nLXRyYW5zZm9ybS10cmFuc2xhdGUzZC1zdXBwb3J0XHJcbiAgICAqL1xyXG4gICAgZnVuY3Rpb24gc3VwcG9ydDNkKCkge1xyXG4gICAgICAgIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKSxcclxuICAgICAgICAgICAgaGFzM2QsXHJcbiAgICAgICAgICAgIHRyYW5zZm9ybXMgPSB7XHJcbiAgICAgICAgICAgICAgICAnd2Via2l0VHJhbnNmb3JtJzonLXdlYmtpdC10cmFuc2Zvcm0nLFxyXG4gICAgICAgICAgICAgICAgJ09UcmFuc2Zvcm0nOictby10cmFuc2Zvcm0nLFxyXG4gICAgICAgICAgICAgICAgJ21zVHJhbnNmb3JtJzonLW1zLXRyYW5zZm9ybScsXHJcbiAgICAgICAgICAgICAgICAnTW96VHJhbnNmb3JtJzonLW1vei10cmFuc2Zvcm0nLFxyXG4gICAgICAgICAgICAgICAgJ3RyYW5zZm9ybSc6J3RyYW5zZm9ybSdcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gQWRkIGl0IHRvIHRoZSBib2R5IHRvIGdldCB0aGUgY29tcHV0ZWQgc3R5bGUuXHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5pbnNlcnRCZWZvcmUoZWwsIG51bGwpO1xyXG5cclxuICAgICAgICBmb3IgKHZhciB0IGluIHRyYW5zZm9ybXMpIHtcclxuICAgICAgICAgICAgaWYgKGVsLnN0eWxlW3RdICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGVsLnN0eWxlW3RdID0gJ3RyYW5zbGF0ZTNkKDFweCwxcHgsMXB4KSc7XHJcbiAgICAgICAgICAgICAgICBoYXMzZCA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsKS5nZXRQcm9wZXJ0eVZhbHVlKHRyYW5zZm9ybXNbdF0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGVsKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIChoYXMzZCAhPT0gdW5kZWZpbmVkICYmIGhhczNkLmxlbmd0aCA+IDAgJiYgaGFzM2QgIT09ICdub25lJyk7XHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICogUmVtb3ZlcyB0aGUgYXV0byBzY3JvbGxpbmcgYWN0aW9uIGZpcmVkIGJ5IHRoZSBtb3VzZSB3aGVlbCBhbmQgdHJhY2twYWQuXHJcbiAgICAqIEFmdGVyIHRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkLCB0aGUgbW91c2V3aGVlbCBhbmQgdHJhY2twYWQgbW92ZW1lbnRzIHdvbid0IHNjcm9sbCB0aHJvdWdoIHNlY3Rpb25zLlxyXG4gICAgKi9cclxuICAgIGZ1bmN0aW9uIHJlbW92ZU1vdXNlV2hlZWxIYW5kbGVyKCl7XHJcbiAgICAgICAgdmFyIHdyYXBwZXIgPSAkKFdSQVBQRVJfU0VMKTtcclxuXHJcbiAgICAgICAgaWYgKGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIpIHtcclxuICAgICAgICAgICAgd3JhcHBlci5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXdoZWVsJywgTW91c2VXaGVlbEhhbmRsZXIsIGZhbHNlKTsgLy9JRTksIENocm9tZSwgU2FmYXJpLCBPcGVyXHJcbiAgICAgICAgICAgIHdyYXBwZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignd2hlZWwnLCBNb3VzZVdoZWVsSGFuZGxlciwgZmFsc2UpOyAvL0ZpcmVmb3hcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB3cmFwcGVyLmRldGFjaEV2ZW50KCdvbm1vdXNld2hlZWwnLCBNb3VzZVdoZWVsSGFuZGxlcik7IC8vSUUgNi83LzhcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgKiBBZGRzIHRoZSBhdXRvIHNjcm9sbGluZyBhY3Rpb24gZm9yIHRoZSBtb3VzZSB3aGVlbCBhbmQgdHJhY2twYWQuXHJcbiAgICAqIEFmdGVyIHRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkLCB0aGUgbW91c2V3aGVlbCBhbmQgdHJhY2twYWQgbW92ZW1lbnRzIHdpbGwgc2Nyb2xsIHRocm91Z2ggc2VjdGlvbnNcclxuICAgICovXHJcbiAgICBmdW5jdGlvbiBhZGRNb3VzZVdoZWVsSGFuZGxlcigpe1xyXG4gICAgICAgIGFkZEhhbmRsZXIoJChXUkFQUEVSX1NFTCksIE1vdXNlV2hlZWxIYW5kbGVyLCAnbW91c2V3aGVlbCcsICdvbm1vdXNld2hlZWwnLCAnd2hlZWwnKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBhZGRSZXNpemVIYW5kbGVyKCl7XHJcbiAgICAgICAgYWRkSGFuZGxlcih3aW5kb3csIHJlc2l6ZUhhbmRsZXIsICdyZXNpemUnLCAnb25yZXNpemUnKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBhZGRTY3JvbGxIYW5kbGVyKCl7XHJcbiAgICAgICAgYWRkSGFuZGxlcih3aW5kb3csIHNjcm9sbEhhbmRsZXIsICdzY3JvbGwnLCAnb25zY3JvbGwnLCAnb25zY3JvbGwnKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBhZGRIYW5kbGVyKGVsZW1lbnQsIG1ldGhvZCwgbm9ybWFsLCBvbGRJRSwgZmlyZWZveCl7XHJcbiAgICAgICAgaWYoZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKXtcclxuICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKG5vcm1hbCwgbWV0aG9kLCBmYWxzZSk7IC8vSUU5LCBDaHJvbWUsIFNhZmFyaSwgT3BlclxyXG5cclxuICAgICAgICAgICAgaWYodHlwZW9mIGZpcmVmb3ggIT09ICd1bmRlZmluZWQnKXtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihmaXJlZm94LCBtZXRob2QsIGZhbHNlKTsgLy9GaXJlZm94XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgZWxlbWVudC5hdHRhY2hFdmVudChvbGRJRSwgbWV0aG9kKTsgIC8vSUUgNi83LzhcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgKiBBZGRzIHRoZSBwb3NzaWJpbGl0eSB0byBhdXRvIHNjcm9sbCB0aHJvdWdoIHNlY3Rpb25zIG9uIHRvdWNoIGRldmljZXMuXHJcbiAgICAqL1xyXG4gICAgZnVuY3Rpb24gYWRkVG91Y2hIYW5kbGVyKCl7XHJcbiAgICAgICAgaWYoaXNUb3VjaERldmljZSB8fCBpc1RvdWNoKXtcclxuICAgICAgICAgICAgdmFyIHdyYXBwZXIgPSAkKFdSQVBQRVJfU0VMKTtcclxuICAgICAgICAgICAgaWYgKGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIpIHtcclxuICAgICAgICAgICAgICAgIC8vTWljcm9zb2Z0IHBvaW50ZXJzXHJcbiAgICAgICAgICAgICAgICB2YXIgTVNQb2ludGVyID0gZ2V0TVNQb2ludGVyKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgd3JhcHBlci5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdG91Y2hTdGFydEhhbmRsZXIpO1xyXG4gICAgICAgICAgICAgICAgd3JhcHBlci5yZW1vdmVFdmVudExpc3RlbmVyKE1TUG9pbnRlci5kb3duLCB0b3VjaFN0YXJ0SGFuZGxlcik7XHJcblxyXG4gICAgICAgICAgICAgICAgd3JhcHBlci5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0b3VjaE1vdmVIYW5kbGVyKTtcclxuICAgICAgICAgICAgICAgIHdyYXBwZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcihNU1BvaW50ZXIubW92ZSwgdG91Y2hNb3ZlSGFuZGxlcik7XHJcblxyXG4gICAgICAgICAgICAgICAgYWRkTGlzdGVuZXJNdWx0aSh3cmFwcGVyLCAndG91Y2hzdGFydCAnICsgTVNQb2ludGVyLmRvd24sIHRvdWNoU3RhcnRIYW5kbGVyKTtcclxuICAgICAgICAgICAgICAgIGFkZExpc3RlbmVyTXVsdGkod3JhcHBlciwgJ3RvdWNobW92ZSAnICsgTVNQb2ludGVyLm1vdmUsIHRvdWNoTW92ZUhhbmRsZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgKiBSZW1vdmVzIHRoZSBhdXRvIHNjcm9sbGluZyBmb3IgdG91Y2ggZGV2aWNlcy5cclxuICAgICovXHJcbiAgICBmdW5jdGlvbiByZW1vdmVUb3VjaEhhbmRsZXIoKXtcclxuICAgICAgICBpZihpc1RvdWNoRGV2aWNlIHx8IGlzVG91Y2gpe1xyXG4gICAgICAgICAgICB2YXIgd3JhcHBlciA9ICQoV1JBUFBFUl9TRUwpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHdyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcikge1xyXG4gICAgICAgICAgICAgICAgLy9NaWNyb3NvZnQgcG9pbnRlcnNcclxuICAgICAgICAgICAgICAgIHZhciBNU1BvaW50ZXIgPSBnZXRNU1BvaW50ZXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICB3cmFwcGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB0b3VjaFN0YXJ0SGFuZGxlcik7XHJcbiAgICAgICAgICAgICAgICB3cmFwcGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoTVNQb2ludGVyLmRvd24sIHRvdWNoU3RhcnRIYW5kbGVyKTtcclxuXHJcbiAgICAgICAgICAgICAgICB3cmFwcGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRvdWNoTW92ZUhhbmRsZXIpO1xyXG4gICAgICAgICAgICAgICAgd3JhcHBlci5yZW1vdmVFdmVudExpc3RlbmVyKE1TUG9pbnRlci5tb3ZlLCB0b3VjaE1vdmVIYW5kbGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgLypcclxuICAgICogUmV0dXJucyBhbmQgb2JqZWN0IHdpdGggTWljcm9zb2Z0IHBvaW50ZXJzIChmb3IgSUU8MTEgYW5kIGZvciBJRSA+PSAxMSlcclxuICAgICogaHR0cDovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L2llL2RuMzA0ODg2KHY9dnMuODUpLmFzcHhcclxuICAgICovXHJcbiAgICBmdW5jdGlvbiBnZXRNU1BvaW50ZXIoKXtcclxuICAgICAgICB2YXIgcG9pbnRlcjtcclxuXHJcbiAgICAgICAgLy9JRSA+PSAxMSAmIHJlc3Qgb2YgYnJvd3NlcnNcclxuICAgICAgICBpZih3aW5kb3cuUG9pbnRlckV2ZW50KXtcclxuICAgICAgICAgICAgcG9pbnRlciA9IHsgZG93bjogJ3BvaW50ZXJkb3duJywgbW92ZTogJ3BvaW50ZXJtb3ZlJ307XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL0lFIDwgMTFcclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICBwb2ludGVyID0geyBkb3duOiAnTVNQb2ludGVyRG93bicsIG1vdmU6ICdNU1BvaW50ZXJNb3ZlJ307XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcG9pbnRlcjtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgKiBHZXRzIHRoZSBwYWdlWCBhbmQgcGFnZVkgcHJvcGVydGllcyBkZXBlbmRpbmcgb24gdGhlIGJyb3dzZXIuXHJcbiAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9hbHZhcm90cmlnby9mdWxsUGFnZS5qcy9pc3N1ZXMvMTk0I2lzc3VlY29tbWVudC0zNDA2OTg1NFxyXG4gICAgKi9cclxuICAgIGZ1bmN0aW9uIGdldEV2ZW50c1BhZ2UoZSl7XHJcbiAgICAgICAgdmFyIGV2ZW50cyA9IFtdO1xyXG5cclxuICAgICAgICBldmVudHMueSA9ICh0eXBlb2YgZS5wYWdlWSAhPT0gJ3VuZGVmaW5lZCcgJiYgKGUucGFnZVkgfHwgZS5wYWdlWCkgPyBlLnBhZ2VZIDogZS50b3VjaGVzWzBdLnBhZ2VZKTtcclxuICAgICAgICBldmVudHMueCA9ICh0eXBlb2YgZS5wYWdlWCAhPT0gJ3VuZGVmaW5lZCcgJiYgKGUucGFnZVkgfHwgZS5wYWdlWCkgPyBlLnBhZ2VYIDogZS50b3VjaGVzWzBdLnBhZ2VYKTtcclxuXHJcbiAgICAgICAgLy9pbiB0b3VjaCBkZXZpY2VzIHdpdGggc2Nyb2xsQmFyOnRydWUsIGUucGFnZVkgaXMgZGV0ZWN0ZWQsIGJ1dCB3ZSBoYXZlIHRvIGRlYWwgd2l0aCB0b3VjaCBldmVudHMuICMxMDA4XHJcbiAgICAgICAgaWYoaXNUb3VjaCAmJiBpc1JlYWxseVRvdWNoKGUpKXtcclxuICAgICAgICAgICAgZXZlbnRzLnkgPSBlLnRvdWNoZXNbMF0ucGFnZVk7XHJcbiAgICAgICAgICAgIGV2ZW50cy54ID0gZS50b3VjaGVzWzBdLnBhZ2VYO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGV2ZW50cztcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzaWxlbnRMYW5kc2NhcGVTY3JvbGwoYWN0aXZlU2xpZGUsIG5vQ2FsbGJhY2tzKXtcclxuICAgICAgICBzZXRTY3JvbGxpbmdTcGVlZCAoMCwgJ2ludGVybmFsJyk7XHJcblxyXG4gICAgICAgIGlmKHR5cGVvZiBub0NhbGxiYWNrcyAhPT0gJ3VuZGVmaW5lZCcpe1xyXG4gICAgICAgICAgICAvL3ByZXZlbnRpbmcgZmlyaW5nIGNhbGxiYWNrcyBhZnRlclNsaWRlTG9hZCBldGMuXHJcbiAgICAgICAgICAgIGlzUmVzaXppbmcgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9lcXVpdmFsZW50IHRvOiAgIGFjdGl2ZVNsaWRlLmNsb3Nlc3QoU0xJREVTX1dSQVBQRVJfU0VMKVxyXG4gICAgICAgIHZhciBzbGlkZXMgPSBjbG9zZXN0KGFjdGl2ZVNsaWRlLCBmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGhhc0NsYXNzKGVsLCBTTElERVNfV1JBUFBFUik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxhbmRzY2FwZVNjcm9sbChzbGlkZXMsIGFjdGl2ZVNsaWRlKTtcclxuXHJcbiAgICAgICAgaWYodHlwZW9mIG5vQ2FsbGJhY2tzICE9PSAndW5kZWZpbmVkJyl7XHJcbiAgICAgICAgICAgIGlzUmVzaXppbmcgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNldFNjcm9sbGluZ1NwZWVkKG9yaWdpbmFscy5zY3JvbGxpbmdTcGVlZCwgJ2ludGVybmFsJyk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2lsZW50U2Nyb2xsKHRvcCl7XHJcbiAgICAgICAgaWYob3B0aW9ucy5zY3JvbGxCYXIpe1xyXG4gICAgICAgICAgICB2YXIgc2Nyb2xsU2V0dGluZ3MgPSBnZXRTY3JvbGxTZXR0aW5ncyh0b3ApO1xyXG4gICAgICAgICAgICBzZXRTY3JvbGxpbmcoc2Nyb2xsU2V0dGluZ3MuZWxlbWVudCwgc2Nyb2xsU2V0dGluZ3Mub3B0aW9ucywgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKG9wdGlvbnMuY3NzMykge1xyXG4gICAgICAgICAgICB2YXIgdHJhbnNsYXRlM2QgPSAndHJhbnNsYXRlM2QoMHB4LCAtJyArIHRvcCArICdweCwgMHB4KSc7XHJcbiAgICAgICAgICAgIHRyYW5zZm9ybUNvbnRhaW5lcih0cmFuc2xhdGUzZCwgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgc2V0Q3NzKGNvbnRhaW5lciwgJ3RvcCcsIC10b3AgKyAncHgnKTtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNldFRyYW5zZm9ybXMoZWxlbWVudCwgdHJhbnNsYXRlM2Qpe1xyXG4gICAgICAgIGNzcyhlbGVtZW50LCB7XHJcbiAgICAgICAgICAgICctd2Via2l0LXRyYW5zZm9ybSc6IHRyYW5zbGF0ZTNkLFxyXG4gICAgICAgICAgICAnLW1vei10cmFuc2Zvcm0nOiB0cmFuc2xhdGUzZCxcclxuICAgICAgICAgICAgJy1tcy10cmFuc2Zvcm0nOiB0cmFuc2xhdGUzZCxcclxuICAgICAgICAgICAgJ3RyYW5zZm9ybSc6IHRyYW5zbGF0ZTNkXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLypcclxuICAgICogU2V0cyB0aGUgc3RhdGUgZm9yIGEgdmFyaWFibGUgd2l0aCBtdWx0aXBsZSBzdGF0ZXMgKG9yaWdpbmFsLCBhbmQgdGVtcG9yYWwpXHJcbiAgICAqIFNvbWUgdmFyaWFibGVzIHN1Y2ggYXMgYGF1dG9TY3JvbGxpbmdgIG9yIGByZWNvcmRIaXN0b3J5YCBtaWdodCBjaGFuZ2UgYXV0b21hdGljYWxseSBpdHMgc3RhdGUgd2hlbiB1c2luZyBgcmVzcG9uc2l2ZWAgb3IgYGF1dG9TY3JvbGxpbmc6ZmFsc2VgLlxyXG4gICAgKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8ga2VlcCB0cmFjayBvZiBib3RoIHN0YXRlcywgdGhlIG9yaWdpbmFsIGFuZCB0aGUgdGVtcG9yYWwgb25lLlxyXG4gICAgKiBJZiB0eXBlIGlzIG5vdCAnaW50ZXJuYWwnLCB0aGVuIHdlIGFzc3VtZSB0aGUgdXNlciBpcyBnbG9iYWxseSBjaGFuZ2luZyB0aGUgdmFyaWFibGUuXHJcbiAgICAqL1xyXG4gICAgZnVuY3Rpb24gc2V0VmFyaWFibGVTdGF0ZSh2YXJpYWJsZSwgdmFsdWUsIHR5cGUpe1xyXG4gICAgICAgIG9wdGlvbnNbdmFyaWFibGVdID0gdmFsdWU7XHJcbiAgICAgICAgaWYodHlwZSAhPT0gJ2ludGVybmFsJyl7XHJcbiAgICAgICAgICAgIG9yaWdpbmFsc1t2YXJpYWJsZV0gPSB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAqIERpc3BsYXlzIHdhcm5pbmdzXHJcbiAgICAqL1xyXG4gICAgZnVuY3Rpb24gZGlzcGxheVdhcm5pbmdzKCl7XHJcbiAgICAgICAgLy9hbmNob3JzIGNhbiBub3QgaGF2ZSB0aGUgc2FtZSB2YWx1ZSBhcyBhbnkgZWxlbWVudCBJRCBvciBOQU1FXHJcbiAgICAgICAgZm9yKHZhciBpID0wOyBpPG9wdGlvbnMuYW5jaG9ycy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgIHZhciBuYW1lID0gb3B0aW9ucy5hbmNob3JzW2ldO1xyXG4gICAgICAgICAgICB2YXIgZXhpc3RJZCA9IGdldEJ5SWQoJyMnICsgbmFtZSk7XHJcbiAgICAgICAgICAgIGlmKCBleGlzdElkIHx8ICQkKCdbbmFtZT1cIicrbmFtZSsnXCJdJykubGVuZ3RoKXtcclxuICAgICAgICAgICAgICAgIHNob3dFcnJvcignZXJyb3InLCAnZGF0YS1hbmNob3IgdGFncyBjYW4gbm90IGhhdmUgdGhlIHNhbWUgdmFsdWUgYXMgYW55IGBpZGAgZWxlbWVudCBvbiB0aGUgc2l0ZSAob3IgYG5hbWVgIGVsZW1lbnQgZm9yIElFKS4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogU2hvd3MgYSBtZXNzYWdlIGluIHRoZSBjb25zb2xlIG9mIHRoZSBnaXZlbiB0eXBlLlxyXG4gICAgKi9cclxuICAgIGZ1bmN0aW9uIHNob3dFcnJvcih0eXBlLCB0ZXh0KXtcclxuICAgICAgICBjb25zb2xlICYmIGNvbnNvbGVbdHlwZV0gJiYgY29uc29sZVt0eXBlXSgnZnVsbFBhZ2U6ICcgKyB0ZXh0KTtcclxuICAgIH1cclxuXHJcbiAgICAvL0FQSVxyXG4gICAgZnVsbHBhZ2UgPSB7XHJcbiAgICAgICAgaW5pdGlhbGl6ZTogaW5pdGlhbGl6ZSxcclxuICAgICAgICBtb3ZlU2VjdGlvblVwOiBtb3ZlU2VjdGlvblVwLFxyXG4gICAgICAgIG1vdmVTZWN0aW9uRG93bjogbW92ZVNlY3Rpb25Eb3duLFxyXG4gICAgICAgIG1vdmVUbzogbW92ZVRvLFxyXG4gICAgICAgIHNpbGVudE1vdmVUbzogc2lsZW50TW92ZVRvLFxyXG4gICAgICAgIG1vdmVTbGlkZVJpZ2h0OiBtb3ZlU2xpZGVSaWdodCxcclxuICAgICAgICBtb3ZlU2xpZGVMZWZ0OiBtb3ZlU2xpZGVMZWZ0LFxyXG4gICAgICAgIHNldEF1dG9TY3JvbGxpbmc6IHNldEF1dG9TY3JvbGxpbmcsXHJcbiAgICAgICAgc2V0Rml0VG9TZWN0aW9uOiBzZXRGaXRUb1NlY3Rpb24sXHJcbiAgICAgICAgc2V0S2V5Ym9hcmRTY3JvbGxpbmc6IHNldEtleWJvYXJkU2Nyb2xsaW5nLFxyXG4gICAgICAgIHNldFJlY29yZEhpc3Rvcnk6IHNldFJlY29yZEhpc3RvcnksXHJcbiAgICAgICAgc2V0U2Nyb2xsaW5nU3BlZWQ6IHNldFNjcm9sbGluZ1NwZWVkXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBmdWxscGFnZTtcclxufSkpO1xyXG4iXX0=
